"use strict";(this["webpackChunktzw_live_watch"]=this["webpackChunktzw_live_watch"]||[]).push([[440],{20480:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAADAJJREFUeF7tnV+IXPUVx79nXNcXn8zckSSkRisIij7YB0n8U6ltYsRAaavUUK2CFoXkoZCAO7Npt83eWSGBPmTBUAVtUpKibSlE1MRarH8SfKgPioJgNTZkF+dOfMpL1vX+yvxJCMbs3fx2Zn7nN+e74Nvv3HPO55wPdzfeOyPgDwmQwAUJCNmQAAlcmAAF4XaQwAIEKAjXgwQoCHeABPwI8A7ix41RRghQECODZpt+BCiIHzdGGSFAQYwMmm36EaAgftwYZYQABTEyaLbpR4CC+HFjlBECFMTIoNmmHwEK4seNUUYIUBAjg2abfgQoiB83RhkhQEGMDJpt+hGgIH7cGGWEAAUxMmi26UeAgvhxY5QRAhTEyKDZph8BCuLHjVFGCFAQI4Nmm34EKIgfN0YZIUBBjAyabfoRoCB+3BhlhAAFMTJotulHgIL4cWOUEQIUxMig2aYfAQrix41RRghQECODZpt+BCiIHzdGGSFAQbqDdmMrl2FkfgWcW47crQCwHHCX2dgDOQ1gFiWZgcgs5kdmZOrESRu9L9ylSUFctXwzSqUfI3c/hLRFWAHIKBfiXAJuDpAZuLY4/0Se/0PqzfesMTIhiJvAKOaTH8C5uwD5CYBrrA26R/1+Cri/Q+R1jGT/kgnM9ei6ai8z1IK4arIBJfwcDj/q/MrEnx4SmIXgNeT4i9SzV3p4XVWXGkpBXK2yFsBmwD2givbQFiMHAExL2jgybC0OlSBu7IrrUSptAeTxYRtUHP24Pcjz3TL15Udx1Ftc5VAI4mrLVgKlzZ27Bi4vbpsn+kjgVOtuAuTTkp480cc8A7l09IK48fK9cPIHANcOhBiTLJbAJxD3a5lsvrTYAI3nohbE1SpbAbdTI1jWdIaAbJO0sStWHtEK4mrJMwAejRW8sbqflTR7LMaeoxTE1ZK3ANwWI3DDNb8taXZ7bP1HJ4irJRmAcmygWW+bQFPSLImJRVSCuFr5GCBXxQSYtX6TgPtc0ubqWLhEI4irlfcC8mAsYFnnQgTcPkmbD8XAKApBXC1p/f+N3TEAZY2LJrBF0mx60acDHVQviKsl9wF4IRAfpu0vgfslzV7sb4qlXV21IK6W3AHg30trkdHKCXxf0uxNrTWqFaT7+MjrAK7TCo919YTAx0B+l9bHUhQLkkwBeLInI+BFtBN4StJsTGORKgXpPJV7ybt88FDjyvSlplPIv75F41PAOgWplZ/mI+t9WUTFF3V7JG0+oa1AdYJ0XnZy72gDxXoGQUBu1fbSlUZB9vNNwEEso8YcckDSxiZNlakSpP0OueBlTYBYy4AJONyj6R13XYKMl/fByS8GPBKm00RA3J9lsqnmkSI1griJG0Yx3zgOh4qmebGWARMQNDBSWSUTH6r4SCE9gtQqPwXcXwc8DqZTSUB+JmnjbxpKUyQI3xDUsBBKalDzBqImQf4HYJWSAbGMsASOS5p9J2wJnewqBHHbK2uQu6H70DENA462hpKslR2No6Hr1yHIeFKHg8pncUIPyGx+wZRMZtXQ/esQpJocgWBNaBjMr4iAw1GpZ62PkA36o0OQWvIZgGjeUw46MTvJj0maXR26XSWClE/z+zlCr4K2/G5O0mbwLzAKLkj7m51Kc01t42E9Cgjko+XQ33QVXpDtV96IPH9fwThYgjYCpdJNsuOLD0KWFV6Q8co6OHcoJATmVkpAZL1MNg6HrC68INXkYQieCwmBuZUScHhE6tnzIavTIMgYBPWQEJhbKQGHqtSz1mcTBPtRIEh5AiK/DUaAifUScO53Um9OhCyQgoSkz9wLE6AggKvyDkJPLkCAglAQyrEAAQpCQSgIBVlwB/grFhW5IAHeQXgHoR68g/AOQgv8CPAOwjuI3+YYiaIgFMTIqvu1SUEoiN/mGImiIBTEyKr7tUlBKIjf5hiJoiAUxMiq+7VJQSiI3+YYiaIgFMTIqvu1SUEoiN/mGImiIBTEyKr7tUlBKIjf5hiJoiAUxMiq+7VJQSiI3+YYiaIgFMTIqvu1SUEoiN/mGImiIBTEyKr7tUlBKIjf5hiJoiAUxMiq+7VJQSiI3+YYiaIgFMTIqvu1SUEoiN/mGImiIBTEyKr7tUlBKIjf5hiJoiAUxMiq+7VJQSiI3+YYiaIgFMTIqvu1SUEoiN/mGImiIBTEyKr7tUlBKIjf5hiJoiAUxMiq+7VJQSiI3+YYiaIgFMTIqvu1SUEoiN/mGImiIBTEyKr7tUlBKIjf5hiJoiAUxMiq+7VJQSiI3+YYiaIgFMTIqvu1SUEoiN/mGImiIBTEyKr7tUlBKIjf5hiJoiAUxMiq+7VJQSiI3+YYiaIgFMTIqvu1SUEoiN/mGImiIBTEyKr7tUlBKIjf5hiJoiAUxMiq+7VJQSiI3+YYiaIgFMTIqvu1SUFagiRjENT9CDJqqAk4VKWeTYXsUUImb+V21eRhCJ4LXQfzKyTg8IjUs+dDVhZekPHKOjh3KCQE5lZKQGS9TDYOh6wuvCDbr7wRef5+SAjMrZRAqXST7Pjig5DVhRdkbOUylOaaISEwt1IC+WhZpk6cDFldcEHaf4fUyqcBGQ0Jgrm1EXBzkjYvC12VEkGSzwCsDg2D+VUROCZpdnXoinQIUk2OQLAmNAzmV0TA4ajUs7WhK9IhyHjl93Bue2gYzK+IgMgOmWz8JnRFOgSplm+GyH9Cw2B+RQSc+57Um++FrkiFIJ0/1JP/ArgmNBDmV0HgU0mz72qoRJEg5Z2AbNUAhTWEJuB2SdrcFrqKVn49gownd8PhFQ1QWENgAoINMpm9GriKdno9gkxgFF8lxwAs1wCGNQQjMItLs9UygblgFZyTWI0g7b9DxpM/weEhDWBYQyACgr0ymf0yUPbz0uoSpJpsgOBlLXBYRwACDvdIPVPzq7YqQTr/mlXZD7gHAoyGKYMTkAOSNjYFL0Prr1hdQdYC7h1NkFjLoAjIrZI2jgwq22LyqLuDdCQpPw3I44tpgGeGhYDbI2nzCW3d6BRk7IrrUbrkXQCXawPGevpC4BTyr2+RqS8/6svVl3BRlYJ07iJJ613kJ5fQG0PjIfCUpNmYxnIVC7JsJVB6A8C1GsGxpp4R+ATI75T05ImeXbGHF1IrSPsuMl6+F04O9rBfXkobAXEbZbL5krayztSjWpDuv2ptBdxOrQBZ11IIyDZJG7uWcoV+x6oXpPv3yDMAHu03DF5/oASelTR7bKAZPZJFIUhXkrcA3ObRI0P0EXhb0ux2fWWdX1E0gnQlyQCUYwDLGi9IoClplsTCJypBOpKUjwFyVSyAWee5BNznkjaj+nCO6ATpSrIXkAe5fDERcPskbUb3pHaUgnR/3doMYHdMK2K41i2SZtMx9h+tIF1J7gPwQozgDdV8v6TZi7H2G7UgXUnuAPBHANfFOoQhrftjAL+SNHsz5v6iF6QjSfuxlNavXK3/+IBj2I08BWAayKe1Pj5yMXiGQpAzDbv2U8ClLXxU/mJWoJdn3R7k+W6NT+X6djlUgpwVpVZpfWTlZr6Z6LsWFxsnB1p3DW0vO11sF992figFOStK6x33ktsEyDo4VHoBjNfoEhA0AHcYuezX9A55r+cz1IKcFWXihlF8lW0E3N0A1gNY1WuQRq53HMAhQF7FpclBmfhQxUfz9JO9CUG+CdBtr6yBcxuR405I63O43Ap+P8l5lOYAmYHDLEp4AyIHZUfjaD+XUeO1TQrybYNwrW+6GplfAeeWI28J0xYn+Be4DGZp5DTQEkFmIDKL+ZGZ0N/sNJi+i7NQkGJGPGGYAAUxPHy2XkyAghQz4gnDBCiI4eGz9WICFKSYEU8YJkBBDA+frRcToCDFjHjCMAEKYnj4bL2YAAUpZsQThglQEMPDZ+vFBChIMSOeMEyAghgePlsvJkBBihnxhGECFMTw8Nl6MQEKUsyIJwwToCCGh8/WiwlQkGJGPGGYAAUxPHy2XkyAghQz4gnDBCiI4eGz9WICFKSYEU8YJkBBDA+frRcToCDFjHjCMAEKYnj4bL2YAAUpZsQThglQEMPDZ+vFBChIMSOeMEyAghgePlsvJkBBihnxhGECFMTw8Nl6MQEKUsyIJwwToCCGh8/Wiwn8H5s9tfY+QD9vAAAAAElFTkSuQmCC"},27346:(e,t,i)=>{i.r(t),i.d(t,{default:()=>ll});var o=function(){var e=this,t=e._self._c;return e.isMulti?t("div",{staticClass:"root-container"},[t("div",{staticClass:"msg-layout-container"},[t("RightPanel",{attrs:{layout:"big-right"}})],1)]):t("div",{staticClass:"root-container",class:e.isMobile?"mobile":"",style:(e.isMobile?e.getLiveRoomStyle.mobileMainStyle:e.getLiveRoomStyle.mainStyle)||{}},[e.isMobile?t("MobileMainPanel"):"big-right"==e.layout?t("LayoutBigRight"):"lite-left"==e.layout?t("LayoutLiteLeft"):"left-right"==e.layout?t("LayoutLeftRight"):e._e()],1)},s=[],a=(i(44114),i(95353)),l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"right-container",class:e.myLayout,style:e.getLiveRoomStyle.rightStyle},["big-right"==e.myLayout&&e.lecturerList&&e.lecturerList.length&&!e.isMulti?t("div",{staticClass:"lecture-container",style:e.getLiveRoomStyle.lecturePanelStyle},[t("div",{staticClass:"title",style:e.getLiveRoomStyle.lecturePanelTitleStyle},[e._v("大咖评选")]),t("div",{staticClass:"list-panel"},e._l(e.lecturerList,function(i){return t("div",{key:"item_"+i.userId,staticClass:"list-item"},[t("div",{staticClass:"name",style:e.getLiveRoomStyle.lectureNameStyle},[e._v(e._s(i.lecturerName))]),t("div",{staticClass:"label",style:e.getLiveRoomStyle.lectureCountStyle},[e._v(e._s(i.voteCount+(i.realVoteCount||0))+"票")]),t("div",{staticClass:"btn",style:e.getLiveRoomStyle.lectureBtnStyle,on:{click:function(t){return e.lecturerVote(i)}}},[e._v("投票")])])}),0)]):e._e(),t("div",{staticClass:"title",class:e.myLayout},[e.searchVisible?e._e():t("div",{staticClass:"tab",class:"msgs"!=e.activeTab||e.searchVisible?"":"big-right"!=e.myLayout?"full-width":"active",style:e.getLiveRoomStyle.rightTitleStyle,on:{click:function(t){e.activeTab="msgs"}}},[e._v(e._s((e.isMulti?e.getLiveRoomInfo.name+"-":"")+"消息"))]),e.searchVisible||"big-right"!=e.myLayout?e._e():t("div",{staticClass:"tab",class:"users"!=e.activeTab||e.searchVisible?"":"active",style:e.getLiveRoomStyle.rightTitleStyle,on:{click:function(t){e.activeTab="users"}}},[e.getUserInfo.type>2?t("div",{staticClass:"robot-setting"},[t("svg-icon",{staticClass:"icon",attrs:{"icon-class":"setting"},on:{click:e.setRobot}})],1):e._e(),e._v(" "+e._s(e.isMulti?e.getLiveRoomInfo.name+"-":"在线")+"观众("+e._s(e.getOnlineUserTotal+e.getRobotTotal)+") ")]),!e.hasAdminPromission(e.getUserInfo,e.getLiveRoomInfo.isTeamAdmin)||"big-right"!=e.myLayout&&"left-right"!=e.myLayout?e._e():t("div",{staticClass:"tab search-panel",class:e.searchVisible?"active":""},[e.searchVisible?t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchParam,expression:"searchParam"}],staticClass:"search-input",attrs:{type:"text",placeholder:"输入昵称或账号"},domProps:{value:e.searchParam},on:{keyup:e.search,input:function(t){t.target.composing||(e.searchParam=t.target.value)}}}):e._e(),e.searchVisible?t("svg-icon",{staticClass:"icon",class:e.searchVisible?"active":"",attrs:{"icon-class":"delete-circle"},on:{click:function(t){t.stopPropagation(),e.searchVisible=!1,e.searchParam=null}}}):t("svg-icon",{staticClass:"icon",class:e.searchVisible?"active":"",attrs:{"icon-class":"search"},on:{click:function(t){t.stopPropagation(),e.searchVisible=!0}}})],1)]),t("div",{staticClass:"content-container"},["msgs"!=e.activeTab||e.searchVisible?e._e():t("Chat",{ref:"msgContainer",attrs:{layout:e.myLayout}}),"users"!=e.activeTab||e.searchVisible?e._e():t("UserList",{ref:"userListContainer",attrs:{layout:e.myLayout}}),e.searchVisible?t("UserSearchResult",{ref:"userSearchResult",style:e.getLiveRoomStyle.userSearchResultStyle,attrs:{layout:e.myLayout}}):e._e()],1)])},n=[],r=function(){var e=this,t=e._self._c;return t("div",{ref:"userListContainer",staticClass:"user-container",style:e.isMobile?"":e.getLiveRoomStyle.userListStyle},[e._l(e.getOnlineLectureList,function(i,o){return t("UserListItem",{key:"key_lecture_"+o+"_"+i.userId,attrs:{layout:e.myLayout,user:i}})}),e._l(e.getOnlineAssistantList,function(i,o){return t("UserListItem",{key:"key_assistant_"+o+"_"+i.userId,attrs:{layout:e.myLayout,user:i}})}),e._l(e.getOnlineUserList,function(i,o){return t("UserListItem",{key:"key_user_"+o+"_"+i.userId,ref:"userListItem",refInFor:!0,attrs:{layout:e.myLayout,user:i},on:{openForbiddenPanel:e.openForbiddenPanel,openKickOutPanel:e.openKickOutPanel}})}),e._l(e.retrieveRobotList(e.getRobotList,e.getRobotTotal),function(i,o){return t("UserListItem",{key:"key_robot_"+o+"_"+i.userId,attrs:{layout:e.myLayout,user:i,isRobot:!0}})}),e.showForbidden?t("ForbiddenPanel",{ref:"forbiddenPanel",class:("big-right"==e.myLayout?"float-bottom":"float-bottom-lite")+(e.isMobile?" float-bottom-mobile":""),on:{closeForbiddenPanel:e.closeForbiddenPanel}}):e._e(),e.showKickOut?t("KickOutPanel",{ref:"kickOutPanel",class:("big-right"==e.myLayout?"float-bottom":"float-bottom-lite")+(e.isMobile?" float-bottom-mobile":""),on:{closeKickOutPanel:e.closeKickOutPanel}}):e._e()],2)},c=[],m=(i(18111),i(7588),function(){var e=this,t=e._self._c;return t("div",{staticClass:"user-item",class:e.myLayout},[t("LevelIcon",{staticClass:"user-avatar",style:e.getLiveRoomStyle.userListAvatarStyle,attrs:{levelAvatar:e.userItem.avatar?e.userItem.avatar:e.userItem.levelAvatar}}),e.getLiveRoomStyle.extendSettings&&e.getLiveRoomStyle.extendSettings.showAccountOnly?t("div",{staticClass:"name"},[t("div",{style:e.getLiveRoomStyle.userListNameStyle},[e._v(e._s(e.userItem.userName))])]):e._e(),e.getLiveRoomStyle.extendSettings&&e.getLiveRoomStyle.extendSettings.showAccountOnly||!e.hasAdminPromission(e.getUserInfo,e.getLiveRoomInfo.isTeamAdmin,e.userItem)||e.isRobot?e._e():t("div",{staticClass:"name"},[t("div",{style:e.getLiveRoomStyle.userListNameStyle},[e._v(e._s(e.userItem.nickName))]),e.hasAdminPromission(e.getUserInfo,e.getLiveRoomInfo.isTeamAdmin,e.userItem)&&e.getUserInfo.userId!==e.userItem.userId||e.isRobot?t("div",{staticClass:"account",style:e.getLiveRoomStyle.userListAccountStyle},[e._v(e._s(e.userItem.userName))]):e._e()]),e.getLiveRoomStyle.extendSettings&&e.getLiveRoomStyle.extendSettings.showAccountOnly||e.hasAdminPromission(e.getUserInfo,e.getLiveRoomInfo.isTeamAdmin,e.userItem)&&!e.isRobot?e._e():t("div",{staticClass:"name"},[t("div",{style:e.getLiveRoomStyle.userListNameStyle},[e._v(e._s(e.userItem.nickName))])]),e.isRobot||3==e.userItem.type||4==e.userItem.type?e._e():t("div",{staticClass:"right-tools",class:e.isMobile?"mobile":""},[e.userItem.forbiddenChat&&e.hasAdminPromission(e.getUserInfo,e.getLiveRoomInfo.isTeamAdmin,e.userItem)&&e.getUserInfo.userId!==e.userItem.userId?t("svg-icon",{attrs:{"icon-class":"enable-chat"},on:{click:function(t){return t.stopPropagation(),e.forbiddenChat(e.userItem.userName,!1)}}}):e._e(),!e.userItem.forbiddenChat&&e.hasAdminPromission(e.getUserInfo,e.getLiveRoomInfo.isTeamAdmin,e.userItem)&&e.getUserInfo.userId!==e.userItem.userId?t("svg-icon",{attrs:{"icon-class":"disable-chat"},on:{click:function(t){return t.stopPropagation(),e.forbiddenChat(e.userItem.userName,!0)}}}):e._e(),e.hasAdminPromission(e.getUserInfo,e.getLiveRoomInfo.isTeamAdmin,e.userItem)&&e.getUserInfo.userId!==e.userItem.userId?t("svg-icon",{attrs:{"icon-class":"exist"},on:{click:function(t){return t.stopPropagation(),e.kickOut(e.userItem.userName)}}}):e._e()],1)],1)}),d=[],u=i(42692),h=i(42171);const g={name:"UserListItem",components:{LevelIcon:u.A},props:{user:{type:Object},isRobot:{type:Boolean,default:!1},layout:String},computed:{...(0,a.L8)(["getLoginInfo","getLiveRoomInfo","getUserInfo","isMobile","isGuest","getToken","getLiveRoomStyle","getForbiddenChat"])},watch:{user(e){this.userItem=e},layout(e){this.myLayout=e}},data(){return{myLayout:this.layout,userItem:this.user}},methods:{hasAdminPromission(e,t,i){return(0,h.t)(e,t,i)},forbiddenChat(e,t){this.$emit("openForbiddenPanel",e,t)},kickOut(e){this.$emit("openKickOutPanel",e)}}},p=g;var v=i(81656),f=(0,v.A)(p,m,d,!1,null,"aa8668e2",null);const b=f.exports;var y=function(){var e=this,t=e._self._c;return t("div",{staticClass:"more-container"},[t("el-form",{ref:"forbiddenForm",attrs:{size:"mini","label-position":"top",model:e.forbiddenForm}},[t("el-form-item",{attrs:{label:"禁言选项"}},[t("el-radio",{attrs:{label:"1"},model:{value:e.forbiddenForm.type,callback:function(t){e.$set(e.forbiddenForm,"type",t)},expression:"forbiddenForm.type"}},[e._v("按账号"+e._s(!1===e.forbiddenForm.forbidden?"解禁":""))]),!1!==e.forbiddenForm.forbidden?t("el-radio",{attrs:{label:"2"},model:{value:e.forbiddenForm.type,callback:function(t){e.$set(e.forbiddenForm,"type",t)},expression:"forbiddenForm.type"}},[e._v("按等级")]):e._e()],1),1==e.forbiddenForm.type?t("el-form-item",{attrs:{label:""}},[t("el-input",{attrs:{clearable:"",placeholder:"输入要禁言的账号"},model:{value:e.forbiddenForm.userName,callback:function(t){e.$set(e.forbiddenForm,"userName",t)},expression:"forbiddenForm.userName"}})],1):e._e(),2==e.forbiddenForm.type?t("el-form-item",{attrs:{label:""}},[t("el-select",{attrs:{multiple:"",clearable:"",placeholder:"请选择要禁言的等级"},model:{value:e.forbiddenForm.levelIds,callback:function(t){e.$set(e.forbiddenForm,"levelIds",t)},expression:"forbiddenForm.levelIds"}},e._l(e.levelList,function(e){return t("el-option",{key:"forbidden_user_"+e.id,attrs:{label:e.name,value:e.id}})}),1)],1):e._e(),1!=e.forbiddenForm.type&&2!=e.forbiddenForm.type||!1===e.forbiddenForm.forbidden?e._e():t("el-form-item",{attrs:{label:""}},[t("el-select",{attrs:{placeholder:"请选择禁言时长"},model:{value:e.forbiddenForm.duration,callback:function(t){e.$set(e.forbiddenForm,"duration",t)},expression:"forbiddenForm.duration"}},e._l([5,10,15,20,25,30,40,50,60,90,120,720,1440,2880,4320,5760,7200],function(e){return t("el-option",{key:"forbidden_duration_"+e,attrs:{label:e<=720?e+"分钟":e/1440+"天",value:e}})}),1)],1)],1),t("div",{staticClass:"more-toolbar",class:e.isMobile?"mobile":""},[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.forbidden()}}},[e._v(e._s(!1===e.forbiddenForm.forbidden?"解禁":"禁言"))]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.closePanel()}}},[e._v("关闭")])],1)],1)},L=[],S=i(93756);const k={name:"KickOutPanel",data(){return{levelList:[],userName:null,forbiddenForm:{type:null,userName:null,levelIds:[],duration:10}}},computed:{...(0,a.L8)(["getLiveRoomInfo","isMobile"])},mounted(){this.getLevelList()},methods:{prepare(e,t,i){this.forbiddenForm.type=e,this.forbiddenForm.userName=t,null!==i&&void 0!==i&&(this.forbiddenForm.forbidden=i)},getLevelList(){(0,S.vP)({}).then(e=>{e.data.records&&e.data.records.length>0&&(this.levelList=e.data.records)})},assignParams(e){let t=Object.assign({},e);return 1==t.type?delete t.levelIds:2==t.type&&delete t.userName,t.roomId=this.getLiveRoomInfo.id,t},forbidden(e,t){e&&(this.forbiddenForm.type="1",this.forbiddenForm.userName=e),null!==t&&void 0!==t&&(this.forbiddenForm.forbidden=t);let i=this.assignParams(this.forbiddenForm);i.blockType="forbidden",i.userName&&(i.userName=i.userName.toUpperCase()),(0,S._V)(i).then(e=>{this.$message.success((!1===t?"解禁":"禁言")+"指令已发出"),this.$emit("closeForbiddenPanel",!1)})},closePanel(){this.$emit("closeForbiddenPanel",!1)}}},C=k;var I=(0,v.A)(C,y,L,!1,null,"01c795f6",null);const R=I.exports;var w=function(){var e=this,t=e._self._c;return t("div",{staticClass:"more-container"},[t("el-form",{ref:"kickOutForm",attrs:{size:"mini","label-position":"top",model:e.kickOutForm}},[t("el-form-item",{attrs:{label:"踢出选项"}},[t("el-radio",{attrs:{label:"1"},model:{value:e.kickOutForm.type,callback:function(t){e.$set(e.kickOutForm,"type",t)},expression:"kickOutForm.type"}},[e._v("按账号")]),t("el-radio",{attrs:{label:"2"},model:{value:e.kickOutForm.type,callback:function(t){e.$set(e.kickOutForm,"type",t)},expression:"kickOutForm.type"}},[e._v("按等级")])],1),1==e.kickOutForm.type?t("el-form-item",{attrs:{label:""}},[t("el-input",{attrs:{clearable:"",placeholder:"输入要踢出的账号"},on:{change:function(t){e.kickOutForm.level=void 0}},model:{value:e.kickOutForm.userName,callback:function(t){e.$set(e.kickOutForm,"userName",t)},expression:"kickOutForm.userName"}})],1):e._e(),2==e.kickOutForm.type?t("el-form-item",{attrs:{label:""}},[t("el-select",{attrs:{multiple:"",clearable:"",placeholder:"请选择要踢出的等级"},on:{change:function(t){e.kickOutForm.account=void 0}},model:{value:e.kickOutForm.levelIds,callback:function(t){e.$set(e.kickOutForm,"levelIds",t)},expression:"kickOutForm.levelIds"}},e._l(e.levelList,function(e){return t("el-option",{key:"kickout_user_"+e.id,attrs:{label:e.name,value:e.id}})}),1)],1):e._e(),1==e.kickOutForm.type||2==e.kickOutForm.type?t("el-form-item",{attrs:{label:""}},[t("el-select",{attrs:{placeholder:"请选择踢出时长"},model:{value:e.kickOutForm.duration,callback:function(t){e.$set(e.kickOutForm,"duration",t)},expression:"kickOutForm.duration"}},e._l([5,10,15,20,25,30,40,50,60,90,120,720,1440,2880,4320,5760,7200],function(e){return t("el-option",{key:"kickout_duration_"+e,attrs:{label:e<=720?e+"分钟":e/1440+"天",value:e}})}),1)],1):e._e()],1),t("div",{staticClass:"more-toolbar",class:e.isMobile?"mobile":""},[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.kickOut()}}},[e._v("踢出")]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.closePanel()}}},[e._v("关闭")])],1)],1)},A=[];const _={name:"KickOutPanel",data(){return{levelList:[],userName:null,kickOutForm:{type:null,userName:null,levelIds:[],duration:10}}},computed:{...(0,a.L8)(["getLiveRoomInfo","isMobile"])},mounted(){this.getLevelList()},methods:{prepare(e,t){this.kickOutForm.type=e,this.kickOutForm.userName=t},getLevelList(){(0,S.vP)({}).then(e=>{e.data.records&&e.data.records.length>0&&(this.levelList=e.data.records)})},assignParams(e){let t=Object.assign({},e);return 1==t.type?delete t.levelIds:2==t.type&&delete t.userName,t.roomId=this.getLiveRoomInfo.id,t},kickOut(e){e&&(this.kickOutForm.type="1",this.kickOutForm.userName=e);let t=this.assignParams(this.kickOutForm);t.blockType="kickout",t.userName&&(t.userName=t.userName.toUpperCase()),(0,S._V)(t).then(e=>{this.$message.success("踢出指令已发出"),this.$emit("closeKickOutPanel",!1)})},closePanel(){this.$emit("closeKickOutPanel",!1)}}},x=_;var T=(0,v.A)(x,w,A,!1,null,"76bbe622",null);const P=T.exports;var F=i(57417),M=i(52112);const U={name:"UserList",props:{layout:String},components:{UserListItem:b,ForbiddenPanel:R,KickOutPanel:P},watch:{layout(e){this.myLayout=e}},computed:{...(0,a.L8)(["getUserInfo","isMobile","getOnlineLectureList","getOnlineAssistantList","getOnlineUserList","getRobotList","getRobotTotal","getLiveRoomInfo","getLiveRoomStyle"])},data(){return{myLayout:this.layout,queryParams:{pageNumber:1,pageSize:(0,h.t)(this.getUserInfo)?F.XK.admin:F.XK.user},showForbidden:!1,showKickOut:!1}},mounted(){this.initScrollEvent(),this.getOnlineList()},methods:{refreshUserList(){this.$forceUpdate(),this.$nextTick(()=>{this.$refs.userListItem&&this.$refs.userListItem.length>0&&this.$refs.userListItem.forEach(e=>{e.$forceUpdate()})})},getOnlineList(e){let t=(0,M.Go)(this.queryParams);e&&(t.pageNumber=e),t.roomId=this.getLiveRoomInfo.id,(0,S.uU)(t).then(e=>{this.$store.dispatch("setOnlineUserTotal",Number(e.data.total)),this.$store.dispatch("setOnlineUserList",e.data.records)})},retrieveRobotList(e,t){let i=[...e],o=t;return i.length>o&&i.splice(o,i.length-o),i},openForbiddenPanel(e,t){this.showForbidden=!0,this.showKickOut=!1,this.$nextTick(()=>{null!==t&&void 0!==t&&!1===t?this.$refs.forbiddenPanel.forbidden(e,t):this.$refs.forbiddenPanel.prepare("1",e,t)})},closeForbiddenPanel(){this.showForbidden=!1,this.$nextTick(()=>{this.refreshUserList()})},openKickOutPanel(e){this.showKickOut=!0,this.showForbidden=!1,this.$nextTick(()=>{this.$refs.kickOutPanel.prepare("1",e)})},closeKickOutPanel(){this.showKickOut=!1},initScrollEvent(){let e=this,t=e.$refs.userListContainer;if(t){let i=0;t.addEventListener("scroll",o=>{let s=t.scrollTop,a=t.scrollHeight,l=t.clientHeight,n="down";s<i&&(n="up"),i=s,(0,M.bj)(()=>{s+l+l>=a&&"down"==n?e.queryParams.pageNumber++:s<=l/3&&"up"==n&&(e.queryParams.pageNumber--,e.queryParams.pageNumber<1&&(e.queryParams.pageNumber=1)),e.getOnlineList()},1)})}}}},O=U;var N=(0,v.A)(O,r,c,!1,null,"087925f2",null);const $=N.exports;var E=function(){var e=this,t=e._self._c;return t("div",{ref:"userListContainer",staticClass:"search-result-container",style:e.getLiveRoomStyle.userSearchResultStyle},[e._l(e.userList,function(i,o){return t("UserListItem",{key:"key_search_user_"+o+"_"+i.nickName,ref:"userListItem",refInFor:!0,attrs:{layout:e.myLayout,user:i},on:{openForbiddenPanel:e.openForbiddenPanel,openKickOutPanel:e.openKickOutPanel}})}),e.showForbidden?t("ForbiddenPanel",{ref:"forbiddenPanel",class:"big-right"==e.myLayout?"float-bottom":"float-bottom-lite",on:{closeForbiddenPanel:e.closeForbiddenPanel}}):e._e(),e.showKickOut?t("KickOutPanel",{ref:"kickOutPanel",class:"big-right"==e.myLayout?"float-bottom":"float-bottom-lite",on:{closeKickOutPanel:e.closeKickOutPanel}}):e._e()],2)},B=[];const j={name:"UserSearchResult",props:{layout:String},components:{UserListItem:b,ForbiddenPanel:R,KickOutPanel:P},watch:{layout(e){this.myLayout=e}},computed:{...(0,a.L8)(["getLiveRoomInfo","getLiveRoomStyle"])},data(){return{myLayout:this.layout,searchParam:null,queryParam:{pageNumber:1,pageSize:F.XK.admin,roomId:null},userList:[],showForbidden:!1,showKickOut:!1}},mounted(){this.queryParam.roomId=this.getLiveRoomInfo.id,this.initScrollEvent()},methods:{refreshUserList(){this.$forceUpdate(),this.$nextTick(()=>{this.$refs.userListItem&&this.$refs.userListItem.length>0&&this.$refs.userListItem.forEach(e=>{e.$forceUpdate()})})},search(e){this.searchParam=e,this.queryParam.$or={nickName_$lk:e,userName_$lk:e},(0,S.uU)(this.queryParam).then(e=>{let t=e.data.records;this.userList.splice(0,this.userList.length,...t),this.$nextTick(()=>{this.refreshUserList()})})},openForbiddenPanel(e,t){this.showForbidden=!0,this.showKickOut=!1,this.$nextTick(()=>{null!==t&&void 0!==t&&!1===t?this.$refs.forbiddenPanel.forbidden(e,t):this.$refs.forbiddenPanel.prepare("1",e,t)})},closeForbiddenPanel(){this.showForbidden=!1,this.search(this.searchParam)},openKickOutPanel(e){this.showKickOut=!0,this.showForbidden=!1,this.$nextTick(()=>{this.$refs.kickOutPanel.prepare("1",e)})},closeKickOutPanel(){this.showKickOut=!1},initScrollEvent(){let e=this.$refs.userListContainer;if(e){let t=0;e.addEventListener("scroll",i=>{let o=e.scrollTop,s=(e.scrollHeight,e.clientHeight,"down");o<t&&(s="up"),t=o})}}}},D=j;var K=(0,v.A)(D,E,B,!1,null,"026b00c9",null);const z=K.exports;var V=function(){var e=this,t=e._self._c;return t("div",{staticClass:"msg-container",class:(e.isMobile?"mobile":"")+(e.getNoticeList.length?" has-notice":"")},[e.getNoticeList.length>0?t("div",{staticClass:"notice-content",class:(e.expendNotice?"big":"")+(e.isMobile?" mobile":"")},[t("div",{staticClass:"notice-tool-bar",class:e.isMobile?"mobile":"",on:{click:function(t){e.expendNotice=!e.expendNotice}}},[t("span",{staticClass:"notice-tool-bar-btn"},[t("svg-icon",{staticClass:"notice-icon",attrs:{"icon-class":"broadcast"}})],1)]),e.expendNotice?t("div",{staticClass:"notice-item-container"},e._l(e.getNoticeList,function(i,o){return t("ChatNoticeItem",{key:"msg_key_1_"+o,attrs:{msgItem:i},on:{btnClick:e.noticeBtnClick}})}),1):e._e()]):e._e(),t("div",{ref:"msgContainer",staticClass:"msg-content",class:(e.hasAdminPromission(e.getUserInfo)&&e.getLiveRoomTheme.richText?"richtext":"")+(e.isMobile?" mobile":"")+(e.showInputContainer?" input-visible":""),on:{click:function(t){t.stopPropagation(),e.showInputContainer=!1}}},e._l(e.getMsgList,function(i,o){return t("ChatMsgItem",{key:"msg_key_0_"+o,attrs:{msgItem:i},on:{btnClick:e.msgBtnClick}})}),1),e._l(e.getEmojiMsgList,function(i){return e.getLiveRoomStyle.extendSettings&&e.getLiveRoomStyle.extendSettings.floatEmoji?t("AnimateBottomToTop",{key:"animate_emoji_indx_"+i.data.id,ref:"emojiAnimatePanel_"+i.data.id,refInFor:!0,staticClass:"emoji-animate-panel",class:(e.hasAdminPromission(e.getUserInfo)&&e.getLiveRoomTheme.richText?"richtext":"")+(e.isMobile?" mobile":"")+(e.showInputContainer?" input-visible":""),attrs:{id:"emoji_animate_msg_item_"+i.data.id}},[t("div",{staticClass:"emoji-animate-item",style:e.getLiveRoomStyle.floatEmojiMsgStyle||{}},[e.getLiveRoomStyle.extendSettings&&e.getLiveRoomStyle.extendSettings.showAccountOnly?t("span",{staticClass:"emoji-animate-item-name",style:e.getLiveRoomStyle.floatEmojiMsgNameStyle||{}},[e._v(" "+e._s(i.data.userName)+" ")]):t("span",{staticClass:"emoji-animate-item-name",style:e.getLiveRoomStyle.floatEmojiMsgNameStyle||{}},[e._v(" "+e._s("lecturer"==i.data.asType&&i.data.lecturerName?i.data.lecturerName:i.data.nickName)+" ")]),t("span",{staticClass:"emoji-animate-item-label",style:e.getLiveRoomStyle.floatEmojiMsgLabelStyle||{}},[e._v("送上")]),e._l(e.animateEmojies(i.data.content),function(i,o){return t("span",{key:"emoji_item_indx_"+o,staticClass:"emoji-animate-item-emoji-panel"},[t("span",{staticClass:"emoji-animate-item-emoji",style:e.getLiveRoomStyle.floatEmojiMsgEmojiStyle||{},domProps:{innerHTML:e._s(i.content)}}),t("span",{staticClass:"iconfont-numbers icon-chenghao",style:e.getLiveRoomStyle.floatEmojiMsgMultiplyStyle||{}}),e._l(e.numToArr(i.count),function(i,o){return t("span",{key:"char_item_indx_"+o,staticClass:"icon-count iconfont-numbers",class:"icon-number-"+i.char,style:e.getLiveRoomStyle.floatEmojiMsgNumberStyle||{}})})],2)})],2)]):e._e()}),e._l(e.getExtMsgList,function(i,o){return t("AnimateLeftRightFadeInOut",{key:"msg1_key_0_"+o,ref:"extMsgAnimatePanel_"+i.data.id,refInFor:!0,attrs:{id:"extmsg_animate_msg_item_"+i.data.id}},[t("div",{staticClass:"ext-msg-item-panel",domProps:{innerHTML:e._s(e.parseEmoji(i.data.content,i))}})])}),t("div",{attrs:{id:"extPanel"}},[e.showForbidden?t("ForbiddenPanel",{ref:"forbiddenPanel",class:"ext-panel "+(e.hasAdminPromission(e.getUserInfo)&&e.getLiveRoomTheme.richText?"richtext":"")+(e.isMobile?" mobile":"")+(e.showInputContainer?" input-visible":""),on:{closeForbiddenPanel:e.closeForbiddenPanel}}):e._e(),e.showKickOut?t("KickOutPanel",{ref:"kickOutPanel",class:"ext-panel "+(e.hasAdminPromission(e.getUserInfo)&&e.getLiveRoomTheme.richText?"richtext":"")+(e.isMobile?" mobile":"")+(e.showInputContainer?" input-visible":""),on:{closeKickOutPanel:e.closeKickOutPanel}}):e._e(),e.showMore?t("AgentMsgPanel",{ref:"agentMsgPanel",class:"ext-panel "+(e.hasAdminPromission(e.getUserInfo)&&e.getLiveRoomTheme.richText?"richtext":"")+(e.isMobile?" mobile":"")+(e.showInputContainer?" input-visible":""),on:{closeAgentMsgPanel:e.closeAgentMsgPanel,sendBatchMsgs:e.sendBatchMsgs}}):e._e()],1),e.showEmoji?t("EmojiPanel",{ref:"emojiPanel",attrs:{formType:"sendEmoji",autoSend:"Gift"},on:{selectEmoji:e.selectEmoji,closeEmojiPanel:e.closeEmojiPanel}}):e._e(),e.showInputContainer?t("div",{staticClass:"input-container",class:(e.hasAdminPromission(e.getUserInfo)&&e.getLiveRoomTheme.richText?"richtext":"")+(e.isMobile?" mobile":""),attrs:{id:"input-container"}},[e.msgBtnObj.atUser?t("div",{staticClass:"at-container"},[t("span",[e._v("@"+e._s(e.msgBtnObj.atUser.data.userName))]),t("svg-icon",{staticClass:"close-btn",attrs:{"icon-class":"delete-circle"},on:{click:function(t){e.msgBtnObj.atUser=void 0}}})],1):e._e(),t("div",{staticClass:"toolbar"},[t("div",{staticClass:"tool-group",class:e.isMobile?"mobile":""},[t("svg-icon",{staticClass:"img-btn",style:e.isMobile&&e.getLiveRoomStyle.mobileBottomPanelBtnStyle||{},attrs:{"icon-class":"emoji"},on:{click:e.showEmojiPanel}}),e.getLiveRoomInfo.shortMsgs?t("el-dropdown",{attrs:{trigger:"click"},on:{command:e.sendQuickMsg}},[t("span",{staticClass:"el-dropdown-link"},[t("svg-icon",{staticClass:"img-btn",style:e.isMobile&&e.getLiveRoomStyle.mobileBottomPanelBtnStyle||{},attrs:{"icon-class":"短信"}})],1),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.quickMsgList(e.getLiveRoomInfo),function(i){return t("el-dropdown-item",{key:"qmsg_sel_item_"+i,staticClass:"quick-msg-item",attrs:{command:i},domProps:{innerHTML:e._s(e.replaceEmoji(i))}})}),1)],1):e._e()],1),e.hasAdminPromission(e.getUserInfo)?t("div",{staticClass:"tool-group",class:e.isMobile?"mobile":""},[t("el-checkbox",{staticClass:"checkbox",style:e.isMobile&&e.getLiveRoomStyle.mobileBottomPanelBtnStyle||{},attrs:{label:"checkbox"},model:{value:e.msgCategoryCheck,callback:function(t){e.msgCategoryCheck=t},expression:"msgCategoryCheck"}},[e._v("公告")])],1):e._e(),e.hasTeamAdmin(e.getUserInfo,e.getLiveRoomInfo.isTeamAdmin)||e.hasSendVirtualMsg(e.getUserInfo,e.getLiveRoomInfo.isVirtualMsg)?t("div",{staticClass:"tool-group",class:e.isMobile?"mobile":""},[e.hasTeamAdmin(e.getUserInfo,e.getLiveRoomInfo.isTeamAdmin)?t("svg-icon",{staticClass:"img-btn",style:e.isMobile&&e.getLiveRoomStyle.mobileBottomPanelBtnStyle||{},attrs:{"icon-class":"line-silenced"},on:{click:function(t){e.showForbidden=!e.showForbidden,e.showKickOut=!1,e.showMore=!1}}}):e._e(),e.hasTeamAdmin(e.getUserInfo,e.getLiveRoomInfo.isTeamAdmin)?t("svg-icon",{staticClass:"img-btn",style:e.isMobile&&e.getLiveRoomStyle.mobileBottomPanelBtnStyle||{},attrs:{"icon-class":"踢人"},on:{click:function(t){e.showKickOut=!e.showKickOut,e.showForbidden=!1,e.showMore=!1}}}):e._e(),e.hasSendVirtualMsg(e.getUserInfo,e.getLiveRoomInfo.isVirtualMsg)?t("svg-icon",{staticClass:"img-btn",style:e.isMobile&&e.getLiveRoomStyle.mobileBottomPanelBtnStyle||{},attrs:{"icon-class":"更多"},on:{click:function(t){e.showMore=!e.showMore,e.showForbidden=!1,e.showKickOut=!1}}}):e._e()],1):e._e()]),t("div",{staticClass:"input-panel",class:e.isMobile?"mobile":""},[e.hasAdminPromission(e.getUserInfo)&&e.getLiveRoomTheme.richText?t("CustomQuillEditor",{attrs:{layout:e.myLayout,uploadResultUrlProp:"data",editorOption:e.isMobile?e.editorMobileOption:e.editorMiniOption,extendButtons:e.editorExtBtns},on:{ctrlEntryPressed:e.sendMsg},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}):e._e(),e.hasAdminPromission(e.getUserInfo)&&e.getLiveRoomTheme.richText?e._e():t("div",{staticClass:"input-panel-user"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],ref:"inputTextarea",staticClass:"text-area",attrs:{rows:"4",placeholder:"说点什么"},domProps:{value:e.message},on:{keyup:function(t){return t.stopPropagation(),e.inputTextareaKeyEvent(t)},blur:e.inputTextareaBlur,input:function(t){t.target.composing||(e.message=t.target.value)}}}),e._v(" "),t("div",{staticClass:"btn",on:{click:function(t){return e.sendMsg(null,"TEXT")}}},[e._v("发送")])])],1)]):t("div",{staticClass:"input-container-bar",class:e.isMobile?"mobile":"",attrs:{id:"input-container-bar"}},[e.getLiveRoomInfo.allowSpeech||e.hasAdminPromission(e.getUserInfo)?t("input",{staticClass:"input-panel",class:(e.getLiveRoomInfo.shortMsgs?" short-msg":"")+(e.hasTeamAdmin(e.getUserInfo,e.getLiveRoomInfo.isTeamAdmin)?" team-admin":"")+(e.hasSendVirtualMsg(e.getUserInfo,e.getLiveRoomInfo.isVirtualMsg)?" virtual-msg":""),attrs:{placeholder:"说点什么"},on:{focus:function(t){e.showInputContainer=!e.showInputContainer}}}):t("input",{staticClass:"input-panel",class:"disable"+(e.getLiveRoomInfo.shortMsgs?" short-msg":"")+(e.hasTeamAdmin(e.getUserInfo,e.getLiveRoomInfo.isTeamAdmin)?" team-admin":"")+(e.hasSendVirtualMsg(e.getUserInfo,e.getLiveRoomInfo.isVirtualMsg)?" virtual-msg":""),attrs:{placeholder:"禁止发言",disabled:""}}),t("svg-icon",{staticClass:"img-btn",style:e.isMobile&&e.getLiveRoomStyle.mobileBottomPanelBtnStyle||{},attrs:{"icon-class":"emoji"},on:{click:e.showEmojiPanel}}),e.getLiveRoomInfo.shortMsgs?t("el-dropdown",{attrs:{trigger:"click"},on:{command:e.sendQuickMsg}},[t("span",{staticClass:"el-dropdown-link"},[t("svg-icon",{staticClass:"img-btn",style:e.isMobile&&e.getLiveRoomStyle.mobileBottomPanelBtnStyle||{},attrs:{"icon-class":"短信"}})],1),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.quickMsgList(e.getLiveRoomInfo),function(i){return t("el-dropdown-item",{key:"qmsg_sel_item_"+i,staticClass:"quick-msg-item",attrs:{command:i},domProps:{innerHTML:e._s(e.replaceEmoji(i))}})}),1)],1):e._e(),e.hasTeamAdmin(e.getUserInfo,e.getLiveRoomInfo.isTeamAdmin)?t("svg-icon",{staticClass:"img-btn",style:e.isMobile&&e.getLiveRoomStyle.mobileBottomPanelBtnStyle||{},attrs:{"icon-class":"line-silenced"},on:{click:function(t){e.showForbidden=!e.showForbidden,e.showKickOut=!1,e.showMore=!1}}}):e._e(),e.hasTeamAdmin(e.getUserInfo,e.getLiveRoomInfo.isTeamAdmin)?t("svg-icon",{staticClass:"img-btn",style:e.isMobile&&e.getLiveRoomStyle.mobileBottomPanelBtnStyle||{},attrs:{"icon-class":"踢人"},on:{click:function(t){e.showKickOut=!e.showKickOut,e.showForbidden=!1,e.showMore=!1}}}):e._e(),e.hasSendVirtualMsg(e.getUserInfo,e.getLiveRoomInfo.isVirtualMsg)?t("svg-icon",{staticClass:"img-btn",style:e.isMobile&&e.getLiveRoomStyle.mobileBottomPanelBtnStyle||{},attrs:{"icon-class":"更多"},on:{click:function(t){e.showMore=!e.showMore,e.showForbidden=!1,e.showKickOut=!1}}}):e._e()],1)],2)},q=[],H=(i(22489),i(61701),function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"quill-editor-container",class:e.myLayout+(e.isMobile?" mobile":"")},[t("div",{ref:"quillEditor",staticClass:"quill-editor"})])}),W=[],G=i(91574),Q=i.n(G),Y=i(42302),J=i(47864);const X=["SimSun","SimHei","Microsoft-YaHei","KaiTi","FangSong","serif",!1],Z=[!1,"12px","14px","16px","18px","22px","26px","28px","30px","36px","42px","48px","56px"],ee=[["bold","italic"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],[{color:[]},{background:[]}],[{font:X}],[{size:Z}],["image"],["video"]],te=[["bold","italic"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{align:[]}],[{color:[]},{background:[]}],[{size:Z}],["image"],["video"]],ie=[["bold","italic"],[{align:[]}],[{color:[]},{background:[]}],[{size:Z}],["image"],["video"]];function oe(e,t){const i=e.import("blots/block/embed");class o extends i{static create(e){if(e.tagName&&"video"==e.tagName.toLowerCase()){if(e.setAttribute("webkit-playsinline",!0),e.setAttribute("autoplay",!0),e.setAttribute("playsinline",!0),e.setAttribute("x5-playsinline",!0),e.url&&(!e.children||0==e.children.length)){let t=document.createElement("source");t.setAttribute("src",e.url),t.setAttribute("type","video/mp4");let i=document.createElement("source");i.setAttribute("src",e.url),i.setAttribute("type","video/ogg");let o=document.createElement("source");o.setAttribute("src",e.url),o.setAttribute("type","video/webm"),e.append(t),e.append(i),e.append(o)}return e}{let t=super.create();t.setAttribute("controls",e.controls),t.setAttribute("width",e.width),t.setAttribute("height",e.height),t.setAttribute("webkit-playsinline",!0),t.setAttribute("autoplay",!0),t.setAttribute("playsinline",!0),t.setAttribute("x5-playsinline",!0);let i=document.createElement("source");i.setAttribute("src",e.url),i.setAttribute("type","video/mp4");let o=document.createElement("source");o.setAttribute("src",e.url),o.setAttribute("type","video/ogg");let s=document.createElement("source");return s.setAttribute("src",e.url),s.setAttribute("type","video/webm"),t.append(i),t.append(o),t.append(s),t}}static value(e){return e}}o.blotName="simpleVideo",o.tagName="video",e.register(o);class s extends i{static create(e){if(e.tagName&&"img"==e.tagName.toLowerCase())return e;{let t=super.create();return t.setAttribute("src",e.url),t.setAttribute("width",e.width),t.setAttribute("height",e.height),t}}static value(e){return e}}s.blotName="simpleImage",s.tagName="img",e.register(s);let a=e.imports["formats/font"];a.whitelist=X,e.register(a,!0);let l=e.import("attributors/style/size");l.whitelist=Z,e.register(l,!0);let n=e.import("ui/icons");if(t&&Array.isArray(t)&&t.length>0){for(let e in t){let i=t[e];n[i.name]=i.icon}e.register(n,!0)}}var se=i(48827),ae=i.n(se),le=i(55200),ne=i.n(le),re=i(31052),ce=i(41153),me=i(13293);function de(e,t,i,o,s){let a=ce.A.getters.getLiveRoomInfo.ossSupplier;switch(a){case"txyun":return ge(e,t,i,o,s);default:return he(e,t,i,o,s)}}function ue(e){let t="";const i=e.lastIndexOf(".");i>-1&&(t=e.substring(i+1));const o=new Date;let s=o.getFullYear(),a=o.getMonth()+1,l=o.getDate(),n=s+"/"+(a<10?"0":"")+a+"/"+(l<10?"0":"")+l,r=new RegExp("."+t+"$"),c=n+"/"+e.replace(r,"_")+o.getTime()+"_"+Math.random()+"."+t;return c}function he(e,t,i,o,s){(0,S.Ne)(e).then(a=>{if(200==a.code){let l=a.data,n=new(ae())({region:"oss-"+me.o4.decode(l.regionId),accessKeyId:me.o4.decode(l.accessKey),accessKeySecret:me.o4.decode(l.accessSecret),bucket:me.o4.decode(l.bucket)}),r=ue(e);n.multipartUpload(r,t,{headers:{"cache-control":"no-cache"},progress:e=>{}}).then(e=>{const t=e.res.requestUrls[0];let o=t.indexOf("?");-1===o&&(o=void 0),i(t.substr(0,o),s)}).catch(e=>{o(e,s)})}}).catch(e=>{(0,re.Message)({message:"获取oss配置失败",type:"error",duration:3e3})})}function ge(e,t,i,o,s){let a=ue(e);(0,S.Ne)(a).then(e=>{if(200==e.code){let l=e.data;const{sessionToken:n,tmpSecretId:r,tmpSecretKey:c}=l.credentials,{startTime:m,expiredTime:d,regionId:u,bucket:h}=l,g=new(ne())({SecretId:r,SecretKey:c,SecurityToken:n,startTime:m,expiredTime:d});g.uploadFile({Bucket:h,Region:u,Key:a,Body:t,onProgress:function(e){}},function(e,t){if(e)o(e,s);else{let e=`http://${h}.cos.${u}.myqcloud.com/${a}`;i(e,s)}})}}).catch(e=>{(0,re.Message)({message:"获取oss配置失败",type:"error",duration:3e3})})}const pe={name:"CustomQuillEditor",model:{prop:"value",event:"change"},props:{value:String,vars:Object,layout:String,editorOption:{type:Object,required:!0},uploadUrl:{type:String},fileName:{type:String,default:"file"},uploadFun:{type:Function},uploadResultUrlProp:{type:String,default:"url"},extendButtons:{type:Array}},data(){return{loading:!1,myLayout:this.layout,myEditorOption:this.editorOption,editor:null,aliClient:void 0,showCrop:!1,tmpInputElm:null,extBtns:this.extendButtons,uuid:"",uploadType:"image"}},watch:{editorOption(e){this.editor&&this.editor.off("text-change"),this.myEditorOption=e,this.myEditorOption.theme="snow";let t=this.$el.children,i=t[0];i.remove(),this.updateTools(),this.editor&&(this.editor.root.removeEventListener("keydown",this.keydownEvent),this.editor.off("text-change")),this.editor=new(Q())(this.$refs.quillEditor,this.myEditorOption),this.initQuillEditor()},value(e){this.editor&&this.editor.container&&this.editor.container.children&&this.editor.container.children[0]&&this.editor.container.children[0].innerHTML!=e&&(e?this.editor.clipboard.dangerouslyPasteHTML(e):this.editor.setContents([{insert:"\n"}]),this.editor.update(),this.editor.focus())},layout(e){this.myLayout=e}},computed:{...(0,a.L8)(["isMobile"])},mounted(){oe(Q(),this.extBtns),this.uuid=(0,Y.A)(),this.myEditorOption.theme="snow",this.updateTools(),this.editor=new(Q())(this.$refs.quillEditor,this.myEditorOption),this.$nextTick(()=>{this.initQuillEditor()})},methods:{updateTools(){let e=this;if(e.extBtns&&e.extBtns.length>0){let t=this.myEditorOption.modules.toolbar.container,i=this.myEditorOption.modules.toolbar.handlers;i||(this.myEditorOption.modules.toolbar.handlers={},i=this.myEditorOption.modules.toolbar.handlers);let o=[];for(let a in e.extBtns){let t=e.extBtns[a];o.push(t.name),i[t.name]=(0,M.G4)(e.vars,t.onclick)}o.isExt=!0;let s=t[t.length-1];s&&s.length>0&&s.isExt?s.splice(0,s.length,...o):t.push(o)}},keydownEvent(e){let t=this;this.editor;1!=e.ctrlKey&&1!=e.altKey||13!=e.keyCode||t.$emit("ctrlEntryPressed",t.vars)},setDefaultColor(){let e=this.editor;e&&(e.update(),e.focus(),e.hasFocus()||self.value||(e.root.innerHTML="<p><br></p>",e.setSelection(0,0)))},normalizeContent(e){if(!e)return"";const t=[/^<p><br><\/p>\s*$/i,/^<div><br><\/div>\s*$/i,/^<p>\s*<\/p>\s*$/i,/^\s*$/];return t.some(t=>t.test(e))?"":e},initQuillEditor(){let e=this,t=this.editor;if(t){t.enable(!0),t.on("text-change",function(i,o,s){let a=t.container.children[0].innerHTML,l=e.normalizeContent(a);e.$emit("change",l)}),t.root.addEventListener("keydown",e.keydownEvent);let i=e.value||"";if(i!=e.value){let t=e.normalizeContent(i);e.$emit("change",t)}i?t.clipboard.dangerouslyPasteHTML(i):t.setContents([{insert:"\n"}]),t.root.addEventListener("paste",t=>{const i=t.clipboardData;if(!i)return;const o=i.types.length&&i.types.join("").includes("Files")&&i.files&&i.files.length>0;if(o){let t=i.files,o=0;if(t&&t.length>0){const i=s=>{let a=t[s];/^image/gi.test(a.type)?(e.uploadType="image",e.doUpload(a,()=>{o++,o<t.length&&i(o)})):/^video/gi.test(a.type)?(e.uploadType="video",e.doUpload(a,()=>{o++,o<t.length&&i(o)})):(o++,o<t.length&&i(o))};i(o)}}}),t.update(),t.focus();const o=t=>{if(!t)return;let i=document.getElementsByClassName("ql-"+t)[0],o=i.parentElement;o.style.position="relative";let s=document.createElement("input");s.type="file",s.id="ql_"+t+"_"+e.uuid,s.accept="video"==t?"video/*":"image"==t?"image/*":"*/*",s.style.position="absolute",s.style.left="0",s.style.top="0",s.style.width="100%",s.style.height="100%",s.style.overflow="hidden",s.style.opacity=0,s.onchange=e.onFileChange,s.data={type:t},o.appendChild(s)};setTimeout(()=>{o("image"),o("video")},300)}},onFileChange(e){var t=e.target;0!=t.files.length&&(this.editor.focus(),this.uploadType=t.data.type,this.doUpload(t.files[0]))},doUpload(e,t){if(this.handleBeforeUpload(e)){let i=(0,J.serialize)(this.vars||{});i.append(this.fileName,e);let o=e.name.lastIndexOf("."),s=e.name.substring(o),a=(new Date).getTime()+s;this.loading=!0,this.multipartUpload(a,e,t)}},handleBeforeUpload(e){if(this.fileSize){const t=e.size/1024/1024<this.fileSize;if(!t)return this.$message.error(`上传文件大小不能超过 ${this.fileSize} MB!`),!1}return!0},onUploadSuccess:function(e,t){let i=this;this.loading=!1,this.editor.focus(),"image"==i.uploadType?i.editor.insertEmbed(this.editor.getSelection().index,"simpleImage",{url:e,width:"100%",height:"100%"}):i.editor.insertEmbed(this.editor.getSelection().index,"simpleVideo",{url:e,controls:"controls",width:"100%",height:"100%"});let o=document.getElementById("ql_image_"+this.uuid),s=document.getElementById("ql_video_"+this.uuid);o&&(o.value=null),s&&(s.value=null),t&&t instanceof Function&&t(e)},onUploadError:function(e,t){console.error(e),this.loading=!1;let i=document.getElementById("ql_image_"+this.uuid),o=document.getElementById("ql_video_"+this.uuid);i&&(i.value=null),o&&(o.value=null),this.$message({message:"上传失败！",type:"warning"}),t&&t instanceof Function&&t({status:!1,err:e})},multipartUpload(e,t,i){const o=this.onUploadSuccess.bind(this),s=this.onUploadError.bind(this);de(e,t,o,s,i)}}},ve=pe;var fe=(0,v.A)(ve,H,W,!1,null,null,null);const be=fe.exports;var ye=function(){var e=this,t=e._self._c;return t("div",{staticClass:"chat-panel",class:e.isMobile?"mobile":"pc",style:e.isMobile?e.getLiveRoomStyle.chatMobileStyle:e.getLiveRoomStyle.chatStyle},[t("div",{staticClass:"chat-box"},[t("div",{staticClass:"chat-msg"},[t("span",{staticClass:"user-avatar",class:e.isMobile?"mobile":"",style:e.getStyle("user-avatar")},[t("img",{style:e.getStyle("user-avatar-img"),attrs:{src:e.msgItem.data.avatar?e.msgItem.data.avatar:e.msgItem.data.levelAvatar}})]),e.getLiveRoomStyle.extendSettings&&e.getLiveRoomStyle.extendSettings.showAccountOnly?t("span",{staticClass:"chat-name",class:e.isMobile?"mobile":"",style:e.getStyle("chat-name")},[e._v(" "+e._s(e.msgItem.data.userName)+" ")]):t("span",{staticClass:"chat-name",style:e.getStyle("chat-name")},[e._v(" "+e._s("lecturer"==e.msgItem.data.asType&&e.msgItem.data.lecturerName?e.msgItem.data.lecturerName:e.msgItem.data.nickName?e.msgItem.data.nickName:"")+" "+e._s(e.hasAdminPromission(e.getUserInfo,e.getLiveRoomInfo.isTeamAdmin,e.msgItem.data)&&e.msgItem.data.userName?":"+(e.msgItem.data.asType?e.msgItem.data.realUserName:e.msgItem.data.userName):"")+" ")]),t("span",{staticClass:"chat-content",class:e.msgItem.data&&e.msgItem.data.msgType&&"RICH"==e.msgItem.data.msgType?"ql-editor":"",style:e.getStyle("chat-content"),domProps:{innerHTML:e._s(e.replaceEmoji(e.msgItem.data.content))}}),t("span",{staticClass:"chat-time",style:e.getStyle("chat-time")},[e._v(e._s(e.formatMsgTime(e.msgItem)))]),(e.showBtn(e.msgItem)||e.getUserInfo.userId==e.msgItem.data.userId&&e.getUserInfo.type>=2)&&"LIVE_USER_POINTS"!=e.msgItem.msgType?t("span",[e.showBtn(e.msgItem)&&e.getUserInfo.userId!=e.msgItem.data.userId?t("svg-icon",{staticClass:"chat-btn",style:e.getStyle("chat-btn"),attrs:{"icon-class":"at"},on:{click:function(t){return e.onBtnClick("atUser")}}}):e._e(),e.showBtn(e.msgItem)||e.getUserInfo.userId==e.msgItem.data.userId&&e.getUserInfo.type>=2?t("svg-icon",{staticClass:"chat-btn",style:e.getStyle("chat-btn"),attrs:{"icon-class":"delete"},on:{click:function(t){return e.onBtnClick("delMsg")}}}):e._e(),e.showBtn(e.msgItem)&&e.getUserInfo.userId!=e.msgItem.data.userId?t("svg-icon",{staticClass:"chat-btn",style:e.getStyle("chat-btn"),attrs:{"icon-class":"disable-chat"},on:{click:function(t){return e.onBtnClick("forbidden")}}}):e._e(),e.showBtn(e.msgItem)&&e.getUserInfo.userId!=e.msgItem.data.userId?t("svg-icon",{staticClass:"chat-btn",style:e.getStyle("chat-btn"),attrs:{"icon-class":"exist"},on:{click:function(t){return e.onBtnClick("kickOut")}}}):e._e()],1):e._e()]),e.msgItem.data.atNickName?t("div",{staticClass:"chat-msg-at",style:e.isMobile?e.getLiveRoomStyle.chatMobileAtStyle:e.getLiveRoomStyle.chatAtStyle},[t("span",{staticClass:"chat-msg-first"},[e._v("@")]),t("span",[e._v(e._s(e.msgItem.data.atNickName)+"：")])]):e._e()])])},Le=[],Se=i(95093),ke=i.n(Se),Ce=i(19654);const Ie={name:"ChatMsgItem",components:{},props:{msgItem:Object},computed:{...(0,a.L8)(["getUserInfo","getLiveRoomInfo","getLiveRoomStyle","isMobile"])},data(){return{moment:ke()}},methods:{formatMsgTime(e){let t;if(e.data&&e.data.createdTime)try{t=ke()(e.data.createdTime,"YYYY-MM-DD HH:mm:ss").format("HH:mm"),"Invalid date"==t&&(t=ke()(new Date,"YYYY-MM-DD HH:mm:ss").format("HH:mm"))}catch(i){t=ke()(new Date,"YYYY-MM-DD HH:mm:ss").format("HH:mm")}else t=ke()(new Date,"YYYY-MM-DD HH:mm:ss").format("HH:mm");return t},getStyle(e){let t={};switch(e){case"user-avatar":t=this.isMobile?this.getLiveRoomStyle.chatMobileAvatarStyle:this.getLiveRoomStyle.chatAvatarStyle||{};break;case"user-avatar-img":t=this.isMobile?this.getLiveRoomStyle.chatMobileAvatarImgStyle:this.getLiveRoomStyle.chatAvatarImgStyle||{};break;case"chat-name":t=this.isMobile?this.getLiveRoomStyle.chatMobileNameStyle:this.getLiveRoomStyle.chatNameStyle||{};break;case"chat-content":t=this.isMobile?this.getLiveRoomStyle.msgMobileStyle:this.getLiveRoomStyle.msgStyle||{};break;case"chat-time":t=this.isMobile?this.getLiveRoomStyle.chatMobileTimeStyle:this.getLiveRoomStyle.chatTimeStyle||{};break;case"chat-btn":t=this.isMobile?this.getLiveRoomStyle.chatMobileBtnStyle:this.getLiveRoomStyle.chatBtnStyle||{};break}for(let i in t)t[i]&&(t[i]+"").trim().length||delete t[i];return t},replaceEmoji(e){let t=/\s*<span\s+style\s*=\s*["']\s*font\-size\s*\:\s*\d+px\s*;\s*line\-height\s*\:\s*\d+px\s*;\s*["']\s*>\s*/gi;Ce.A.hasEmoji(e)&&(e=e.replace(t,"").replace(/\s*<\s*\/\s*span\s*>\s*/gi,""));let i=this.isMobile?"chatMobileEmojiStyle":"chatEmojiStyle",o=this.getLiveRoomStyle[i]&&this.getLiveRoomStyle[i].width||"26px",s=this.getLiveRoomStyle[i]&&this.getLiveRoomStyle[i].height||"26px";return Ce.A.replaceEmoji(e,"<img style='width:"+o+";height:"+s+";display: inline-block;vertical-align: middle;' src='","' alt='emoji'/>",this.getLiveRoomStyle.extendSettings&&this.getLiveRoomStyle.extendSettings.animateEmoji||!1)},changeStyle(e,t){return e&&e.borderColor&&(e[t]=e.borderColor,delete e.borderColor),e&&delete e.backgroundColor,e},hasAdminPromission(e,t,i){return(0,h.t)(e,t,i)},onBtnClick(e){this.$emit("btnClick",e,this.msgItem)},showBtn(e){return this.hasAdminPromission(this.getUserInfo,this.getLiveRoomInfo.isTeamAdmin,e.data)}}},Re=Ie;var we=(0,v.A)(Re,ye,Le,!1,null,"67b15b83",null);const Ae=we.exports;var _e=function(){var e=this,t=e._self._c;return t("div",{staticClass:"chat-notice-panel"},[t("div",{staticClass:"chat-notice-box",style:e.getLiveRoomStyle.chatStyle},[t("div",{staticClass:"chat-notice-content ql-snow",class:e.isMobile?"mobile":""},[t("div",{staticClass:"ql-editor",domProps:{innerHTML:e._s(e.msgItem.data.noticeContent)}})]),e.showBtn(e.msgItem)||e.getUserInfo.userId==e.msgItem.data.userId?t("div",{staticClass:"chat-btn-bar",class:e.isMobile?"mobile":""},[e.showBtn(e.msgItem)||e.getUserInfo.userId==e.msgItem.data.userId?t("svg-icon",{staticClass:"chat-btn",attrs:{"icon-class":"delete"},on:{click:function(t){return e.onBtnClick("delMsg")}}}):e._e()],1):e._e()])])},xe=[];const Te={name:"ChatNoticeItem",components:{},props:{msgItem:Object},computed:{...(0,a.L8)(["getUserInfo","getLiveRoomInfo","getLiveRoomStyle","isMobile"])},data(){return{}},methods:{hasAdminPromission(e,t,i){return(0,h.t)(e,t,i)},onBtnClick(e){this.$emit("btnClick",e,this.msgItem)},showBtn(e){return this.hasAdminPromission(this.getUserInfo,this.getLiveRoomInfo.isTeamAdmin,e.data)&&this.getUserInfo.userId!==e.data.userId}}},Pe=Te;var Fe=(0,v.A)(Pe,_e,xe,!1,null,"a93f3f2e",null);const Me=Fe.exports;var Ue=i(31428),Oe=i(40752),Ne=i(10248),$e=function(){var e=this,t=e._self._c;return t("div",{staticClass:"more-container"},[t("el-form",{ref:"agentMsgForm",staticClass:"double-items",attrs:{size:"mini","label-position":"top",model:e.agentMsgForm}},[t("el-form-item",{staticClass:"full-width",attrs:{label:"马甲发言"}},[t("el-radio",{attrs:{label:"1"},model:{value:e.agentMsgForm.type,callback:function(t){e.$set(e.agentMsgForm,"type",t)},expression:"agentMsgForm.type"}},[e._v("机器人")]),t("el-radio",{attrs:{label:"2"},model:{value:e.agentMsgForm.type,callback:function(t){e.$set(e.agentMsgForm,"type",t)},expression:"agentMsgForm.type"}},[e._v("嘉宾")]),t("el-radio",{attrs:{label:"3"},model:{value:e.agentMsgForm.type,callback:function(t){e.$set(e.agentMsgForm,"type",t)},expression:"agentMsgForm.type"}},[e._v("批量机器人")])],1),1==e.agentMsgForm.type?t("el-form-item",{staticClass:"full-width",attrs:{label:""}},[t("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择机器人"},on:{change:function(t){e.agentMsgForm.lecturer=void 0,e.agentMsgForm.batchCount1=void 0,e.agentMsgForm.batchMsg1=void 0,e.agentMsgForm.batchCount2=void 0,e.agentMsgForm.batchMsg2=void 0}},model:{value:e.agentMsgForm.robotUserId,callback:function(t){e.$set(e.agentMsgForm,"robotUserId",t)},expression:"agentMsgForm.robotUserId"}},e._l(e.getRobotList,function(e){return t("el-option",{key:"robot_"+e.userId,attrs:{label:e.userName,value:e.userId}})}),1)],1):e._e(),2==e.agentMsgForm.type?t("el-form-item",{staticClass:"full-width",attrs:{label:""}},[t("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择嘉宾"},on:{change:function(t){e.agentMsgForm.robot=void 0,e.agentMsgForm.batchCount1=void 0,e.agentMsgForm.batchMsg1=void 0,e.agentMsgForm.batchCount2=void 0,e.agentMsgForm.batchMsg2=void 0}},model:{value:e.agentMsgForm.lecturerUserId,callback:function(t){e.$set(e.agentMsgForm,"lecturerUserId",t)},expression:"agentMsgForm.lecturerUserId"}},e._l(e.lecturerList,function(e){return t("el-option",{key:"lecturer_"+e.userId,attrs:{label:e.lecturerName,value:e.userId}})}),1)],1):e._e(),1==e.agentMsgForm.type||2==e.agentMsgForm.type?t("el-form-item",{staticClass:"full-width"},[t("el-input",{staticClass:"full-width",attrs:{clearable:"",placeholder:"发言内容"},model:{value:e.agentMsgForm.message,callback:function(t){e.$set(e.agentMsgForm,"message",t)},expression:"agentMsgForm.message"}}),t("el-button",{on:{click:function(t){return e.showEmojiPanel("agentMsgForm","message")}}},[e._v("表情")])],1):e._e(),3==e.agentMsgForm.type?t("el-form-item",{staticClass:"three-item-panel",attrs:{label:""}},[t("el-input",{staticClass:"input-number",attrs:{type:"number",min:"0",clearable:"",placeholder:"数量"},on:{change:e.batchCountCheck},model:{value:e.agentMsgForm.batchCount1,callback:function(t){e.$set(e.agentMsgForm,"batchCount1",t)},expression:"agentMsgForm.batchCount1"}}),t("el-input",{attrs:{clearable:"",placeholder:"发言内容"},model:{value:e.agentMsgForm.batchMsg1,callback:function(t){e.$set(e.agentMsgForm,"batchMsg1",t)},expression:"agentMsgForm.batchMsg1"}}),t("el-button",{on:{click:function(t){return e.showEmojiPanel("agentMsgForm","batchMsg1")}}},[e._v("表情")])],1):e._e(),3==e.agentMsgForm.type?t("el-form-item",{staticClass:"three-item-panel",attrs:{label:""}},[t("el-input",{staticClass:"input-number",attrs:{type:"number",min:"0",clearable:"",placeholder:"数量"},on:{change:e.batchCountCheck},model:{value:e.agentMsgForm.batchCount2,callback:function(t){e.$set(e.agentMsgForm,"batchCount2",t)},expression:"agentMsgForm.batchCount2"}}),t("el-input",{attrs:{clearable:"",placeholder:"发言内容"},model:{value:e.agentMsgForm.batchMsg2,callback:function(t){e.$set(e.agentMsgForm,"batchMsg2",t)},expression:"agentMsgForm.batchMsg2"}}),t("el-button",{on:{click:function(t){return e.showEmojiPanel("agentMsgForm","batchMsg2")}}},[e._v("表情")])],1):e._e()],1),t("div",{staticClass:"more-toolbar",class:e.isMobile?"mobile":""},[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.sendAgentMsg()}}},[e._v("发送")]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.closePanel()}}},[e._v("关闭")])],1),e.showEmoji?t("EmojiPanel",{ref:"emojiPanel",attrs:{"emoji-type":e.emojiType,autoSend:"Gift","form-type":e.formType},on:{selectEmoji:e.selectEmoji,closeEmojiPanel:e.closeEmojiPanel}}):e._e()],1)},Ee=[],Be=function(){var e=this,t=e._self._c;return t("div",{staticClass:"emoji-main-container",class:e.isMobile||e.isMulti?"fill":""},[t("EmojiPicker",{attrs:{autoSend:e.autoSend,fill:"",padding:""},on:{sendEmoji:e.selectEmoji,closeEmojiPanel:e.closeEmojiPanel}})],1)},je=[],De=function(){var e=this,t=e._self._c;return t("div",{staticClass:"emoji-container",class:(e.containerClass||"")+(e.fill?" fill":"")+(e.padding?" padding":"")+(e.isMobile?" mobile":"")},[t("div",{staticClass:"selected-panel"},[t("div",{staticClass:"close-btn",on:{click:e.close}},[t("svg-icon",{staticClass:"icon",attrs:{"icon-class":"close"}})],1),t("input",{directives:[{name:"model",rawName:"v-model",value:e.curValue,expression:"curValue"}],ref:"curInput",staticClass:"value",class:e.isMobile?"mobile":"",domProps:{value:e.curValue},on:{change:e.updateValue,click:function(t){return e.holdSelectPosition(t,0)},select:function(t){return e.holdSelectPosition(t,0)},focus:function(t){return e.holdSelectPosition(t,0)},keyup:function(t){return e.keyUp(t,0)},blur:function(t){return e.keepSelect(t,0)},input:function(t){t.target.composing||(e.curValue=t.target.value)}}}),t("div",{staticClass:"send-btn",on:{click:e.send}},[t("svg-icon",{staticClass:"icon",attrs:{"icon-class":"send"}})],1)]),t("div",{staticClass:"emoji-group-panel",class:e.isMobile?"mobile":""},e._l(e.groups,function(i,o){return t("div",{key:"emoji_group_"+o,staticClass:"emoji-group-item",class:(e.curGroup==i?"active":"")+(e.isMobile?" mobile":""),domProps:{innerHTML:e._s(e.getGroupIcon(i))},on:{click:function(t){return e.selectGroup(i)}}})}),0),e.curGroup?t("div",{staticClass:"emoji-select-panel",class:("Gift"==e.curGroup?"group":"")+(e.isMobile?" mobile":""),attrs:{id:"emoji-selected-group"},on:{scroll:function(t){return t.stopPropagation(),e.delayCheckVisible()}}},["Gift"==e.curGroup?[t("div",{staticClass:"emoji-item-group",class:e.isMobile?"mobile":"",attrs:{id:"emoji-git-group"},on:{scroll:function(t){return t.stopPropagation(),e.delayCheckVisible()}}},e._l(e.getEmojiList(),function(i,o){return t("div",{key:"emoji_item_"+o,staticClass:"emoji-item",class:e.isMobile?"mobile":"",attrs:{id:"emoji-item-gift-"+o},on:{click:function(t){return e.selectEmoji(i.emoji)}}},[e.visibleList.indexOf("emoji-item-gift-"+o)>=0?t("span",{domProps:{innerHTML:e._s(e.replaceEmoji(i.emoji))}}):t("span",[e._v(e._s(i.emoji))])])}),0)]:e._l(e.getEmojiList(),function(i,o){return t("div",{key:"emoji_item_"+o,staticClass:"emoji-item",attrs:{id:"emoji-item-"+o},on:{click:function(t){return e.selectEmoji(i.emoji)}}},[e.visibleList.indexOf("emoji-item-"+o)>=0?t("span",{staticClass:"emoji-item",domProps:{innerHTML:e._s(e.replaceEmoji(i.emoji))}}):t("span",{staticClass:"emoji-item"},[e._v(e._s(i.emoji))])])})],2):e._e()])},Ke=[];const ze={name:"EmojiPicker",props:{value:{type:String,default:""},visible:Boolean,containerClass:String,fill:Boolean,padding:Boolean,autoSend:{type:String}},emits:["update:value","update:visible","change","blur","sendEmoji"],data(){return{curValue:"",groups:[],icons:[],list:[],curGroup:"",dark:this.theme||"",inputPosStart:0,inputPosEnd:0,visibleList:[],giftList:[]}},computed:{...(0,a.L8)(["getLiveRoomStyle","isMobile"])},watch:{curGroup(e,t){e&&e!=t&&this.delayCheckVisible()}},created(){this.groups=Ce.A.emojiGroup,this.icons=Ce.A.groupIcons,this.list=Ce.A.emojiList},mounted(){this.curGroup="Gift",this.inputPosStart=this.curValue.length,this.inputPosEnd=this.curValue.length;let e=this;if(e.getLiveRoomStyle.extendSettings&&e.getLiveRoomStyle.extendSettings.emojiGift){e.giftList.splice(0,e.giftList.length);let t=e.getLiveRoomStyle.extendSettings.emojiGift.split(/[,\s\t\r\n;，；、]+/);t.forEach(t=>{e.giftList.push({emoji:t})})}},methods:{delayCheckVisible(){let e=this;e.visibleList.splice(0,e.visibleList.length),e.$nextTick(()=>{setTimeout(()=>{let t=document.getElementById("emoji-selected-group"),i=t.childNodes;if(i&&i.length){"emoji-git-group"==i[0].id&&(t=i[0],i=t.childNodes);let o=t.id;i.forEach(t=>{let i=t.id;e.checkVisible(i,o)&&e.visibleList.push(i)})}},10)})},replaceEmoji(e){return Ce.A.replaceEmoji(e,"<img style='width:26px;height:26px;display: inline-block;vertical-align: middle;' src='","' alt='emoji'/>",this.getLiveRoomStyle.extendSettings&&this.getLiveRoomStyle.extendSettings.animateEmoji||!1)},holdSelectPosition(e,t=0){let i=e.target;this.inputPosStart=i.selectionStart+t,this.inputPosEnd=i.selectionEnd+t,i.focus()},keyUp(e,t=0){this.holdSelectPosition(e,t)},keepSelect(e,t=0){let i=e.target;this.holdSelectPosition(e,t),i.setSelectionRange(this.inputPosStart,this.inputPosEnd)},getGroupIcon(e){return this.icons[e]},getEmojiList(){if("History"!=this.curGroup)return"Gift"==this.curGroup&&this.giftList&&this.giftList.length?this.giftList:this.list[this.curGroup];{let e=Ce.A.emojiCache.getCaches();return e||(e=[]),e}},selectGroup(e){this.curGroup=e},updateValue(e){let t=e.target;t.setSelectionRange(this.inputPosStart,this.inputPosEnd)},selectEmoji(e){"Gift"!=this.curGroup&&Ce.A.emojiCache.cache(e);let t=this.curValue.substring(0,this.inputPosStart),i=this.curValue.substring(this.inputPosEnd,this.curValue.length),o=t+e+i;this.inputPosStart=this.inputPosEnd=this.inputPosStart+e.length,this.curValue=o;let s=this.$refs.curInput;this.autoSend&&"Gift"==this.autoSend&&"Gift"==this.curGroup||this.autoSend&&"All"==this.autoSend?this.send():this.$nextTick(()=>{s.setSelectionRange(this.inputPosStart,this.inputPosEnd)})},close(){this.$emit("closeEmojiPanel",!1)},send(){this.$emit("sendEmoji",this.curValue)}}},Ve=ze;var qe=(0,v.A)(Ve,De,Ke,!1,null,"032847dc",null);const He=qe.exports,We={name:"EmojiPanel",components:{EmojiPicker:He},props:{emojiType:{type:String,default:""},formType:{type:String,default:""},autoSend:{type:String}},data(){return{}},emits:["closeEmojiPanel","selectEmoji"],computed:{...(0,a.L8)(["isMobile","isMulti"])},methods:{closeEmojiPanel(){this.$emit("closeEmojiPanel",!0)},selectEmoji(e){this.$emit("selectEmoji",this.formType,this.emojiType,e)}}},Ge=We;var Qe=(0,v.A)(Ge,Be,je,!1,null,"38767b85",null);const Ye=Qe.exports,Je={name:"AgentMsgPanel",components:{EmojiPanel:Ye},data(){return{lecturerList:[],agentMsgForm:{type:null,robotUserId:null,lecturerUserId:null,message:null,batchCount1:null,batchMsg1:null,batchCount2:null,batchMsg2:null},emojiType:"",emojiCount:1,formType:"",showEmoji:!1}},computed:{...(0,a.L8)(["getLiveRoomInfo","getRobotList","getToken","getClientInfo","getUserInfo","isMobile"])},mounted(){this.getLecturerList()},methods:{getLecturerList(){(0,S.W4)(this.getLiveRoomInfo.id).then(e=>{this.lecturerList=e.data}).catch(e=>{console.log(e)})},showEmojiPanel(e,t){this.formType=e,this.emojiType=t,this.showEmoji=!0},closeEmojiPanel(){this.showEmoji=!1},selectEmoji(e,t,i){if(e&&t)this.$set(this[e],t,i);else if(e&&"sendEmoji"==e){let e=Ce.A.wrapEmoji(i.trim(),"<span style='font-size:28px;line-height:30px;'>","</span>");this.sendMsg(e)}this.showEmoji=!1},batchCountCheck(){let e=Number(this.agentMsgForm.batchCount1)||0,t=Number(this.agentMsgForm.batchCount2)||0;e+t>this.getRobotList.length&&this.$message.warning("批量发言总数量不能超过机器人总数"+this.getRobotList.length)},sendAgentMsg(){if(1==this.agentMsgForm.type){if(!(this.agentMsgForm.robotUserId&&this.getItem(this.getRobotList,this.agentMsgForm.robotUserId)&&this.agentMsgForm.message))return void this.$message.warning("机器人或发言内容不能为空");{let e=Ce.A.wrapEmoji(this.agentMsgForm.message.trim(),"<span style='font-size:28px;line-height:30px;'>","</span>"),t=(0,Oe.RH)(F.iC.LIVE_MSG,"RICH",e,this.getItem(this.getRobotList,this.agentMsgForm.robotUserId),{},this.getLiveRoomInfo,this.getClientInfo,this.getUserInfo,"robot");(0,Ue.g7)(t,this.getLiveRoomInfo.id)}}else if(2==this.agentMsgForm.type){if(!(this.agentMsgForm.lecturerUserId&&this.getItem(this.lecturerList,this.agentMsgForm.lecturerUserId)&&this.agentMsgForm.message))return void this.$message.warning("嘉宾或发言内容不能为空");{let e=Ce.A.wrapEmoji(this.agentMsgForm.message.trim(),"<span style='font-size:28px;line-height:30px;'>","</span>"),t=(0,Oe.RH)(F.iC.LIVE_MSG,"RICH",e,this.getItem(this.lecturerList,this.agentMsgForm.lecturerUserId),{},this.getLiveRoomInfo,this.getClientInfo,this.getUserInfo,"lecturer");(0,Ue.g7)(t,this.getLiveRoomInfo.id)}}else if(3==this.agentMsgForm.type){if(!this.agentMsgForm.batchMsg1&&!this.agentMsgForm.batchMsg2)return void this.$message.warning("批量发言内容不能为空");if(!this.agentMsgForm.batchCount1&&!this.agentMsgForm.batchCount2)return void this.$message.warning("批量发言数量不能为空");let e;if(this.agentMsgForm.batchCount1&&this.agentMsgForm.batchMsg1&&this.agentMsgForm.batchMsg1.trim().length>0&&this.agentMsgForm.batchCount2&&this.agentMsgForm.batchMsg2&&this.agentMsgForm.batchMsg2.trim().length>0){let t=(0,M.oJ)(this.getRobotList,Number(this.agentMsgForm.batchCount1),Number(this.agentMsgForm.batchCount2)),i=t[0],o=t[1];i.forEach(e=>{e.__msg=Ce.A.wrapEmoji(this.agentMsgForm.batchMsg1.trim(),"<span style='font-size:28px;line-height:30px;'>","</span>")}),o.forEach(e=>{e.__msg=Ce.A.wrapEmoji(this.agentMsgForm.batchMsg2.trim(),"<span style='font-size:28px;line-height:30px;'>","</span>")}),e=[...i,...o],e=(0,M.oJ)(e,e.length)}else if(this.agentMsgForm.batchCount1&&this.agentMsgForm.batchMsg1&&this.agentMsgForm.batchMsg1.trim().length>0){let t=(0,M.oJ)(this.getRobotList,Number(this.agentMsgForm.batchCount1));t.forEach(e=>{e.__msg=Ce.A.wrapEmoji(this.agentMsgForm.batchMsg1.trim(),"<span style='font-size:28px;line-height:30px;'>","</span>")}),e=(0,M.oJ)(t,t.length)}else if(this.agentMsgForm.batchCount2&&this.agentMsgForm.batchMsg2&&this.agentMsgForm.batchMsg2.trim().length>0){let t=(0,M.oJ)(this.getRobotList,Number(this.agentMsgForm.batchCount2));t.forEach(e=>{e.__msg=Ce.A.wrapEmoji(this.agentMsgForm.batchMsg2.trim(),"<span style='font-size:28px;line-height:30px;'>","</span>")}),e=(0,M.oJ)(t,t.length)}this.$emit("sendBatchMsgs",e)}},getItem(e,t){let i=e.filter(e=>e.userId==t);return i&&1==i.length?i[0]:null},closePanel(){this.$emit("closeAgentMsgPanel",!1)}}},Xe=Je;var Ze=(0,v.A)(Xe,$e,Ee,!1,null,"4becef3a",null);const et=Ze.exports;var tt=i(59854),it=function(){var e=this,t=e._self._c;return e.visible?t("div",{ref:"animateBottomToTopRunner",staticClass:"animate-bottom-to-top-runner",class:e.lrWave?"lr-wave":"no-lr-wave",on:{animationend:e.animationend}},[e._t("default")],2):e._e()},ot=[];const st={name:"AnimateBottomToTop",props:{lrWave:{type:Boolean,default:!0}},data(){return{visible:!1,callback:null}},methods:{init(e){let t=this;t.callback=e,t.visible=!0,this.$nextTick(()=>{setTimeout(()=>{let e=t.$refs.animateBottomToTopRunner;if(e){e.style.animationPlayState="paused",e.style.display=null,e.style.opacity=null;let t=e.parentElement,i=e.firstElementChild,o=i.getBoundingClientRect(),s=o.width,a=t.getBoundingClientRect(),l=a.height;e.style.setProperty("--width",s+"px"),e.style.setProperty("--height",.37*l+"px"),e.style.width=s+"px",e.style.animationPlayState="running",setTimeout(()=>{},3e3)}},10)})},animationend(e){/animate\-bottom\-to\-top\-run\-last/i.test(e.animationName)&&this.callback&&this.callback instanceof Function&&this.callback()}}},at=st;var lt=(0,v.A)(at,it,ot,!1,null,"43d9b9c2",null);const nt=lt.exports;var rt=function(){var e=this,t=e._self._c;return e.visible?t("div",{ref:"animateLeftRightFadeInoutRunner",staticClass:"animate-left-right-fade-inout-runner",on:{animationend:e.animationend}},[e._t("default")],2):e._e()},ct=[];const mt={name:"AnimateLeftRightFadeInOut",data(){return{visible:!1,callback:null}},methods:{init(e){let t=this;t.callback=e,t.visible=!0,this.$nextTick(()=>{setTimeout(()=>{let e=t.$refs.animateLeftRightFadeInoutRunner;if(e){e.style.animationPlayState="paused",e.style.display=null,e.style.opacity=null,e.style.left="0",e.style.bottom="0";let t=e.parentElement,i=document.getElementById("input-container"),o=document.getElementById("input-container-bar"),s=i||o;s&&e.style.setProperty("--bottom",s.getBoundingClientRect().height+"px");let a=e.getBoundingClientRect(),l=a.width,n=t.getBoundingClientRect(),r=n.height;e.style.setProperty("--width",l+"px"),e.style.setProperty("--height",.37*r+"px"),e.style.width=l+"px",e.style.left="",e.style.bottom="",e.style.animationPlayState="running"}},20)})},animationend(e){this.visible=!1,this.callback&&this.callback instanceof Function&&this.callback()}}},dt=mt;var ut=(0,v.A)(dt,rt,ct,!1,null,"e9090f1a",null);const ht=ut.exports;var gt=i(50101);function pt(e){return(0,gt.A)({url:"/system/notice/listActive",method:"get",params:e})}function vt(e){return(0,gt.A)({url:"/system/notice",method:"post",data:e})}function ft(e){return(0,gt.A)({url:"/system/notice",method:"put",data:e})}const bt={name:"Chat",props:{layout:String},components:{AnimateBottomToTop:nt,AnimateLeftRightFadeInOut:ht,ChatMsgItem:Ae,ChatNoticeItem:Me,CustomQuillEditor:be,ForbiddenPanel:R,KickOutPanel:P,AgentMsgPanel:et,EmojiPanel:Ye},computed:{...(0,a.L8)(["getClientInfo","getLiveRoomInfo","getUserInfo","getLiveRoomSensitiveWords","getToken","getMsgList","getNoticeList","isMobile","isFromApp","getLiveRoomTheme","getLiveRoomStyle","getForbiddenChat","getEmojiMsgList","getExtMsgList"])},watch:{layout(e){this.myLayout=e}},data(){return{showInputContainer:!1,msgCategory:0,msgCategoryCheck:!1,chatMsgList:[],msgNoticeList:[],myLayout:this.layout,fontStyle:{color:"#e84a5f",fontSize:"18px"},fontSizeList:[{label:"14号字",value:"14px"},{label:"16号字",value:"16px"},{label:"18号字",value:"18px"},{label:"20号字",value:"20px"},{label:"22号字",value:"22px"},{label:"26号字",value:"26px"},{label:"32号字",value:"32px"}],predefineColors:["#2a363b","#9a9b94","#e84545","#fecea8","#00e0ff","#15b7b9","#b61aae","#ffc93c","#2eb872","#5e88fc"],showForbidden:!1,showKickOut:!1,showMore:!1,message:"",qmsg:"",editorOption:{placeholder:"请输入内容",modules:{toolbar:{container:ee}}},editorMiniOption:{placeholder:"请输入内容",modules:{toolbar:{container:te}}},editorMobileOption:{placeholder:"请输入内容",modules:{toolbar:{container:ie}}},editor:null,editorExtBtns:[{name:"send",onclick:()=>{this.sendMsg(null,"RICH")}}],showEmoji:!1,msgBtnObj:{atUser:void 0,forbidden:void 0,delMsg:void 0,kickOut:void 0},expendNotice:!1}},mounted(){this.initScrollEvent(),this.BUS.showLiveRoomNotice=this.showLiveRoomNotice,this.BUS.fireAnimate=this.fireAnimate,this.BUS.fireExtAnimate=this.fireExtAnimate,this.initNotices()},methods:{inputTextareaBlur(e){console.log("inputTextareaBlur",e)},parseEmoji(e,t){let i="",o=null;switch(t.msgType){case"LIVE_USER_POINTS":i="<span class='notice-user-name'>"+t.data.userName+"</span>",t.data.levelName&&(i=i+"<span class='notice-user-level'>"+t.data.levelName+"</span>");break;case"LIVE_IN":o=t.data.userInfo||t.data.user,i="<span class='notice-user-name'>"+o.userName+"</span>",o.levelName&&(i=i+"<span class='notice-user-level'>"+o.levelName+"</span>"),e="进入直播间";break}let s=this.isMobile?"chatMobileEmojiStyle":"chatEmojiStyle",a=this.getLiveRoomStyle[s]&&this.getLiveRoomStyle[s].width||"26px",l=this.getLiveRoomStyle[s]&&this.getLiveRoomStyle[s].height||"26px";return i+" "+Ce.A.replaceEmoji(e,"<img style='width:"+a+";height:"+l+";display: inline-block;vertical-align: middle;' src='","' alt='emoji'/>",this.getLiveRoomStyle.extendSettings&&this.getLiveRoomStyle.extendSettings.animateEmoji||!1)},initNotices(){pt({moduleId:this.getLiveRoomInfo.id}).then(e=>{const t=[];e.rows.forEach(e=>{t.push({msgType:"LIVE_NOTICE",roomId:e.moduleId,extArgs:{},data:{...e,content:e.noticeContent}})}),this.$store.dispatch("cleanNotice"),this.$store.dispatch("addNotice",t)})},fireExtAnimate(e){let t=this;this.$nextTick(()=>{e.forEach(e=>{let i=e.data.id,o=this.$refs["extMsgAnimatePanel_"+i];o&&o.length?o.forEach(e=>{e.init&&e.init instanceof Function&&e.init(()=>{t.$store.dispatch("delExtMsg",i)})}):o&&o.init&&o.init instanceof Function&&o.init(()=>{t.$store.dispatch("delExtMsg",i)})})})},fireAnimate(e){let t=this;this.$nextTick(()=>{let i=this.$refs["emojiAnimatePanel_"+e];i&&i.length?i.forEach(i=>{i.init&&i.init instanceof Function&&i.init(()=>{t.$store.dispatch("removeEmojiMsgItem",e)})}):i&&i.init&&i.init instanceof Function&&i.init(()=>{t.$store.dispatch("removeEmojiMsgItem",e)})})},animateEmopji(){this.$nextTick(()=>{let e=this.$refs.emojiAnimatePanel;e&&e.length?e.forEach(e=>{e.init&&e.init instanceof Function&&e.init()}):e&&e.init&&e.init instanceof Function&&e.init()})},numToArr(e){let t=e+"",i=t.split(""),o=i.map(e=>({char:e}));return o},replaceEmoji(e){return Ce.A.replaceEmoji(e,"<img style='width:18px;height:18px' src='","' alt='emoji'/>",this.getLiveRoomStyle.extendSettings&&this.getLiveRoomStyle.extendSettings.animateEmoji||!1)},animateEmojies(e){let t=Ce.A.detectEmojies(e,this.getLiveRoomStyle.extendSettings&&this.getLiveRoomStyle.extendSettings.animateEmoji||!1),i=[];for(let o in t)i.push({content:"<img style='width:32px;height:32px' src='"+t[o].url+"' alt='emoji'/>",count:t[o].count});return i},showLiveRoomNotice(){this.expendNotice=!0},sortMsgList(e,t){let i=e.sort(function(e,i){let o=e.data["createdTime"],s=i.data["createdTime"],a=Math.floor(new Date(o).getTime()/1e3),l=Math.floor(new Date(s).getTime()/1e3);return"desc"===t?l-a:a-l});return i},hasAdminPromission(e,t,i){return(0,h.t)(e,t,i)},hasTeamAdmin(e,t){return 2==e.type&&t||(0,h.t)(e)},hasSendVirtualMsg(e,t){return 2==e.type&&t||(0,h.t)(e)},closeForbiddenPanel(){this.showForbidden=!1},closeKickOutPanel(){this.showKickOut=!1},closeAgentMsgPanel(){this.showMore=!1},quickMsgList(e){let t=[],i=e.shortMsgs;return i&&(t=i.split(/[,;、，；，；：\s\t\r\n]+/g),t=t.filter(e=>e.trim().length>0)),t},showEmojiPanel(){this.showEmoji=!0},closeEmojiPanel(){this.showEmoji=!1},selectEmoji(e,t,i){let o=i.trim();this.sendMsg(o,"EMOJI"),this.showEmoji=!1},sendQuickMsg(e){let t=e;t=t.trim(),t!=e?this.sendMsg(t,"EMOJI"):this.sendMsg(t,"TEXT"),this.qmsg=void 0},getFontStyle(){return(0,h.t)(this.getUserInfo)&&!this.getLiveRoomTheme.richText?this.fontStyle:{}},getFontStyleString(){return(0,h.t)(this.getUserInfo)&&!this.getLiveRoomTheme.richText?"color:"+this.fontStyle.color+";font-size:"+this.fontStyle.fontSize:""},getGuanliyuanFontStyle(){let e=[],t="guanliyuanMsgStyle";return this.isMobile&&(t="guanliyuanMsgMobileStyle"),this.getLiveRoomStyle[t].color&&e.push("color:"+this.getLiveRoomStyle[t].color),this.getLiveRoomStyle[t].fontSize&&e.push("font-size:"+this.getLiveRoomStyle[t].fontSize),this.getLiveRoomStyle[t].fontWeight&&e.push("font-weight:"+this.getLiveRoomStyle[t].fontWeight),this.getLiveRoomStyle[t].lineHeight&&e.push("line-height:"+this.getLiveRoomStyle[t].lineHeight),e.join(";")},getZhuliFontStyle(){let e=[],t="zhuliMsgStyle";return this.isMobile&&(t="zhuliMsgMobileStyle"),this.getLiveRoomStyle[t].color&&e.push("color:"+this.getLiveRoomStyle[t].color),this.getLiveRoomStyle[t].fontSize&&e.push("font-size:"+this.getLiveRoomStyle[t].fontSize),this.getLiveRoomStyle[t].fontWeight&&e.push("font-weight:"+this.getLiveRoomStyle[t].fontWeight),this.getLiveRoomStyle[t].lineHeight&&e.push("line-height:"+this.getLiveRoomStyle[t].lineHeight),e.join(";")},getJiabinFontStyle(){let e=[],t="jiabinMsgStyle";return this.isMobile&&(t="jiabinMsgMobileStyle"),this.getLiveRoomStyle[t].color&&e.push("color:"+this.getLiveRoomStyle[t].color),this.getLiveRoomStyle[t].fontSize&&e.push("font-size:"+this.getLiveRoomStyle[t].fontSize),this.getLiveRoomStyle[t].fontWeight&&e.push("font-weight:"+this.getLiveRoomStyle[t].fontWeight),this.getLiveRoomStyle[t].lineHeight&&e.push("line-height:"+this.getLiveRoomStyle[t].lineHeight),e.join(";")},sendMsg(e,t="RICH"){let i=e||this.message.replace(/(<p><br\/><\/p>)+$/gi,"").replace(/(<p><\/p>|<\/p>)+$/gi,"").replace(/(<br\/>)+$/gi,"").replace(/(<p><br><\/p>)+$/gi,"").replace(/(<br>)+$/gi,"").replace(/^\s*<p\s*>\s*/gi,"").replace(/<\/p\s*>\s*$/gi,"");if(!i)return;"EMOJI"!=t&&(t=(0,tt.A)(i)?"RICH":"TEXT");let o="zhuliMsgStyle",s="jiabinMsgStyle",a="guanliyuanMsgStyle";if(this.isMobile&&(o="zhuliMsgMobileStyle",s="jiabinMsgMobileStyle",a="guanliyuanMsgMobileStyle"),2==this.getUserInfo.type&&this.getLiveRoomStyle[a]&&Object.keys(this.getLiveRoomStyle[a]).length&&(this.getLiveRoomStyle[a].color||this.getLiveRoomStyle[a].fontSize||this.getLiveRoomStyle[a].fontWeight)?i='<span style="'+this.getGuanliyuanFontStyle()+'">'+i+"</span>":3==this.getUserInfo.type&&this.getLiveRoomStyle[o]&&Object.keys(this.getLiveRoomStyle[o]).length&&(this.getLiveRoomStyle[o].color||this.getLiveRoomStyle[o].fontSize||this.getLiveRoomStyle[o].fontWeight)?i='<span style="'+this.getZhuliFontStyle()+'">'+i+"</span>":4==this.getUserInfo.type&&this.getLiveRoomStyle[s]&&Object.keys(this.getLiveRoomStyle[s]).length&&(this.getLiveRoomStyle[s].color||this.getLiveRoomStyle[s].fontSize||this.getLiveRoomStyle[s].fontWeight)&&(i='<span style="'+this.getJiabinFontStyle()+'">'+i+"</span>"),this.getUserInfo.type<2&&i.length>100)return void(0,Ne.N0)("发言字数太多，请不要超过50个字");if(this.msgCategoryCheck){let e=(0,Oe.Lq)(this.getUserInfo,this.getLiveRoomInfo,i);return void vt(e).then(e=>{(0,Ne.N0)("公告发布成功","success"),this.getLiveRoomStyle.extendSettings&&this.getLiveRoomStyle.extendSettings.keepInputContainer||(this.showInputContainer=!1)})}this.msgCategory=this.msgCategoryCheck?1:0;let l={msgCategory:this.msgCategory,...this.getLiveRoomInfo},n=(0,Oe.RH)(F.iC.LIVE_MSG,t,i,this.getUserInfo,this.msgBtnObj.atUser||{},l,this.getClientInfo);(0,M.tV)(i,this.getLiveRoomSensitiveWords)&&!this.hasAdminPromission(this.getUserInfo)||this.getForbiddenChat?this.$store.dispatch("addMsgs",n):(0,Ue.g7)(n,this.getLiveRoomInfo.id),this.message="",this.msgBtnObj={atUser:void 0,forbidden:void 0,delMsg:void 0,kickOut:void 0},this.getLiveRoomStyle.extendSettings&&this.getLiveRoomStyle.extendSettings.keepInputContainer||(this.showInputContainer=!1)},inputTextareaKeyEvent(e){1!=e.ctrlKey&&1!=e.altKey||13!=e.keyCode||this.sendMsg()},initScrollEvent(){let e=this.$refs.msgContainer;function t(t){e.scrollTop=e.scrollHeight}if(!this.isMobile){e.removeEventListener("DOMNodeInserted",t);try{let i=new MutationObserver(function(e){t()}),o={childList:!0,subtree:!0};i.observe(e,o)}catch(i){console.log(i)}}},selectColor(e){this.fontStyle.color=e},getFontLabelStyle(){return{color:this.fontStyle.color}},noticeBtnClick(e,t){if("delMsg"==e){const e=t.data;if(e.status=0,ft(e),this.getUserInfo.userId==t.data.userId){let e=(0,M.Go)(t);e.selfDel=!0,this.$store.dispatch("delNotice",e)}}},msgBtnClick(e,t){if("atUser"==e)this.msgBtnObj[e]=t;else if("delMsg"==e){let e=(0,M.Go)(t);if(e.msgType=F.iC.LIVE_MSG_DEL,e.data.wsMsgType=F.iC.LIVE_MSG_DEL,(0,Ue.g7)(e,this.getLiveRoomInfo.id),this.getUserInfo.userId==t.data.userId){let e=(0,M.Go)(t);e.selfDel=!0,this.$store.dispatch("delMsgs",e)}}else"forbidden"==e?(this.showKickOut=!1,this.showForbidden=!0,this.$nextTick(()=>{this.$refs.forbiddenPanel.prepare("1",t.data.userName)})):"kickOut"==e&&(this.showForbidden=!1,this.showKickOut=!0,this.$nextTick(()=>{this.$refs.kickOutPanel.prepare("1",t.data.userName)}))},sendBatchMsgs(e){if(e&&e.length>0){let t,i,o=0,s=this;const a=()=>{if(o<e.length){t=e[o],i=(0,Oe.RH)(F.iC.LIVE_MSG,"RICH",t.__msg,t,{},s.getLiveRoomInfo,s.getClientInfo,s.getUserInfo,"robot"),(0,Ue.g7)(i,s.getLiveRoomInfo.id,!0),o++;const l=(0,M.cY)(0,1500);setTimeout(a,l)}};a(),this.closeAgentMsgPanel()}}}},yt=bt;var Lt=(0,v.A)(yt,V,q,!1,null,"228b2632",null);const St=Lt.exports;var kt=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{staticClass:"demo-form-inline",attrs:{model:e.form,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"选择方式",prop:"type"}},[t("el-radio-group",{on:{change:e.handleTypeChange},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[t("el-radio",{attrs:{label:0}},[e._v("手工设置数量")]),t("el-radio",{attrs:{label:1}},[e._v("按时间自动设置")])],1)],1),0==e.form.type&&e.manualList&&e.manualList[0]?t("el-form-item",{attrs:{label:"机器人数量"}},[t("el-input-number",{staticStyle:{"max-width":"350px"},attrs:{placeholder:"请输入机器人数量",min:0},model:{value:e.manualList[0].count,callback:function(t){e.$set(e.manualList[0],"count",t)},expression:"manualList[0].count"}})],1):e._e()],1),1==e.form.type?t("el-table",{staticClass:"table-class",attrs:{data:e.autoList,size:"mini","element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[t("el-table-column",{attrs:{label:"序号",type:"index",align:"center"}}),t("el-table-column",{attrs:{label:"机器人数量",prop:"count"},scopedSlots:e._u([{key:"default",fn:function({row:i}){return[t("el-input-number",{attrs:{placeholder:"请输入机器人数量",min:0},model:{value:i.count,callback:function(t){e.$set(i,"count",t)},expression:"row.count"}})]}}],null,!1,1507303509)}),t("el-table-column",{attrs:{label:"生效时间",prop:"applyTime"},scopedSlots:e._u([{key:"default",fn:function({row:i}){return[t("DateTimePicker",{attrs:{layoutModel:"time",showSecond:!1,isRange:!1,autoFillSecond:!1},model:{value:i.applyTime,callback:function(t){e.$set(i,"applyTime",t)},expression:"row.applyTime"}})]}}],null,!1,664812024)}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-delete"},on:{click:function(t){return e.delTime(i.$index)}}},[e._v("删除")])]}}],null,!1,3665431932)})],1):e._e(),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["1"==e.form.type?t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addTime()}}},[e._v("添加")]):e._e(),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleSubmit}},[e._v("保 存")]),t("el-button",{on:{click:e.handleClose}},[e._v("关 闭")])],1)],1)},Ct=[];function It(e){return(0,gt.A)({url:"/live/robotTimeSet/list",method:"post",data:e})}function Rt(e){return(0,gt.A)({url:"/live/robotTimeSet/updateBatch",method:"post",data:e})}var wt=i(88487);const At={name:"RobotSet",components:{DateTimePicker:wt.A},props:{data:{type:Object}},data(){return{loading:!1,roomInfo:this.data,form:{type:0},manualList:[],autoList:[],fullList:[]}},mounted(){this.init()},methods:{init(){this.roomInfo=this.data,this.form.roomId=this.roomInfo.id,this.getList()},handleTypeChange(){0==this.form.type?this.manualList[0].status=1:this.manualList[0].status=0},getList(){var e={roomId:this.roomInfo.id};It(e).then(e=>{if(this.loading=!1,e&&e.data&&e.data){this.fullList=e.data,this.manualList.splice(0,this.manualList.length),this.autoList.splice(0,this.autoList.length);let t=this.fullList.filter(e=>0==e.type),i=this.fullList.filter(e=>1==e.type);i=i.sort((e,t)=>e.applyTime>t.applyTime?1:e.applyTime==t.applyTime?0:-1),this.autoList.push(...i),t&&0!=t.length?this.manualList.push(...t):this.manualList.push({type:0,roomId:this.roomInfo.id,count:0,applyTime:"00:00",status:i.length>0?0:1}),1==this.manualList[0].status?this.form.type=0:this.form.type=1}})},addTime(){let e={applyTime:null,count:0,roomId:this.roomInfo.id,type:1,id:null};this.autoList.push(e)},delTime(e){let t=this.autoList;t.splice(e,1);this.autoList=t.sort((e,t)=>e.applyTime>t.applyTime?1:e.applyTime==t.applyTime?0:-1)},handleSubmit(){let e=this;this.loading=!0;var t=[];this.manualList||(this.manualList=[{type:0,roomId:this.roomInfo.id,count:0,applyTime:"00:00",status:0}]),0===this.form.type?this.manualList[0].status=1:this.manualList[0].status=0,t.push(...this.manualList),t.push(...this.autoList),t=t.filter(e=>0==e.type||null!=e.applyTime),Rt(t).then(t=>{this.loading=!1,"200"==t.code&&(this.$message.success("保存成功！"),setTimeout(()=>{e.$emit("confirm",{state:"ok"})},50))}).catch(e=>{this.loading=!1,this.$message.error("保存失败！")})},handleClose(){this.form={},this.$emit("cancel",{state:"cancel"})}}},_t=At;var xt=(0,v.A)(_t,kt,Ct,!1,null,"afc57040",null);const Tt=xt.exports,Pt={name:"RightPanel",props:{layout:String},components:{UserList:$,UserSearchResult:z,Chat:St},watch:{layout(e){let t=this;t.myLayout=e,"lite-left"==e&&(t.searchVisible=!1,t.showUserPanel=!1,t.showSearchResultPanel=!1)}},data(){return{myLayout:this.layout,activeTab:"msgs",searchParam:"",searchVisible:!1,lecturerList:[]}},computed:{...(0,a.L8)(["getLoginInfo","getLiveRoomInfo","getUserInfo","isGuest","getToken","getLiveRoomStyle","getMsgList","getOnlineUserTotal","getRobotTotal","isMulti"])},mounted(){this.BUS.activeMsgPanel=e=>{this.searchVisible=!1,this.showUserPanel=!1,this.$nextTick(()=>{e&&e instanceof Function&&e()})},this.getLecturerList()},methods:{hasAdminPromission(e,t,i){return(0,h.t)(e,t,i)},search(e){27==e.keyCode?(this.searchVisible=!1,this.searchParam=null):this.$nextTick(()=>{this.searchParam&&this.$refs.userSearchResult.search(this.searchParam)})},getLecturerList(){(0,S.eG)(this.getLiveRoomInfo.id).then(e=>{this.lecturerList=e.data}).catch(e=>{console.log(e)})},lecturerVote(e){let t={roomId:this.getLiveRoomInfo.id,userId:e.userId,voteUserId:this.getUserInfo.userId},i=this;(0,S.yj)(t).then(e=>{200==e.code&&(this.$message.success("投票成功"),i.getLecturerList())})},setRobot(){let e=this;e.BUS.showDialog({width:"620px",height:"500px"},()=>{e.$modal.show("dialog",{title:"设置机器人",component:Tt,props:{data:e.getLiveRoomInfo},containerStyle:{display:"flex",flexDirection:"row",justifyContent:"center",overflow:"auto"},bodyStyle:{display:"block",width:"100%"},on:{confirm:e.onCloseDialog,cancel:e.onCloseDialog}})})},onCloseDialog(e){this.$modal.hide("dialog")}}},Ft=Pt;var Mt=(0,v.A)(Ft,l,n,!1,null,"217d57dc",null);const Ut=Mt.exports;var Ot=function(){var e=this,t=e._self._c;return t("div",{staticClass:"left-right-main-page-container",style:e.myMobile?e.getLiveRoomStyle.mobileMainStyle||{}:e.getLiveRoomStyle.mainStyle},[t("div",{staticClass:"left-right-main-container"},[t("div",{staticClass:"left-right-left-container"},[t("div",{staticClass:"left-right-header-panel",style:e.getLiveRoomStyle.headerStyle},[t("LayoutLeftRightHeader")],1),t("div",{staticClass:"left-right-video-panel"},[t("LayoutLeftRightVideoPanel")],1),t("div",{staticClass:"left-right-footer-panel"},[t("LayoutLeftRightFooter")],1),t("AdminDockbar")],1),t("div",{staticClass:"left-right-right-container"},[t("RightPanel",{attrs:{layout:"big-right"}})],1)])])},Nt=[],$t=function(){var e=this,t=e._self._c;return t("div",{staticClass:"header-info-ctnr"},[t("a",{staticClass:"avatar",attrs:{target:"_blank"}},[t("div",{staticClass:"blive-avatar",staticStyle:{width:"64px",height:"64px"}},[t("div",{staticClass:"blive-avatar-face",style:{backgroundImage:"url("+e.getLiveRoomTheme.mainPageLogo+")"}})])]),t("div",{staticClass:"rows-ctnr"},[t("div",{staticClass:"upper-row"},[t("div",{staticClass:"left-ctnr"},[t("div",{staticClass:"room-owner-username v-middle pointer",style:e.getLiveRoomStyle.titleStyle,attrs:{title:e.getLiveRoomInfo.name}},[e._v(e._s(e.getLiveRoomInfo.name))]),t("div",{staticClass:"follow-ctnr p-relative v-middle",on:{click:function(t){return e.favorite(2)}}},[t("div",{staticClass:"left-part live-skin-button-text pointer p-relative",class:e.isFavorite(2)?"active":"",attrs:{role:"button",title:"喜欢 TA 就关注 TA"}},[t("i",{staticClass:"icon-font v-middle icon-attention"}),t("span",{staticClass:"follow-text v-middle d-inline-block"},[e._v("关注")])]),t("div",{staticClass:"right-part"},[e._v(e._s(e.getTotalFavoriteCount(2)))])])]),t("div",{staticClass:"right-ctnr"},[t("div",{staticClass:"icon-ctnr not-hover"},[t("i",{staticClass:"v-middle watched-icon"},[t("svg",{attrs:{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.11423 7.82106C2.99473 6.4744 4.99644 4.08696 7.92954 4.08696C10.8471 4.08696 12.9329 6.4441 13.8782 7.80667C13.9622 7.9277 13.9622 8.0723 13.8782 8.19333C12.9329 9.55589 10.8471 11.913 7.92954 11.913C4.99644 11.913 2.99473 9.52559 2.11423 8.17894C2.04036 8.06596 2.04036 7.93404 2.11423 7.82106ZM7.92954 2C3.87151 2 1.33201 5.23978 0.398106 6.66812C-0.132701 7.47995 -0.132703 8.52005 0.398105 9.33188C1.33201 10.7602 3.87151 14 7.92954 14C11.9396 14 14.5648 10.8317 15.5623 9.39381C16.1459 8.55258 16.1459 7.44741 15.5623 6.60619C14.5648 5.16831 11.9396 2 7.92954 2ZM6.77901 8C6.77901 7.30844 7.33208 6.74783 8.01431 6.74783C8.69655 6.74783 9.24961 7.30844 9.24961 8C9.24961 8.69156 8.69655 9.25217 8.01431 9.25217C7.33208 9.25217 6.77901 8.69156 6.77901 8ZM8.01431 5.07826C6.42243 5.07826 5.13195 6.38637 5.13195 8C5.13195 9.61363 6.42243 10.9217 8.01431 10.9217C9.6062 10.9217 10.8967 9.61363 10.8967 8C10.8967 6.38637 9.6062 5.07826 8.01431 5.07826Z"}})])]),t("span",{staticClass:"action-text v-middle watched-text"},[e._v(e._s(e.getTotalViewsCount())+"人看过")])]),t("div",{staticClass:"icon-ctnr pointer",on:{click:function(t){return e.favorite(1)}}},[t("i",{staticClass:"v-middle like-icon",class:e.isFavorite(1)?"live-skin-main-text":""},[t("svg",{attrs:{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.796 3.38458C8.77007 3.5215 8.75172 3.67826 8.72916 3.87509C8.72738 3.89058 8.72558 3.9064 8.72375 3.92252C8.68096 4.29859 8.61923 4.84109 8.39845 5.3021C8.05844 6.01208 7.63178 6.45364 7.25896 6.7214C7.20344 6.76127 7.14952 6.797 7.09774 6.82898V12.7935H10.9777C11.6133 12.7935 12.1664 12.3589 12.3166 11.7414L13.2702 7.82206C13.3591 7.45691 13.0825 7.10499 12.7067 7.10499H10.1219V4.7308C10.1219 3.99645 9.58879 3.33337 8.83729 3.21335C8.82468 3.2531 8.81039 3.30861 8.796 3.38458ZM8.75707 3.20694C8.75705 3.20692 8.75751 3.20685 8.75845 3.20677ZM8.14355 1.84329C8.4388 1.70009 8.75655 1.68314 9.05794 1.72963C10.5788 1.96421 11.6219 3.28828 11.6219 4.7308V5.60499H12.7067C14.0545 5.60499 15.0464 6.86714 14.7277 8.17669L13.7741 12.096C13.4603 13.3857 12.3051 14.2935 10.9777 14.2935H5.59774V5.76023L6.15809 5.62911C6.16369 5.62711 6.17333 5.62349 6.1865 5.61783C6.2256 5.60104 6.29584 5.56634 6.38395 5.50306C6.55598 5.3795 6.81646 5.13265 7.04559 4.6542C7.14606 4.44443 7.18818 4.14684 7.23892 3.70426C7.24113 3.6849 7.24339 3.66488 7.24572 3.64425C7.28289 3.31439 7.33751 2.82972 7.53305 2.45308C7.65223 2.22352 7.84307 1.98903 8.14355 1.84329ZM1.21798 7.56207C1.21902 6.56098 2.03086 5.75 3.03194 5.75H4.78872L4.77984 14.25H3.02686C2.02429 14.25 1.21185 13.4367 1.21289 12.4341L1.21798 7.56207ZM3.03194 7.25C2.85867 7.25 2.71816 7.39036 2.71798 7.56363L2.71289 12.4357C2.71271 12.6092 2.85333 12.75 3.02686 12.75H3.28141L3.28715 7.25H3.03194Z"}})])]),t("span",{staticClass:"action-text v-middle like-text"},[e._v(e._s(e.getTotalFavoriteCount(1))+"点赞")])]),t("div",{staticClass:"icon-ctnr pointer",on:{click:function(t){return e.signup()}}},[t("i",{staticClass:"v-middle watched-icon"},[t("svg-icon",{attrs:{"icon-class":"签到"}})],1),t("span",{staticClass:"action-text v-middle",staticStyle:{"font-size":"12px"}},[e._v("签到")])]),e.showMultiRoom()?t("div",{staticClass:"icon-ctnr pointer",on:{click:e.openMultiRoomMsg}},[t("span",{staticClass:"action-text v-middle",staticStyle:{"font-size":"12px"}},[e._v("多直播间互动")])]):e._e(),e.getUserInfo.levelAvatar?t("LevelIcon",{staticClass:"icon-ctnr pointer",attrs:{levelAvatar:e.getUserInfo.levelAvatar}}):e._e(),t("el-dropdown",{staticClass:"icon-ctnr pointer",on:{command:e.accountAction}},[t("span",{staticClass:"action-text v-middle el-dropdown-link"},[e._v(" "+e._s(e.getUserInfo.nickName)),e.showDropdown()?t("i",{staticClass:"el-icon-arrow-down el-icon--right"}):e._e()]),e.showDropdown()?t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[!e.isGuest&&e.getLiveRoomStyle.headerBarItem&&e.getLiveRoomStyle.headerBarItem.showChangePassword?t("el-dropdown-item",{attrs:{command:"changePasswd"}},[e._v("修改密码")]):e._e(),e.getLiveRoomStyle.headerBarItem&&e.getLiveRoomStyle.headerBarItem.showChangeNickname?t("el-dropdown-item",{attrs:{command:"changeNickname"}},[e._v("修改昵称")]):e._e(),e.isGuest?t("el-dropdown-item",{attrs:{command:"showLoginPanel"}},[e._v("账号登录")]):e._e()],1):e._e()],1),e.isGuest||e.multiRoomFlag?e._e():t("div",{staticClass:"icon-ctnr pointer",on:{click:function(t){return e.logout()}}},[t("span",{staticClass:"action-text v-middle",staticStyle:{"font-size":"12px"}},[e._v("退出")])])],1)]),t("div",{staticClass:"lower-row"},[t("div",{staticClass:"left-ctnr"},[t("div",{staticClass:"live-title"},[t("div",{staticClass:"flex-wrap"},[t("div",{staticClass:"text live-skin-main-text title-length-limit",domProps:{innerHTML:e._s(e.getLiveRoomInfo.decs)}})])])]),t("div",{staticClass:"right-ctnr"},[e.hasReportPromise()?t("div",{staticClass:"statics-report-actions"},[t("el-dropdown",{staticClass:"header-container-inner-info-item",on:{command:e.rightAction}},[t("span",{staticClass:"el-dropdown-link"},[t("svg-icon",{attrs:{"icon-class":"统计"}}),e._v(" 数据统计 "),t("i",{staticClass:"el-icon-arrow-down el-icon--right"})],1),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{attrs:{command:"online"}},[e._v("在线用户统计")]),t("el-dropdown-item",{attrs:{command:"onlineTime"}},[e._v("观看时长统计")]),t("el-dropdown-item",{attrs:{command:"hours"}},[e._v("小时峰值统计")]),t("el-dropdown-item",{attrs:{command:"course"}},[e._v("课程访客统计")])],1)],1)],1):e._e(),t("div",{staticClass:"more-actions-bar"},[t("div",{staticClass:"left-item"},[t("svg-icon",{attrs:{"icon-class":"功能"}})],1),t("a",{staticClass:"action-item",attrs:{href:e.downloadUrl,download:e.getLiveRoomInfo.name+".url"}},[e._v("保存到桌面")]),e._l(e.getLiveRoomTheme.liveNavBarList,function(i,o){return t("div",{key:"hd_lnk_indx_"+o,staticClass:"action-item",on:{click:function(t){return e.openLink(i)}}},[e._v(e._s(i.name))])}),e.getLiveRoomInfo&&e.getLiveRoomInfo.extValue&&e.getLiveRoomInfo.extValue.enablePlayback?t("div",{staticClass:"action-item",on:{click:e.openPlayback}},[e._v("回放")]):e._e()],2)])])])])},Et=[],Bt=i(60460),jt=i(30554),Dt=i(98374),Kt=i(51181),zt=i(29699),Vt=i(2719),qt=i(39469),Ht=i(76013);const Wt={name:"LayoutLeftRightHeader",components:{LevelIcon:u.A},props:{multiRoomFlag:{type:Boolean,default:!1}},data(){return{}},computed:{...(0,a.L8)(["getUserInfo","getToken","getLiveRoomInfo","getLiveRoomTheme","getLiveRoomStyle","getClientInfo","isMobile","getBaseUrlObj","isMulti","isGuest","getRoomFavorite"]),downloadUrl(){return`data:text/plain;charset=utf-8,%5B%7B000214A0-0000-0000-C000-000000000046%7D%5D%0AProp3=19,11%0A%5BInternetShortcut%5D%0AIDList=%0AURL=${window.location.origin}/%0AIconFile=${window.location.origin}/favicon.ico%0AIconIndex=1`}},methods:{showDropdown(){return this.isGuest||!this.isGuest&&this.getLiveRoomStyle.headerBarItem&&this.getLiveRoomStyle.headerBarItem.showChangePassword||this.getLiveRoomStyle.headerBarItem&&this.getLiveRoomStyle.headerBarItem.showChangeNickname},getTotalFavoriteCount(e){let t=0,i=this;if(1==e){let e=this.getLiveRoomInfo.likeCounts,o=this.getRoomFavorite&&this.getRoomFavorite.realRoomFavoriteCounts&&this.getRoomFavorite.realRoomFavoriteCounts.filter(e=>1==e.type&&e.roomId==i.getLiveRoomInfo.id),s=null!=o&&o.length>0?o[0].count:0;t=Number(e)+Number(s)}else{let e=this.getLiveRoomInfo.favoritesCounts,o=this.getRoomFavorite&&this.getRoomFavorite.realRoomFavoriteCounts&&this.getRoomFavorite.realRoomFavoriteCounts.filter(e=>1!=e.type&&e.roomId==i.getLiveRoomInfo.id),s=null!=o&&o.length>0?o[0].count:0;t=Number(e)+Number(s)}return t>=1e4?(t/1e4).toFixed(2)+"万":t+""},getTotalViewsCount(){let e,t=0;return e=this.getLiveRoomInfo.likeCounts,t=Number(e),e=this.getLiveRoomInfo.favoritesCounts,t=t+Number(e)+Number(this.getLiveRoomInfo.viewers?this.getLiveRoomInfo.viewers:0),t>=1e4?(t/1e4).toFixed(2)+"万":t+""},isFavorite(e){let t=!1;return 1==e?t=this.getRoomFavorite&&this.getRoomFavorite.roomLikeCount>0:2==e&&(t=this.getRoomFavorite&&this.getRoomFavorite.roomFavoriteCount>0),t},hasReportPromise(){return!!([2,3,4].indexOf(this.getUserInfo.type)>=0||this.getUserInfo.actForUser&&[2,3,4].indexOf(this.getUserInfo.actForUser.type)>=0)},rightAction(e){let t;switch(e){case"online":this.myComponent=Dt.A,t={title:"在线用户统计",component:this.myComponent},this.openLink(t);break;case"onlineTime":this.myComponent=Kt.A,t={title:"观看时长统计",component:this.myComponent},this.openLink(t);break;case"course":this.myComponent=zt.A,t={title:"课程访客统计",component:this.myComponent},this.openLink(t);break;case"hours":this.myComponent=Vt.A,t={title:"小时访客统计",component:this.myComponent},this.openLink(t);break}},signup(){let e=this;this.BUS.showDialog({width:"600px",height:"600px"},()=>{e.$modal.show("dialog",{title:"签到",component:qt.A,props:{},containerStyle:{display:"flex",flexDirection:"row",justifyContent:"center",overflow:"auto",padding:"0px"},bodyStyle:{display:"block",padding:"0px"},on:{confirm:e=>{},cancel:e.onCloseDialog}})})},showMultiRoom(){return!(this.multiRoomFlag||this.isMulti||3!=this.getUserInfo.type&&4!=this.getUserInfo.type||this.getUserInfo.userDeptList&&0!=this.getUserInfo.userDeptList.length||!this.getLiveRoomInfo||!this.getLiveRoomInfo.multiRooms||!this.getLiveRoomInfo.multiRooms.length)},async logout(e){e?(this.$store.commit("setReLogin",!0),this.$store.dispatch("LogOut").then(()=>{const e=(0,M.DT)();location.href=e+"index"})):this.$confirm("确定注销并退出系统吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$store.commit("setReLogin",!0),(0,Ue.rj)(),this.$store.dispatch("LogOut").then(()=>{const e=(0,M.DT)();location.href=e+"index"})}).catch(()=>{})},openPlayback(){let e={title:"回放列表",component:Ht.A};this.openLink(e)},openLink(e){this.BUS.openLink(e)},openMultiRoomMsg(){let e=this.$router.resolve({name:"multiroom"}).href+"?multiroom=true";setTimeout(()=>{window.open(e,"_blank")},300)},accountAction(e){switch(e){case"changePasswd":this.changePasswd();break;case"changeNickname":this.changeNickname();break;case"showLoginPanel":this.showLoginPanel();break}},changePasswd(){let e=this;this.BUS.showDialog({width:"400px",height:"320px"},()=>{e.$modal.show("dialog",{title:"修改密码",component:Bt.A,props:{},containerStyle:{display:"flex",flexDirection:"row",justifyContent:"center",overflow:"auto"},bodyStyle:{display:"block"},on:{confirm:e.onCloseDialog,cancel:e.onCloseDialog}})})},changeNickname(){let e=this;this.BUS.showDialog({width:"300px",height:"220px"},()=>{e.$modal.show("dialog",{title:"修改昵称",component:jt.A,props:{},containerStyle:{display:"flex",flexDirection:"row",justifyContent:"center",overflow:"auto"},bodyStyle:{display:"block"},on:{confirm:()=>{e.onCloseDialog()},cancel:e.onCloseDialog}})})},showLoginPanel(){this.$store.commit("setReLogin",!0),this.logout(!0)},onCloseDialog(e){this.$modal.hide("dialog")},favorite(e){let t=this,i={type:e,roomId:t.getLiveRoomInfo.id,userId:t.getUserInfo.userId,userName:t.getUserInfo.userName};(0,S.O$)(i).then(e=>{if(200==e.code||201==e.code){let e={roomId:t.getLiveRoomInfo.id,userId:t.getUserInfo.userId};(0,S.kc)(e).then(e=>{if(200==e.code||201==e.code){let i={roomLikeCount:e.data.roomLikeCount,roomFavoriteCount:e.data.roomFavoriteCount,realRoomFavoriteCounts:e.data.realRoomFavoriteCounts};t.$store.dispatch("setRoomFavorite",i)}})}})}}},Gt=Wt;var Qt=(0,v.A)(Gt,$t,Et,!1,null,"e75b928a",null);const Yt=Qt.exports;var Jt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"layout-left-right-footer-container",style:e.getLiveRoomStyle.bottomStyle},[e.getLiveRoomTheme.liveSlideAdvList&&e.getLiveRoomTheme.liveSlideAdvList.length?t("div",{ref:"swiper",staticClass:"ad-banner",style:e.getLiveRoomStyle.adPanelStyle},[t("el-carousel",{staticClass:"carousel-container",attrs:{interval:e.getLiveRoomStyle.adSwiperStyle&&e.getLiveRoomStyle.adSwiperStyle.interval?e.getLiveRoomStyle.adSwiperStyle.interval:3e3,arrow:"always"}},e._l(e.getLiveRoomTheme.liveSlideAdvList,function(i){return t("el-carousel-item",{key:"smAd_"+i.id},[t("img",{staticClass:"carousel-banner-item",staticStyle:{height:"100%",width:"100%"},attrs:{src:i.img},on:{click:function(t){return t.stopPropagation(),e.openLink(i)}}})])}),1)],1):e._e(),e.getSmallAdList&&e.getSmallAdList.length&&(!e.getLiveRoomStyle.adSmallPanelPositionStyle||!e.getLiveRoomStyle.adSmallPanelPositionStyle.position||e.getLiveRoomStyle.adSmallPanelPositionStyle&&e.getLiveRoomStyle.adSmallPanelPositionStyle.position&&"topLeft"!=e.getLiveRoomStyle.adSmallPanelPositionStyle.position)?t("div",{ref:"adSmallContainer",staticClass:"ad-small-container",style:e.getLiveRoomStyle.adSmallPanelStyle},[t("Animator",{attrs:{duration:(e.getLiveRoomStyle.adSmallSwiperStyle&&e.getLiveRoomStyle.adSmallSwiperStyle.interval?e.getLiveRoomStyle.adSmallSwiperStyle.interval:8)+"s",animationName:"scale",stop:e.getSmallAdList.length<=1}},e._l(e.getSmallAdList,function(i){return t("img",{key:"smAd_"+i.id,staticClass:"banner-item",attrs:{src:i.img},on:{click:function(t){return t.stopPropagation(),e.openLink(i)}}})}),0)],1):e._e()])},Xt=[],Zt=function(){var e=this,t=e._self._c;return t("div",{ref:"animationWrapper",staticClass:"animation-wrapper",class:e.stop?"stop":""},[e._t("default")],2)},ei=[];const ti={name:"Animator",components:{},props:{duration:{type:String,default:"5s"},animationTimingFunction:{type:String,default:"linear"},animationName:{type:String,default:"switch"},stop:{type:Boolean,default:!1}},mounted(){this.stop||("switch"==this.animationName?this.switch():"scale"==this.animationName&&this.scale())},methods:{switch(){let e=this,t=e.$refs.animationWrapper,i=t.children.length,o=t.children,s=e.animationName+"First",a=e.animationName+"Second";for(let l=0;l<i;l++){let t=o[l];t.index=l,t.state=0,t.style.transform="translateX(100%)",t.style.animationFillMode="backwards",t.style.animationDuration=e.duration,t.style.animationTimingFunction=e.animationTimingFunction,l>0&&(t.style.zIndex=0,t.style.opacity=0),i>1&&t.addEventListener("animationend",e=>{let t=e.currentTarget,l=t.index+1;l>=i&&(l=0);let n=o[l];if(1==t.state){let e=t.getAnimations();e&&e.length>0&&e.forEach(e=>{e.cancel()});let i=n.getAnimations();i&&i.length>0&&i.forEach(e=>{e.cancel()}),t.style.animationName=a,t.style.zIndex=0,t.state=2,n.style.animationName=s,n.state=1,n.style.zIndex=1}else t.state=0,t.style.zIndex=0})}1==i&&(o[0].style.animationIterationCount="infinite"),o[0].style.animationName=s,o[0].state=1},scale(){let e=this,t=e.$refs.animationWrapper,i=t.children.length,o=t.children,s=e.animationName;const a=e=>{let t=e.currentTarget,a=t.index+1;a>=i&&(a=0);let l,n,r=o[a];i>2&&(n=t.index-1,n<0&&(n=i-1),l=o[n]),1==t.state&&(t.style.animationName="",t.style.zIndex=0,t.style.opacity=0,t.state=0,l&&(l.style.animationName="",l.style.zIndex=0,l.style.opacity=0,l.state=0),r.style.animationName=s,r.state=1,r.style.zIndex=1,r.style.opacity=1)};for(let l=0;l<i;l++){let t=o[l];t.index=l,t.state=0,t.style.transformOrigin="center",t.style.animationFillMode="forwards",t.style.animationDuration=e.duration,t.style.animationTimingFunction=e.animationTimingFunction,l>0&&(t.style.zIndex=0,t.style.opacity=0),i>1&&t.addEventListener("animationend",a)}1==i&&(o[0].style.animationIterationCount="infinite"),i>0&&(o[0].style.animationName=s,o[0].style.zIndex=1,o[0].style.opacity=1,o[0].state=1)}}},ii=ti;var oi=(0,v.A)(ii,Zt,ei,!1,null,"80e651e6",null);const si=oi.exports,ai={name:"LayoutLeftRightFooter",components:{Animator:si},computed:{...(0,a.L8)(["getLiveStateInfo","getLiveRoomInfo","getUserInfo","getLiveRoomStyle","isFromApp","isMobile","getLiveRoomTheme","getLiveChapterItem","getOnlineUserTotal","getRobotTotal"]),getSmallAdList(){return this.getLiveRoomTheme.liveSlideAdvSmallList&&this.getLiveRoomTheme.liveSlideAdvSmallList.filter(e=>!e.delFlag)||null}},mounted(){let e=this;const t=()=>{let t=e.$refs.adSmallContainer,i=e.$refs.swiper;if(t){let e=t.getBoundingClientRect().height;t.style.width=e+"px",i&&(i.style.width="calc(100% - "+e+"px")}};e.BUS.calcSmallAdElmWidth=t,e.$nextTick(()=>{setTimeout(()=>{t()},200)})},methods:{openLink(e){this.BUS.openLink(e)}}},li=ai;var ni=(0,v.A)(li,Jt,Xt,!1,null,"32ae32a2",null);const ri=ni.exports;var ci=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dock-panel"},[3!=e.getUserInfo.type||e.getUserInfo.userDeptList&&!(e.getUserInfo.userDeptList.length<=0)||e.isMobile||e.isFromApp?e._e():t("div",{staticClass:"show-dock-btn",on:{mouseover:function(t){e.showDock=!0}}},[t("svg-icon",{staticClass:"icon",attrs:{"icon-class":"setting"},on:{click:function(t){e.showDock=!e.showDock}}})],1),3!=e.getUserInfo.type||e.getUserInfo.userDeptList&&!(e.getUserInfo.userDeptList.length<=0)||!e.showDock||e.isMobile||e.isFromApp?e._e():t("div",{staticClass:"dock-bar",on:{mousemove:e.dockMouseMove,mouseleave:e.dockMouseLeave}},[t("div",{staticClass:"dock-item multiple"},[t("div",[t("div",[e._v("允许发言"),t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.handleRowChange(e.getLiveRoomInfo)}},model:{value:e.getLiveRoomInfo.allowSpeech,callback:function(t){e.$set(e.getLiveRoomInfo,"allowSpeech",t)},expression:"getLiveRoomInfo.allowSpeech"}})],1),t("div",[e._v("团队管理"),t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.handleRowChange(e.getLiveRoomInfo)}},model:{value:e.getLiveRoomInfo.isTeamAdmin,callback:function(t){e.$set(e.getLiveRoomInfo,"isTeamAdmin",t)},expression:"getLiveRoomInfo.isTeamAdmin"}})],1),t("div",[e._v("马甲发言"),t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.handleRowChange(e.getLiveRoomInfo)}},model:{value:e.getLiveRoomInfo.isVirtualMsg,callback:function(t){e.$set(e.getLiveRoomInfo,"isVirtualMsg",t)},expression:"getLiveRoomInfo.isVirtualMsg"}})],1)])]),t("div",{staticClass:"dock-item multiple"},[t("div",[t("div",[e._v("需要密码"),t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(t){return e.handleRowChange(e.getLiveRoomInfo,e.getLiveRoomInfo.needPswd)}},model:{value:e.getLiveRoomInfo.needPswd,callback:function(t){e.$set(e.getLiveRoomInfo,"needPswd",t)},expression:"getLiveRoomInfo.needPswd"}})],1),e.getLiveRoomInfo.needPswd?t("el-input",{staticClass:"input-mini",attrs:{size:"mini",placeholder:"请输入密码"},model:{value:e.getLiveRoomInfo.livePswd,callback:function(t){e.$set(e.getLiveRoomInfo,"livePswd",t)},expression:"getLiveRoomInfo.livePswd"}},[t("el-button",{staticClass:"input-btn-mini",attrs:{slot:"append",size:"mini",icon:"el-icon-check"},on:{click:function(t){return e.handleRowChange(e.getLiveRoomInfo)}},slot:"append"})],1):e._e()],1)]),t("div",{staticClass:"dock-item",on:{click:function(t){return e.handleOpenDialog(e.getLiveRoomInfo,"lecturer","直播间讲师管理","1200px",!1)}}},[t("svg-icon",{attrs:{"icon-class":"lecture"}}),e._v("讲师管理")],1),t("div",{staticClass:"dock-item",on:{click:function(t){return e.handleOpenDialog(e.getLiveRoomInfo,"chapter","直播间节目单管理","98%",!1)}}},[t("svg-icon",{attrs:{"icon-class":"list"}}),e._v("节目单管理")],1),t("div",{staticClass:"dock-item",on:{click:function(t){return e.handleOpenDialog(e.getLiveRoomInfo,"userForbiddenChatSet","直播间按用户禁言管理","1200px",!1)}}},[t("svg-icon",{attrs:{"icon-class":"disable-chat"}}),e._v("按用户禁言管理")],1),t("div",{staticClass:"dock-item",on:{click:function(t){return e.handleOpenDialog(e.getLiveRoomInfo,"userKickOutSet","直播间按用户踢人管理","1200px",!1)}}},[t("svg-icon",{attrs:{"icon-class":"禁止"}}),e._v("按用户踢人管理")],1),t("div",{staticClass:"dock-item",on:{click:function(t){return e.handleOpenDialog(e.getLiveRoomInfo,"levelForbiddenChatSet","直播间按等级禁言管理","1200px",!1)}}},[t("svg-icon",{attrs:{"icon-class":"disable-chat-level"}}),e._v("按等级禁言管理")],1),t("div",{staticClass:"dock-item",on:{click:function(t){return e.handleOpenDialog(e.getLiveRoomInfo,"levelKickOutSet","直播间按等级踢人管理","1200px",!1)}}},[t("svg-icon",{attrs:{"icon-class":"禁止等级"}}),e._v("按等级踢人管理")],1),t("div",{staticClass:"dock-item",on:{click:function(t){return e.handleOpenDialog(e.getLiveRoomInfo,"userRoomAuthoSet","分配直播间权限","1200px",!1)}}},[t("svg-icon",{attrs:{"icon-class":"申请权限"}}),e._v("分配权限")],1),t("div",{staticClass:"dock-item",on:{click:function(t){return e.handleOpenDialog(e.getLiveRoomInfo,"robotSet","设置直播间机器人","800px",!1)}}},[t("svg-icon",{attrs:{"icon-class":"机器人"}}),e._v("机器人设置")],1),t("div",{staticClass:"dock-item",on:{click:function(t){return e.handleOpenDialog(e.getLiveRoomInfo,"forbiddenSet","直播间等级禁止设置","1100px",!1)}}},[t("svg-icon",{attrs:{"icon-class":"禁入"}}),e._v("等级禁止设置")],1),t("div",{staticClass:"dock-item",on:{click:function(t){return e.handleOpenDialog(e.getLiveRoomInfo,"sensitiveWordSet","铭感词设置","1100px",!1)}}},[t("svg-icon",{attrs:{"icon-class":"敏感关键字"}}),e._v("敏感词设置")],1),t("div",{staticClass:"dock-item",on:{click:function(t){return e.handleOpenDialog(e.getLiveRoomInfo,"roomExtValueSetting","附加信息设置","500px",!1)}}},[t("svg-icon",{attrs:{"icon-class":"分类管理"}}),e._v("附加设置")],1)]),e.showDialog?t("el-dialog",{staticClass:"dynamic-dialog",attrs:{title:e.currentTitle,visible:e.showDialog,width:e.currentWidth,"append-to-body":!1,"destroy-on-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.showDialog=t}}},[t(e.currentComponent,{ref:"curComp",tag:"component",attrs:{data:e.getDialogData()},on:{close:e.closeDialog}})],1):e._e()],1)},mi=[],di=function(){var e=this,t=e._self._c;return t("div",[t("el-form",{staticClass:"demo-form-inline",attrs:{model:e.form,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"选择方式",prop:"type"}},[t("el-radio-group",{on:{change:e.handleTypeChange},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[t("el-radio",{attrs:{label:0}},[e._v("手工设置数量")]),t("el-radio",{attrs:{label:1}},[e._v("按时间自动设置")])],1)],1),0==e.form.type&&e.manualList&&e.manualList[0]?t("el-form-item",{attrs:{label:"机器人数量"}},[t("el-input-number",{staticStyle:{"max-width":"350px"},attrs:{placeholder:"请输入机器人数量",min:0},model:{value:e.manualList[0].count,callback:function(t){e.$set(e.manualList[0],"count",t)},expression:"manualList[0].count"}})],1):e._e()],1),1==e.form.type?t("el-table",{staticClass:"table-class",attrs:{data:e.autoList,size:"mini","element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[t("el-table-column",{attrs:{label:"序号",type:"index",align:"center"}}),t("el-table-column",{attrs:{label:"机器人数量",prop:"count"},scopedSlots:e._u([{key:"default",fn:function({row:i}){return[t("el-input-number",{attrs:{placeholder:"请输入机器人数量",min:0},model:{value:i.count,callback:function(t){e.$set(i,"count",t)},expression:"row.count"}})]}}],null,!1,1507303509)}),t("el-table-column",{attrs:{label:"生效时间",prop:"applyTime"},scopedSlots:e._u([{key:"default",fn:function({row:i}){return[t("DateTimePicker",{attrs:{layoutModel:"time",showSecond:!1,isRange:!1,autoFillSecond:!1},model:{value:i.applyTime,callback:function(t){e.$set(i,"applyTime",t)},expression:"row.applyTime"}})]}}],null,!1,664812024)}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-delete"},on:{click:function(t){return e.delTime(i.$index)}}},[e._v("删除")])]}}],null,!1,3665431932)})],1):e._e(),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["1"==e.form.type?t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addTime()}}},[e._v("添加")]):e._e(),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleSubmit}},[e._v("保 存")]),t("el-button",{on:{click:e.handleClose}},[e._v("关 闭")])],1)],1)},ui=[];function hi(e){return(0,gt.A)({url:"/live/robotTimeSet/list",method:"post",data:e})}function gi(e){return(0,gt.A)({url:"/live/robotTimeSet/updateBatch",method:"post",data:e})}const pi={name:"RobotSet",props:{data:{type:Object}},components:{DateTimePicker:wt.A},data(){return{loading:!1,roomInfo:this.data,form:{type:0},manualList:[],autoList:[],fullList:[]}},methods:{init(){this.roomInfo=this.data,this.form.roomId=this.roomInfo.id,this.getList()},handleTypeChange(){0==this.form.type?this.manualList[0].status=1:this.manualList[0].status=0},getList(){var e={roomId:this.roomInfo.id};hi(e).then(e=>{if(this.loading=!1,e&&e.data&&e.data){this.fullList=e.data,this.manualList.splice(0,this.manualList.length),this.autoList.splice(0,this.autoList.length);let t=this.fullList.filter(e=>0==e.type),i=this.fullList.filter(e=>1==e.type);i=i.sort((e,t)=>e.applyTime>t.applyTime?1:e.applyTime==t.applyTime?0:-1),this.autoList.push(...i),t&&0!=t.length?this.manualList.push(...t):this.manualList.push({type:0,roomId:this.roomInfo.id,count:0,applyTime:"00:00",status:i.length>0?0:1}),1==this.manualList[0].status?this.form.type=0:this.form.type=1}})},handleClose(){this.form={},this.$emit("close")},addTime(){let e={applyTime:null,count:0,roomId:this.roomInfo.id,type:1,id:null};this.autoList.push(e)},delTime(e){let t=this.autoList;t.splice(e,1);this.autoList=t.sort((e,t)=>e.applyTime>t.applyTime?1:e.applyTime==t.applyTime?0:-1)},handleSubmit(){this.loading=!0;var e=[];this.manualList||(this.manualList=[{type:0,roomId:this.roomInfo.id,count:0,applyTime:"00:00",status:0}]),0===this.form.type?this.manualList[0].status=1:this.manualList[0].status=0,e.push(...this.manualList),e.push(...this.autoList),e=e.filter(e=>0==e.type||null!=e.applyTime),gi(e).then(e=>{this.loading=!1,"200"===e.code&&(this.$modal.msgSuccess("保存成功！"),this.$emit("close"))}).catch(e=>{this.loading=!1,this.$modal.msgError("保存失败！")})}}},vi=pi;var fi=(0,v.A)(vi,di,ui,!1,null,"40e0043b",null);const bi=fi.exports;var yi=function(){var e=this,t=e._self._c;return t("div",{staticClass:"editpage-container"},[t("div",{staticClass:"mb20"},[t("span",{staticStyle:{"margin-right":"30px"}},[e._v(e._s(e.row.name))]),t("el-radio",{attrs:{label:1},model:{value:e.forbiddenType,callback:function(t){e.forbiddenType=t},expression:"forbiddenType"}},[e._v("登录权限")]),t("el-radio",{attrs:{label:2},model:{value:e.forbiddenType,callback:function(t){e.forbiddenType=t},expression:"forbiddenType"}},[e._v("发言权限")])],1),e._l([1,2],function(i){return i==e.forbiddenType?t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],key:"fs_type_table_"+i,staticClass:"table-class",attrs:{data:e.forbiddenSet[i],size:"mini",border:"",fit:"","highlight-current-row":""}},[t("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50"}}),t("el-table-column",{attrs:{label:"用户等级",align:"center",prop:"levelName"}}),t("el-table-column",{attrs:{label:"允许/禁止",align:"center",prop:"enable"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0,"inactive-color":"#EF3735"},model:{value:i.row.enable,callback:function(t){e.$set(i.row,"enable",t)},expression:"scope.row.enable"}})]}}],null,!0)}),t("el-table-column",{attrs:{label:"开始时间",align:"center",prop:"beginTime"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("DateTimePicker",{attrs:{layoutModel:"time",showSecond:!1,isRange:!1,autoFillSecond:!1},model:{value:i.row.beginTime,callback:function(t){e.$set(i.row,"beginTime",t)},expression:"scope.row.beginTime"}})]}}],null,!0)}),t("el-table-column",{attrs:{label:"结束时间",align:"center",prop:"endTime"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("DateTimePicker",{attrs:{layoutModel:"time",showSecond:!1,defaultStartSecond:"59",isRange:!1,autoFillSecond:!1},model:{value:i.row.endTime,callback:function(t){e.$set(i.row,"endTime",t)},expression:"scope.row.endTime"}})]}}],null,!0)})],1):e._e()}),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleUpdate()}}},[e._v("保存")]),t("el-button",{on:{click:e.handleClose}},[e._v("关 闭")])],1)],2)},Li=[];function Si(e){return(0,gt.A)({url:"/live/forbiddenSet/listByForbiddenType",method:"post",data:e,headers:{skipRepeats:!0}})}function ki(e){return(0,gt.A)({url:"/live/forbiddenSet/updateBatch",method:"post",data:e})}const Ci={name:"ForbiddenSet",props:{data:{type:Object}},components:{DateTimePicker:wt.A},watch:{data(e){this.row=e}},data(){return{row:this.data,forbiddenType:1,loading:!0,forbiddenSet:{},forbiddenSetLoginList:[],forbiddenSetChatList:[]}},methods:{init(){this.getForbiddenList()},handleClose(){this.$emit("close")},getForbiddenList(){this.loading=!0;var e={roomId:this.row.id};this.forbiddenSetList=[],Si(e).then(e=>{e&&e.data&&(this.forbiddenSet=e.data),this.loading=!1})},handleUpdate(e){var t=[...this.forbiddenSet["1"],...this.forbiddenSet["2"]];ki(t).then(e=>{this.$modal.msgSuccess("准入信息保存成功"),this.$emit("close")})}}},Ii=Ci;var Ri=(0,v.A)(Ii,yi,Li,!1,null,"18da86fd",null);const wi=Ri.exports;var Ai=function(){var e=this,t=e._self._c;return t("div",{staticClass:"editpage-container"},[t("div",{staticClass:"course-name"},[e._v("直播间："+e._s(e.row.name))]),t("div",{staticClass:"edit-container"},[t("div",{staticClass:"edit-panel"},[t("div",[e._v("输入要新加/删除的敏感词")]),t("div",{staticClass:"input-container"},[t("el-input",{staticClass:"input-area",attrs:{type:"textarea",resize:"none",placeholder:"请输入要新加/删除的敏感词(以空格、换行、顿号、逗号、分号、冒号隔开)"},model:{value:e.newSensitiveWords,callback:function(t){e.newSensitiveWords=t},expression:"newSensitiveWords"}})],1)]),t("div",{staticClass:"middle-panel"},[t("i",{staticClass:"el-icon-d-arrow-right",on:{click:e.handleSubmit}}),t("i",{staticClass:"el-icon-close",style:{color:"red"},on:{click:e.handleDeleteBatch}})]),t("div",{staticClass:"edit-panel"},[t("div",{staticClass:"filter-container"},[t("span",[e._v("已添加的敏感词("+e._s(e.total)+")")]),t("span",{staticClass:"word-filter"},[t("el-input",{attrs:{clearable:"",size:"mini","prefix-icon":"el-icon-search",placeholder:"输入查询词"},model:{value:e.filterWord,callback:function(t){e.filterWord=t},expression:"filterWord"}})],1)]),t("div",e._l(e.filteredWords(),function(i){return t("el-tag",{key:i.roomId+"_"+i.sensitiveWord,staticClass:"sensitive-word",attrs:{closable:""},on:{close:function(t){return e.handleDelete(i)}}},[e._v(" "+e._s(i.sensitiveWord)+" ")])}),1)])]),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.handleClose}},[e._v("关 闭")])],1)])},_i=[];function xi(e){return e&&(e=(0,M.Cn)(e)),e["$sort"]={orders:[{property:"createdTime",direction:"DESC"}]},(0,gt.A)({url:"/live/sensitiveWords/list",method:"post",data:e})}function Ti(e){return(0,gt.A)({url:"/live/sensitiveWords/updateBatch",method:"post",data:e})}function Pi(e){return(0,gt.A)({url:"/live/sensitiveWords/deleteBatch",method:"post",data:e})}function Fi(e){return(0,gt.A)({url:"/live/sensitiveWords/delete",method:"post",data:e})}const Mi={name:"SensitiveWordSet",props:{data:{type:Object}},watch:{data(e){this.row=e}},data(){return{row:this.data,loading:!1,sensitiveWordList:[],newSensitiveWords:"",total:0,filterWord:""}},activated(){this.getList()},created(){this.getList()},methods:{filteredWords(){return this.sensitiveWordList.filter(e=>!this.filterWord||e.sensitiveWord.indexOf(this.filterWord)>=0)},getList(){let e={pageNumber:1,pageSize:1e4,roomId:this.row.id};xi(e).then(e=>{this.sensitiveWordList=e.data.records,this.total=Number(e.data.total)})},handleClose(){this.$emit("close")},handleSubmit(){let e={roomId:this.row.id,sensitiveWord:this.newSensitiveWords};Ti(e).then(e=>{this.$modal.msgSuccess("添加成功"),this.newSensitiveWords="",this.getList()})},handleDeleteBatch(){let e={roomId:this.row.id,sensitiveWord:this.newSensitiveWords};Pi(e).then(e=>{this.$modal.msgSuccess("删除成功"),this.newSensitiveWords="",this.getList()})},handleDelete(e){Fi(e).then(e=>{this.$modal.msgSuccess("成功删除"),this.getList()})}}},Ui=Mi;var Oi=(0,v.A)(Ui,Ai,_i,!1,null,"dbf70e12",null);const Ni=Oi.exports;var $i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"editpage-container"},[t("div",{staticClass:"course-name"},[e._v("直播间："+e._s(e.row.name))]),t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"110px"}},[t("el-row",{staticClass:"search-panel",attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{staticClass:"full-width flex-row",attrs:{label:"按团队(可多选)"}},[t("el-select",{staticClass:"full-width",attrs:{multiple:"",placeholder:"请选择团队"},model:{value:e.form.deptIds,callback:function(t){e.$set(e.form,"deptIds",t)},expression:"form.deptIds"}},e._l(e.deptList,function(e){return t("el-option",{key:e.deptId,attrs:{label:e.deptName,value:e.deptId}})}),1)],1),t("el-form-item",{staticClass:"full-width flex-row",attrs:{label:"按等级(可多选)"}},[t("el-select",{staticClass:"full-width",attrs:{multiple:"",placeholder:"请选择等级"},model:{value:e.form.levelIds,callback:function(t){e.$set(e.form,"levelIds",t)},expression:"form.levelIds"}},e._l(e.levelList,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),t("el-col",{attrs:{span:9}},[t("el-form-item",{staticClass:"full-editor"},[t("el-input",{attrs:{type:"textarea",rows:"1",placeholder:"请输入账号范围(多条件格式：XXX001-XXX050,ZZ0100-ZZ3500,YY0001,WW02*)"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1)],1),t("el-col",{staticClass:"search-bar",attrs:{span:3}},[t("el-button",{attrs:{icon:"el-icon-search"},on:{click:e.getList}},[e._v("查询")])],1)],1)],1),t("div",{staticClass:"full-width flex-row"},[t("div",{staticClass:"user-filter-container"},[t("div",[e._v("无权限用户("+e._s(e.filterNoAuthoAccounts.length||0)+")")]),t("span",{staticClass:"user-filter"},[t("el-input",{attrs:{clearable:"",size:"mini","prefix-icon":"el-icon-search",placeholder:"输入查询账号"},model:{value:e.noAuthoAccountFilter,callback:function(t){e.noAuthoAccountFilter=t},expression:"noAuthoAccountFilter"}})],1),t("span",{staticClass:"user-filter btn-bar"},[t("el-checkbox",{attrs:{indeterminate:e.isIndeterminateNoAutho},on:{change:e.handleCheckAllNoAuthoChange},model:{value:e.selectAllNoAutho,callback:function(t){e.selectAllNoAutho=t},expression:"selectAllNoAutho"}},[e._v("全选")])],1)]),t("div",{staticClass:"user-filter-container"},[t("span",[e._v("有权限用户("+e._s(e.filterAccounts.length||0)+")")]),t("span",{staticClass:"user-filter"},[t("el-input",{attrs:{clearable:"",size:"mini","prefix-icon":"el-icon-search",placeholder:"输入查询账号"},model:{value:e.accountFilter,callback:function(t){e.accountFilter=t},expression:"accountFilter"}})],1),t("span",{staticClass:"user-filter btn-bar"},[t("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllAuthoChange},model:{value:e.selectAllAutho,callback:function(t){e.selectAllAutho=t},expression:"selectAllAutho"}},[e._v("全选")])],1)])]),t("div",{staticClass:"edit-container"},[t("div",{staticClass:"edit-panel"},[t("el-checkbox-group",{on:{change:e.handleCheckedNoAuthoChange},model:{value:e.checkedNoAuthos,callback:function(t){e.checkedNoAuthos=t},expression:"checkedNoAuthos"}},e._l(e.filterNoAuthoAccounts,function(i){return t("el-tag",{key:i.userId,staticClass:"user-names"},[t("el-checkbox",{attrs:{value:i,label:i}},[e._v(e._s(i.userName)+"/"+e._s(i.parentUserName)+"/"+e._s(i.deptName)+"/"+e._s(i.levelName))])],1)}),1)],1),t("div",{staticClass:"middle-panel"},[t("i",{staticClass:"el-icon-d-arrow-right",on:{click:e.authorize}}),t("i",{staticClass:"el-icon-d-arrow-left",on:{click:e.unauthorize}})]),t("div",{staticClass:"edit-panel"},[t("el-checkbox-group",{on:{change:e.handleCheckedAuthoChange},model:{value:e.checkedAuthos,callback:function(t){e.checkedAuthos=t},expression:"checkedAuthos"}},e._l(e.filterAccounts,function(i){return t("el-tag",{key:i.userId,staticClass:"user-names"},[t("el-checkbox",{attrs:{value:i,label:i}},[e._v(e._s(i.userName)+"/"+e._s(i.parentUserName)+"/"+e._s(i.deptName)+"/"+e._s(i.levelName))])],1)}),1)],1)]),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("div",{staticClass:"user-page-container"},[t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.noAuthoTotal>0,expression:"noAuthoTotal>0"}],staticClass:"full-width flex-row mg-0 pd-0",attrs:{total:e.noAuthoTotal,page:e.form.noAuthoPageNumber,limit:e.form.noAuthoPageSize,layout:"total, prev, pager, next",pageSizes:[50,100,200,300,500,1e3]},on:{"update:page":function(t){return e.$set(e.form,"noAuthoPageNumber",t)},"update:limit":function(t){return e.$set(e.form,"noAuthoPageSize",t)},pagination:e.getUnAuthorizedList}})],1),t("div",{staticClass:"user-page-container"},[t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.authoTotal>0,expression:"authoTotal>0"}],staticClass:"full-width flex-row mg-0 pd-0",attrs:{total:e.authoTotal,page:e.form.authoPageNumber,limit:e.form.authoPageSize,layout:"total, prev, pager, next",pageSizes:[50,100,200,300,500,1e3]},on:{"update:page":function(t){return e.$set(e.form,"authoPageNumber",t)},"update:limit":function(t){return e.$set(e.form,"authoPageSize",t)},pagination:e.getAuthorizedList}})],1)])],1)},Ei=[];function Bi(e){return e&&(e=(0,M.Cn)(e)),(0,gt.A)({url:"/base/sysDept/list",method:"post",data:e||{},headers:{skipRepeats:!0}})}function ji(e){return(0,gt.A)({url:"/base/level/list",method:"post",data:e||{}})}function Di(e){return(0,gt.A)({url:"/base/level/listWithForbidden",method:"post",data:e||{}})}function Ki(e){return(0,gt.A)({url:"/base/level/listWithKickOut",method:"post",data:e||{}})}function zi(e){return(0,gt.A)({url:"/base/user/listUsersAuthorizedRoom",method:"post",data:e})}function Vi(e){return(0,gt.A)({url:"/base/user/listRoomForbiddenUsers",method:"post",data:e})}function qi(e){return(0,gt.A)({url:"/base/user/listRoomKickedOutUsers",method:"post",data:e})}function Hi(e){return e&&(e=(0,M.Cn)(e)),(0,gt.A)({url:"/live/room/list",method:"post",data:e||{}})}function Wi(e){return(0,gt.A)({url:"/live/room/update",method:"post",data:e})}function Gi(e){return(0,gt.A)({url:"/live/room/roomUserAuthorize",method:"post",data:e})}function Qi(e){return(0,gt.A)({url:"/live/room/roomUserUnAuthorize",method:"post",data:e})}function Yi(e){return(0,gt.A)({url:"/live/room/roomUserForbidden",method:"post",data:e})}function Ji(e){return(0,gt.A)({url:"/live/room/roomUserUnforbidden",method:"post",data:e})}function Xi(e){return(0,gt.A)({url:"/live/room/roomUserKickout",method:"post",data:e})}function Zi(e){return(0,gt.A)({url:"/live/room/roomUserUnkickout",method:"post",data:e})}function eo(e){return(0,gt.A)({url:"/live/room/roomLevelForbidden",method:"post",data:e})}function to(e){return(0,gt.A)({url:"/live/room/roomLevelUnforbidden",method:"post",data:e})}function io(e){return(0,gt.A)({url:"/live/room/roomLevelKickout",method:"post",data:e})}function oo(e){return(0,gt.A)({url:"/live/room/roomLevelUnkickout",method:"post",data:e})}var so=i(79247);const ao={name:"UserRoomAuthoSet",props:{data:{type:Object}},components:{Pagination:so.A},data(){return{row:this.data,loading:!1,levelList:[],deptList:[],userList:[],authoUserList:[],unAuthUserList:[],accountFilter:"",noAuthoAccountFilter:"",form:{authoPageNumber:1,authoPageSize:300,noAuthoPageNumber:1,noAuthoPageSize:300,roomId:this.data.id,deptIds:[],levelIds:[],accountRanges:null,userName:null},authoTotal:0,noAuthoTotal:0,selectAllAutho:0,selectAllNoAutho:0,checkedAuthos:[],checkedNoAuthos:[],isIndeterminate:!1,isIndeterminateNoAutho:!1}},computed:{filterAccounts(){return this.authoUserList.filter(e=>(!this.accountFilter||e.userName.indexOf(this.accountFilter)>=0)&&e.isAuthorized)},filterNoAuthoAccounts(){return this.unAuthUserList.filter(e=>(!this.noAuthoAccountFilter||e.userName.indexOf(this.noAuthoAccountFilter)>=0)&&!e.isAuthorized)}},methods:{init(){this.getLevelList(),this.getTeamList(),this.getAuthorizedList(),this.getUnAuthorizedList()},handleCheckAllNoAuthoChange(e){this.checkedNoAuthos=e?this.filterNoAuthoAccounts:[],this.isIndeterminateNoAutho=!1},handleCheckedNoAuthoChange(e){let t=e.length;this.selectAllNoAutho=t===this.filterNoAuthoAccounts.length,this.isIndeterminateNoAutho=t>0&&t<this.filterNoAuthoAccounts.length},handleCheckAllAuthoChange(e){this.checkedAuthos=e?this.filterAccounts:[],this.isIndeterminate=!1},handleCheckedAuthoChange(e){let t=e.length;this.selectAllAutho=t===this.filterAccounts.length,this.isIndeterminate=t>0&&t<this.filterAccounts.length},getTeamList(){Bi({noAuthoPageNumber:1,noAuthoPageSize:500}).then(e=>{this.deptList=e.data.records})},getLevelList(){this.levelList=[],ji({}).then(e=>{e.data.records&&e.data.records.length>0&&(this.levelList=e.data.records)})},getList(){this.form.authoPageNumber=1,this.form.authoPageSize=300,this.form.noAuthoPageNumber=1,this.form.noAuthoPageSize=300,this.getUnAuthorizedList(),this.getAuthorizedList()},getUnAuthorizedList(){if(this.form.roomId){let e=Object.assign({},this.form);e.isAuthorized=!1,e.pageNumber=this.form.noAuthoPageNumber,e.pageSize=this.form.noAuthoPageSize,zi(e).then(e=>{this.unAuthUserList=e.data.records,this.noAuthoTotal=Number(e.data.total)})}},getAuthorizedList(){if(this.form.roomId){let e=Object.assign({},this.form);e.isAuthorized=!0,e.pageNumber=this.form.authoPageNumber,e.pageSize=this.form.authoPageSize,zi(e).then(e=>{this.authoUserList=e.data.records,this.authoTotal=Number(e.data.total)})}},handleClose(){this.$emit("close")},authorize(){let e,t=[...this.checkedNoAuthos.map(e=>({userId:e.userId,userName:e.userName}))];t&&0==t.length||(this.form.noAuthoPageNumber=1,e=this.selectAllNoAutho?{roomId:this.row.id,queryDTO:this.form,allCheck:this.selectAllNoAutho,userList:[t[0]]}:{roomId:this.row.id,userList:t},e.roomId&&t&&t.length>0&&Gi(e).then(e=>{this.$modal.msgSuccess("添加成功"),this.checkedNoAuthos=[],this.getList()}))},unauthorize(){let e,t=[...this.checkedAuthos.map(e=>({userId:e.userId,userName:e.userName}))];t&&0==t.length||(this.form.noAuthoPageNumber=1,e=this.selectAllAutho?{roomId:this.row.id,queryDTO:this.form,allCheck:this.selectAllAutho,userList:[t[0]]}:{roomId:this.row.id,userList:t},e.roomId&&e.userList&&e.userList.length>0&&Qi(e).then(e=>{this.$modal.msgSuccess("取消成功"),this.checkedAuthos=[],this.getList()}))}}},lo=ao;var no=(0,v.A)(lo,$i,Ei,!1,null,"492f1ffc",null);const ro=no.exports;var co=function(){var e=this,t=e._self._c;return t("div",{staticClass:"editpage-container"},[t("div",{staticClass:"course-name"},[e._v("直播间："+e._s(e.row.name))]),t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"110px"}},[t("el-row",{staticClass:"search-panel",attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{staticClass:"full-width flex-row",attrs:{label:"按团队(可多选)"}},[t("el-select",{staticClass:"full-width",attrs:{multiple:"",placeholder:"请选择团队"},model:{value:e.form.deptIds,callback:function(t){e.$set(e.form,"deptIds",t)},expression:"form.deptIds"}},e._l(e.deptList,function(e){return t("el-option",{key:e.deptId,attrs:{label:e.deptName,value:e.deptId}})}),1)],1),t("el-form-item",{staticClass:"full-width flex-row",attrs:{label:"按等级(可多选)"}},[t("el-select",{staticClass:"full-width",attrs:{multiple:"",placeholder:"请选择等级"},model:{value:e.form.levelIds,callback:function(t){e.$set(e.form,"levelIds",t)},expression:"form.levelIds"}},e._l(e.levelList,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),t("el-col",{attrs:{span:9}},[t("el-form-item",{staticClass:"full-editor"},[t("el-input",{attrs:{type:"textarea",rows:"1",placeholder:"请输入账号范围(多条件格式：XXX001-XXX050,ZZ0100-ZZ3500,YY0001,WW02*)"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1)],1),t("el-col",{staticClass:"search-bar",attrs:{span:3}},[t("el-button",{attrs:{icon:"el-icon-search"},on:{click:e.getList}},[e._v("查询")])],1)],1)],1),t("div",{staticClass:"full-width flex-row"},[t("div",{staticClass:"user-filter-container"},[t("div",[e._v("未禁言用户("+e._s(e.filterUnforbiddenAccounts.length||0)+")")]),t("span",{staticClass:"user-filter"},[t("el-input",{attrs:{clearable:"",size:"mini","prefix-icon":"el-icon-search",placeholder:"输入查询账号"},model:{value:e.unForbiddenFilter,callback:function(t){e.unForbiddenFilter=t},expression:"unForbiddenFilter"}})],1),t("span",{staticClass:"user-filter btn-bar"},[t("el-checkbox",{attrs:{indeterminate:e.isIndeterminateUnforbidden},on:{change:e.handleCheckAllUnForbiddenChange},model:{value:e.selectAllUnforbidden,callback:function(t){e.selectAllUnforbidden=t},expression:"selectAllUnforbidden"}},[e._v("全选")])],1)]),t("div",{staticClass:"user-filter-container"},[t("span",[e._v("已禁言用户("+e._s(e.filterForbiddenAccounts.length||0)+")")]),t("span",{staticClass:"user-filter"},[t("el-input",{attrs:{clearable:"",size:"mini","prefix-icon":"el-icon-search",placeholder:"输入查询账号"},model:{value:e.forbiddenFilter,callback:function(t){e.forbiddenFilter=t},expression:"forbiddenFilter"}})],1),t("span",{staticClass:"user-filter btn-bar"},[t("el-checkbox",{attrs:{indeterminate:e.isIndeterminateForbidden},on:{change:e.handleCheckAllForbiddenChange},model:{value:e.selectAllForbidden,callback:function(t){e.selectAllForbidden=t},expression:"selectAllForbidden"}},[e._v("全选")])],1)])]),t("div",{staticClass:"edit-container"},[t("div",{staticClass:"edit-panel"},[t("el-checkbox-group",{on:{change:e.handleCheckUnForbiddenChange},model:{value:e.checkedUnforbidden,callback:function(t){e.checkedUnforbidden=t},expression:"checkedUnforbidden"}},e._l(e.filterUnforbiddenAccounts,function(i){return t("el-tag",{key:i.userId,staticClass:"user-names"},[t("el-checkbox",{attrs:{value:i,label:i}},[e._v(e._s(i.userName)+"/"+e._s(i.parentUserName)+"/"+e._s(i.deptName)+"/"+e._s(i.levelName))])],1)}),1)],1),t("div",{staticClass:"middle-panel"},[t("el-select",{staticClass:"middle-select",attrs:{placeholder:"请选择禁言时长"},model:{value:e.duration,callback:function(t){e.duration=t},expression:"duration"}},e._l([5,10,15,20,25,30,40,50,60,90,120,720,1440,2880,4320,5760,7200],function(e){return t("el-option",{key:"forbidden_duration_"+e,attrs:{label:e<=720?e+"分钟":e/1440+"天",value:e}})}),1),t("i",{staticClass:"el-icon-d-arrow-right",on:{click:e.forbidden}}),t("i",{staticClass:"el-icon-d-arrow-left",on:{click:e.unforbidden}})],1),t("div",{staticClass:"edit-panel"},[t("el-checkbox-group",{on:{change:e.handleCheckForbiddenChange},model:{value:e.checkedForbidden,callback:function(t){e.checkedForbidden=t},expression:"checkedForbidden"}},e._l(e.filterForbiddenAccounts,function(i){return t("el-tag",{key:i.userId,staticClass:"user-names"},[t("el-checkbox",{attrs:{value:i,label:i}},[e._v(e._s(i.userName)+"/"+e._s(i.parentUserName)+"/"+e._s(i.deptName)+"/"+e._s(i.levelName)+"(还有"+e._s(i.timeRemaining)+"秒)")])],1)}),1)],1)]),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("div",{staticClass:"user-page-container"},[t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.unForbiddenTotal>0,expression:"unForbiddenTotal>0"}],staticClass:"full-width flex-row mg-0 pd-0",attrs:{total:e.unForbiddenTotal,page:e.form.unForbiddenPageNumber,limit:e.form.unForbiddenPageSize,layout:"total, prev, pager, next",pageSizes:[50,100,200,300,500,1e3]},on:{"update:page":function(t){return e.$set(e.form,"unForbiddenPageNumber",t)},"update:limit":function(t){return e.$set(e.form,"unForbiddenPageSize",t)},pagination:e.getUnForbiddenList}})],1),t("div",{staticClass:"user-page-container"},[t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.forbiddenTotal>0,expression:"forbiddenTotal>0"}],staticClass:"full-width flex-row mg-0 pd-0",attrs:{total:e.forbiddenTotal,page:e.form.forbiddenPageNumber,limit:e.form.forbiddenPageSize,layout:"total, prev, pager, next",pageSizes:[50,100,200,300,500,1e3]},on:{"update:page":function(t){return e.$set(e.form,"forbiddenPageNumber",t)},"update:limit":function(t){return e.$set(e.form,"forbiddenPageSize",t)},pagination:e.getForbiddenList}})],1)])],1)},mo=[];const uo={name:"UserForbiddenChatSet",props:{data:{type:Object}},components:{Pagination:so.A},data(){return{row:this.data,loading:!1,levelList:[],deptList:[],userList:[],forbiddenUserList:[],unForbiddenUserList:[],unForbiddenFilter:"",forbiddenFilter:"",duration:30,form:{unForbiddenPageNumber:1,unForbiddenPageSize:300,forbiddenPageNumber:1,forbiddenPageSize:300,roomId:this.data.id,deptIds:[],levelIds:[],accountRanges:null,userName:null},forbiddenTotal:0,unForbiddenTotal:0,selectAllForbidden:0,selectAllUnforbidden:0,checkedForbidden:[],checkedUnforbidden:[],isIndeterminateForbidden:!1,isIndeterminateUnforbidden:!1}},computed:{filterUnforbiddenAccounts(){return this.unForbiddenUserList.filter(e=>(!this.unForbiddenFilter||e.userName.indexOf(this.unForbiddenFilter)>=0)&&!e.isForbidden)},filterForbiddenAccounts(){return this.forbiddenUserList.filter(e=>(!this.forbiddenFilter||e.userName.indexOf(this.forbiddenFilter)>=0)&&e.isForbidden)}},methods:{init(){this.getLevelList(),this.getTeamList(),this.getList()},handleCheckAllUnForbiddenChange(e){this.checkedUnforbidden=e?this.filterUnforbiddenAccounts:[],this.isIndeterminateUnforbidden=!1},handleCheckUnForbiddenChange(e){let t=e.length;this.selectAllUnforbidden=t===this.filterUnforbiddenAccounts.length,this.isIndeterminateUnforbidden=t>0&&t<this.filterUnforbiddenAccounts.length},handleCheckAllForbiddenChange(e){this.checkedForbidden=e?this.filterForbiddenAccounts:[],this.isIndeterminateForbidden=!1},handleCheckForbiddenChange(e){let t=e.length;this.selectAllForbidden=t===this.filterForbiddenAccounts.length,this.isIndeterminateForbidden=t>0&&t<this.filterForbiddenAccounts.length},getTeamList(){Bi({pageNumber:1,pageSize:500}).then(e=>{this.deptList=e.data.records})},getLevelList(){this.levelList=[],ji({}).then(e=>{e.data.records&&e.data.records.length>0&&(this.levelList=e.data.records)})},getList(){this.form.forbiddenPageNumber=1,this.form.forbiddenPageSize=300,this.form.unForbiddenPageNumber=1,this.form.unForbiddenPageSize=300,this.getForbiddenList(),this.getUnForbiddenList()},getForbiddenList(){if(this.form.roomId){this.selectAllForbidden=0,this.isIndeterminateForbidden=!1,this.selectAllUnforbidden=0,this.isIndeterminateUnforbidden=!1;let e=Object.assign({},this.form);e.isForbiddenKickOut=!0,e.pageNumber=this.form.forbiddenPageNumber,e.pageSize=this.form.forbiddenPageSize,Vi(e).then(e=>{this.forbiddenUserList=e.data.records,this.forbiddenTotal=Number(e.data.total)})}},getUnForbiddenList(){if(this.form.roomId){this.selectAllForbidden=0,this.isIndeterminateForbidden=!1,this.selectAllUnforbidden=0,this.isIndeterminateUnforbidden=!1;let e=Object.assign({},this.form);e.isForbiddenKickOut=!1,e.pageNumber=this.form.unForbiddenPageNumber,e.pageSize=this.form.unForbiddenPageSize,Vi(e).then(e=>{this.unForbiddenUserList=e.data.records,this.unForbiddenTotal=Number(e.data.total)})}},handleClose(){this.$emit("close")},forbidden(){this.form.isForbiddenKickOut=!1,this.form.forbiddenPageNumber=1;let e={roomId:this.row.id,allCheck:this.selectAllUnforbidden,queryDTO:this.form,userList:[...this.checkedUnforbidden.map(e=>({userId:e.userId,userName:e.userName}))],duration:this.duration};e.roomId&&e.userList&&e.userList.length>0&&Yi(e).then(e=>{this.$modal.msgSuccess("添加成功"),this.checkedUnforbidden=[],this.getList()})},unforbidden(){this.form.isForbiddenKickOut=!0,this.form.unForbiddenPageNumber=1;let e={roomId:this.row.id,allCheck:this.selectAllForbidden,queryDTO:this.form,userList:[...this.checkedForbidden.map(e=>({userId:e.userId,userName:e.userName}))]};e.roomId&&e.userList&&e.userList.length>0&&Ji(e).then(e=>{this.$modal.msgSuccess("取消成功"),this.checkedForbidden=[],this.getList()})}}},ho=uo;var go=(0,v.A)(ho,co,mo,!1,null,"7c5dc77c",null);const po=go.exports;var vo=function(){var e=this,t=e._self._c;return t("div",{staticClass:"editpage-container"},[t("div",{staticClass:"course-name"},[e._v("直播间："+e._s(e.row.name))]),t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"110px"}},[t("el-row",{staticClass:"search-panel",attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("el-form-item",{staticClass:"full-width flex-row",attrs:{label:"按团队(可多选)"}},[t("el-select",{staticClass:"full-width",attrs:{multiple:"",placeholder:"请选择团队"},model:{value:e.form.deptIds,callback:function(t){e.$set(e.form,"deptIds",t)},expression:"form.deptIds"}},e._l(e.deptList,function(e){return t("el-option",{key:e.deptId,attrs:{label:e.deptName,value:e.deptId}})}),1)],1),t("el-form-item",{staticClass:"full-width flex-row",attrs:{label:"按等级(可多选)"}},[t("el-select",{staticClass:"full-width",attrs:{multiple:"",placeholder:"请选择等级"},model:{value:e.form.levelIds,callback:function(t){e.$set(e.form,"levelIds",t)},expression:"form.levelIds"}},e._l(e.levelList,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),t("el-col",{attrs:{span:9}},[t("el-form-item",{staticClass:"full-editor"},[t("el-input",{attrs:{type:"textarea",rows:"1",placeholder:"请输入账号范围(多条件格式：XXX001-XXX050,ZZ0100-ZZ3500,YY0001,WW02*)"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1)],1),t("el-col",{staticClass:"search-bar",attrs:{span:3}},[t("el-button",{attrs:{icon:"el-icon-search"},on:{click:e.getList}},[e._v("查询")])],1)],1)],1),t("div",{staticClass:"full-width flex-row"},[t("div",{staticClass:"user-filter-container"},[t("div",[e._v("未踢出用户("+e._s(e.filterUnKickOutAccounts.length||0)+")")]),t("span",{staticClass:"user-filter"},[t("el-input",{attrs:{clearable:"",size:"mini","prefix-icon":"el-icon-search",placeholder:"输入查询账号"},model:{value:e.unKickOutAccountFilter,callback:function(t){e.unKickOutAccountFilter=t},expression:"unKickOutAccountFilter"}})],1),t("span",{staticClass:"user-filter btn-bar"},[t("el-checkbox",{attrs:{indeterminate:e.isIndeterminateUnKickOut},on:{change:e.handleCheckAllUnKickOutChange},model:{value:e.selectAllUnKickOut,callback:function(t){e.selectAllUnKickOut=t},expression:"selectAllUnKickOut"}},[e._v("全选")])],1)]),t("div",{staticClass:"user-filter-container"},[t("span",[e._v("已踢出用户("+e._s(e.filterKickOutAccounts.length||0)+")")]),t("span",{staticClass:"user-filter"},[t("el-input",{attrs:{clearable:"",size:"mini","prefix-icon":"el-icon-search",placeholder:"输入查询账号"},model:{value:e.kickOutAccountFilter,callback:function(t){e.kickOutAccountFilter=t},expression:"kickOutAccountFilter"}})],1),t("span",{staticClass:"user-filter btn-bar"},[t("el-checkbox",{attrs:{indeterminate:e.isIndeterminateKickOut},on:{change:e.handleCheckAllKickOutChange},model:{value:e.selectAllKickOut,callback:function(t){e.selectAllKickOut=t},expression:"selectAllKickOut"}},[e._v("全选")])],1)])]),t("div",{staticClass:"edit-container"},[t("div",{staticClass:"edit-panel"},[t("el-checkbox-group",{on:{change:e.handleCheckedUnKickOutChange},model:{value:e.checkedUnKickOuts,callback:function(t){e.checkedUnKickOuts=t},expression:"checkedUnKickOuts"}},e._l(e.filterUnKickOutAccounts,function(i){return t("el-tag",{key:i.userId,staticClass:"user-names"},[t("el-checkbox",{attrs:{value:i,label:i}},[e._v(e._s(i.userName)+"/"+e._s(i.parentUserName)+"/"+e._s(i.deptName)+"/"+e._s(i.levelName))])],1)}),1)],1),t("div",{staticClass:"middle-panel"},[t("el-select",{staticClass:"middle-select",attrs:{placeholder:"请选择禁言时长"},model:{value:e.duration,callback:function(t){e.duration=t},expression:"duration"}},e._l([5,10,15,20,25,30,40,50,60,90,120,720,1440,2880,4320,5760,7200],function(e){return t("el-option",{key:"forbidden_duration_"+e,attrs:{label:e<=720?e+"分钟":e/1440+"天",value:e}})}),1),t("i",{staticClass:"el-icon-d-arrow-right",attrs:{disabled:e.loading},on:{click:e.kickOut}}),t("i",{staticClass:"el-icon-d-arrow-left",attrs:{disabled:e.loading},on:{click:e.unKickOut}})],1),t("div",{staticClass:"edit-panel"},[t("el-checkbox-group",{on:{change:e.handleCheckedKickOutChange},model:{value:e.checkedKickOuts,callback:function(t){e.checkedKickOuts=t},expression:"checkedKickOuts"}},e._l(e.filterKickOutAccounts,function(i){return t("el-tag",{key:i.userId,staticClass:"user-names"},[t("el-checkbox",{attrs:{value:i,label:i}},[e._v(e._s(i.userName)+"/"+e._s(i.parentUserName)+"/"+e._s(i.deptName)+"/"+e._s(i.levelName)+"(还有"+e._s(i.timeRemaining)+"秒)")])],1)}),1)],1)]),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("div",{staticClass:"user-page-container"},[t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.unKickOutTotal>0,expression:"unKickOutTotal>0"}],staticClass:"full-width flex-row mg-0 pd-0",attrs:{total:e.unKickOutTotal,page:e.form.unKickOutPageNumber,limit:e.form.unKickoutPageSize,layout:"total, prev, pager, next",pageSizes:[50,100,200,300,500,1e3]},on:{"update:page":function(t){return e.$set(e.form,"unKickOutPageNumber",t)},"update:limit":function(t){return e.$set(e.form,"unKickoutPageSize",t)},pagination:e.getUnKickOutList}})],1),t("div",{staticClass:"user-page-container"},[t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.kickOutTotal>0,expression:"kickOutTotal>0"}],staticClass:"full-width flex-row mg-0 pd-0",attrs:{total:e.kickOutTotal,page:e.form.kickOutPageNumber,limit:e.form.kickoutPageSize,layout:"total, prev, pager, next",pageSizes:[50,100,200,300,500,1e3]},on:{"update:page":function(t){return e.$set(e.form,"kickOutPageNumber",t)},"update:limit":function(t){return e.$set(e.form,"kickoutPageSize",t)},pagination:e.getKickOutList}})],1)])],1)},fo=[];const bo={name:"UserKickOutSet",props:{data:{type:Object}},components:{Pagination:so.A},data(){return{row:this.data,loading:!1,levelList:[],deptList:[],userList:[],kickOutUserList:[],unKickOutList:[],kickOutAccountFilter:"",unKickOutAccountFilter:"",duration:30,form:{kickOutPageNumber:1,kickoutPageSize:300,unKickOutPageNumber:1,unKickoutPageSize:300,roomId:this.data.id,deptIds:[],levelIds:[],accountRanges:null,userName:null},kickOutTotal:0,unKickOutTotal:0,selectAllKickOut:0,selectAllUnKickOut:0,checkedKickOuts:[],checkedUnKickOuts:[],isIndeterminateKickOut:!1,isIndeterminateUnKickOut:!1}},computed:{filterKickOutAccounts(){return this.kickOutUserList.filter(e=>(!this.kickOutAccountFilter||e.userName.indexOf(this.kickOutAccountFilter)>=0)&&e.isKickOut)},filterUnKickOutAccounts(){return this.unKickOutList.filter(e=>(!this.unKickOutAccountFilter||e.userName.indexOf(this.unKickOutAccountFilter)>=0)&&!e.isKickOut)}},methods:{init(){this.getLevelList(),this.getTeamList(),this.getList()},handleCheckAllUnKickOutChange(e){this.checkedUnKickOuts=e?this.filterUnKickOutAccounts:[],this.isIndeterminateUnKickOut=!1},handleCheckedUnKickOutChange(e){let t=e.length;this.selectAllUnKickOut=t===this.filterUnKickOutAccounts.length,this.isIndeterminateUnKickOut=t>0&&t<this.filterUnKickOutAccounts.length},handleCheckAllKickOutChange(e){this.checkedKickOuts=e?this.filterKickOutAccounts:[],this.isIndeterminateKickOut=!1},handleCheckedKickOutChange(e){let t=e.length;this.selectAllKickOut=t===this.filterKickOutAccounts.length,this.isIndeterminateKickOut=t>0&&t<this.filterKickOutAccounts.length},getTeamList(){Bi({pageNumber:1,pageSize:500}).then(e=>{this.deptList=e.data.records})},getLevelList(){this.levelList=[],ji({}).then(e=>{e.data.records&&e.data.records.length>0&&(this.levelList=e.data.records)})},getList(){this.form.kickOutPageNumber=1,this.form.kickoutPageSize=300,this.form.unKickOutPageNumber=1,this.form.unKickoutPageSize=300,this.getUnKickOutList(),this.getKickOutList()},getKickOutList(){if(this.form.roomId){this.selectAllForbidden=0,this.isIndeterminateForbidden=!1,this.selectAllUnforbidden=0,this.isIndeterminateUnforbidden=!1;let e=Object.assign({},this.form);e.isForbiddenKickOut=!0,e.pageNumber=this.form.kickOutPageNumber,e.pageSize=this.form.kickoutPageSize,qi(e).then(e=>{this.kickOutUserList=e.data.records,this.kickOutTotal=Number(e.data.total)})}},getUnKickOutList(){if(this.form.roomId){this.selectAllForbidden=0,this.isIndeterminateForbidden=!1,this.selectAllUnforbidden=0,this.isIndeterminateUnforbidden=!1;let e=Object.assign({},this.form);e.isForbiddenKickOut=!1,e.pageNumber=this.form.unKickOutPageNumber,e.pageSize=this.form.unKickoutPageSize,qi(e).then(e=>{this.unKickOutList=e.data.records,this.unKickOutTotal=Number(e.data.total)})}},handleClose(){this.$emit("close")},kickOut(){this.loading=!0,this.form.isForbiddenKickOut=!1,this.form.kickOutPageNumber=1;let e={roomId:this.row.id,allCheck:this.selectAllUnKickOut,queryDTO:this.form,userList:[...this.checkedUnKickOuts.map(e=>({userId:e.userId,userName:e.userName}))],duration:this.duration};e.roomId&&e.userList&&e.userList.length>0&&Xi(e).then(e=>{this.$modal.msgSuccess("踢出成功"),this.checkedUnKickOuts=[],this.getList(),this.loading=!1})},unKickOut(){this.loading=!0,this.form.isForbiddenKickOut=!0,this.form.unKickOutPageNumber=1;let e={roomId:this.row.id,allCheck:this.selectAllKickOut,queryDTO:this.form,userList:[...this.checkedKickOuts.map(e=>({userId:e.userId,userName:e.userName}))]};e.roomId&&e.userList&&e.userList.length>0&&Zi(e).then(e=>{this.$modal.msgSuccess("取消成功"),this.checkedKickOuts=[],this.getList(),this.loading=!1})}}},yo=bo;var Lo=(0,v.A)(yo,vo,fo,!1,null,"a8b37bbe",null);const So=Lo.exports;var ko=function(){var e=this,t=e._self._c;return t("div",{staticClass:"editpage-container"},[t("div",{staticClass:"course-name"},[e._v("直播间："+e._s(e.row.name))]),t("div",{staticClass:"full-width flex-row"},[t("div",{staticClass:"user-filter-container"},[t("div",[e._v("未禁言等级("+e._s(e.filterUnforbiddenLevels.length||0)+")")]),t("span",{staticClass:"user-filter"},[t("el-input",{attrs:{clearable:"",size:"mini","prefix-icon":"el-icon-search",placeholder:"输入查询等级"},model:{value:e.unforbiddenFilter,callback:function(t){e.unforbiddenFilter=t},expression:"unforbiddenFilter"}})],1),t("span",{staticClass:"user-filter btn-bar"},[t("el-checkbox",{attrs:{indeterminate:e.isIndeterminateUnforbidden},on:{change:e.handleCheckAllUnForbiddenChange},model:{value:e.selectAllUnforbidden,callback:function(t){e.selectAllUnforbidden=t},expression:"selectAllUnforbidden"}},[e._v("全选")])],1)]),t("div",{staticClass:"user-filter-container"},[t("span",[e._v("已禁言等级("+e._s(e.filterForbiddenLevels.length||0)+")")]),t("span",{staticClass:"user-filter"},[t("el-input",{attrs:{clearable:"",size:"mini","prefix-icon":"el-icon-search",placeholder:"输入查询等级"},model:{value:e.forbiddenFilter,callback:function(t){e.forbiddenFilter=t},expression:"forbiddenFilter"}})],1),t("span",{staticClass:"user-filter btn-bar"},[t("el-checkbox",{attrs:{indeterminate:e.isIndeterminateForbidden},on:{change:e.handleCheckAllForbiddenChange},model:{value:e.selectAllForbidden,callback:function(t){e.selectAllForbidden=t},expression:"selectAllForbidden"}},[e._v("全选")])],1)])]),t("div",{staticClass:"edit-container"},[t("div",{staticClass:"edit-panel"},[t("el-checkbox-group",{on:{change:e.handleCheckUnForbiddenChange},model:{value:e.checkedUnforbidden,callback:function(t){e.checkedUnforbidden=t},expression:"checkedUnforbidden"}},e._l(e.filterUnforbiddenLevels,function(i){return t("el-tag",{key:i.id,staticClass:"user-names"},[t("el-checkbox",{attrs:{value:i,label:i}},[e._v(e._s(i.name))])],1)}),1)],1),t("div",{staticClass:"middle-panel"},[t("el-select",{staticClass:"middle-select",attrs:{placeholder:"请选择禁言时长"},model:{value:e.duration,callback:function(t){e.duration=t},expression:"duration"}},e._l([5,10,15,20,25,30,40,50,60,90,120,720,1440,2880,4320,5760,7200],function(e){return t("el-option",{key:"forbidden_duration_"+e,attrs:{label:e<=720?e+"分钟":e/1440+"天",value:e}})}),1),t("i",{staticClass:"el-icon-d-arrow-right",on:{click:e.forbidden}}),t("i",{staticClass:"el-icon-d-arrow-left",on:{click:e.unforbidden}})],1),t("div",{staticClass:"edit-panel"},[t("el-checkbox-group",{on:{change:e.handleCheckForbiddenChange},model:{value:e.checkedForbidden,callback:function(t){e.checkedForbidden=t},expression:"checkedForbidden"}},e._l(e.filterForbiddenLevels,function(i){return t("el-tag",{key:i.id,staticClass:"user-names"},[t("el-checkbox",{attrs:{value:i,label:i}},[e._v(e._s(i.name)+"(还有"+e._s(i.timeRemaining)+"秒)")])],1)}),1)],1)])])},Co=[];const Io={name:"LevelForbiddenChatSet",props:{data:{type:Object}},data(){return{row:this.data,loading:!1,levelList:[],unforbiddenFilter:"",forbiddenFilter:"",duration:30,selectAllForbidden:0,selectAllUnforbidden:0,checkedForbidden:[],checkedUnforbidden:[],isIndeterminateForbidden:!1,isIndeterminateUnforbidden:!1}},computed:{filterUnforbiddenLevels(){return this.levelList.filter(e=>(!this.unforbiddenFilter||e.name.indexOf(this.unforbiddenFilter)>=0)&&!e.isForbidden)},filterForbiddenLevels(){return this.levelList.filter(e=>(!this.forbiddenFilter||e.name.indexOf(this.forbiddenFilter)>=0)&&e.isForbidden)}},methods:{init(){this.getLevelList()},handleCheckAllUnForbiddenChange(e){this.checkedUnforbidden=e?this.filterUnforbiddenLevels:[],this.isIndeterminateUnforbidden=!1},handleCheckUnForbiddenChange(e){let t=e.length;this.selectAllUnforbidden=t===this.filterUnforbiddenLevels.length,this.isIndeterminateUnforbidden=t>0&&t<this.filterUnforbiddenLevels.length},handleCheckAllForbiddenChange(e){this.checkedForbidden=e?this.filterForbiddenLevels:[],this.isIndeterminateForbidden=!1},handleCheckForbiddenChange(e){let t=e.length;this.selectAllForbidden=t===this.filterForbiddenLevels.length,this.isIndeterminateForbidden=t>0&&t<this.filterForbiddenLevels.length},getLevelList(){this.levelList=[],this.selectAllForbidden=0,this.isIndeterminateForbidden=!1,this.selectAllUnforbidden=0,this.isIndeterminateUnforbidden=!1,Di(this.row.id).then(e=>{e.data&&e.data.length>0&&(this.levelList=e.data)})},handleClose(){this.$emit("close")},forbidden(){let e={roomId:this.row.id,levelIds:[...this.checkedUnforbidden.map(e=>e.id)],duration:this.duration};e.roomId&&e.levelIds&&e.levelIds.length>0&&eo(e).then(e=>{this.$modal.msgSuccess("添加成功"),this.checkedUnforbidden=[],this.getLevelList()})},unforbidden(){let e={roomId:this.row.id,levelIds:[...this.checkedForbidden.map(e=>e.id)]};e.roomId&&e.levelIds&&e.levelIds.length>0&&to(e).then(e=>{this.$modal.msgSuccess("取消成功"),this.checkedForbidden=[],this.getLevelList()})}}},Ro=Io;var wo=(0,v.A)(Ro,ko,Co,!1,null,"6e5e0398",null);const Ao=wo.exports;var _o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"editpage-container"},[t("div",{staticClass:"course-name"},[e._v("直播间："+e._s(e.row.name))]),t("div",{staticClass:"full-width flex-row"},[t("div",{staticClass:"user-filter-container"},[t("div",[e._v("未踢出等级("+e._s(e.filterUnkickOutLevels.length||0)+")")]),t("span",{staticClass:"user-filter"},[t("el-input",{attrs:{clearable:"",size:"mini","prefix-icon":"el-icon-search",placeholder:"输入查询等级"},model:{value:e.unkickOutFilter,callback:function(t){e.unkickOutFilter=t},expression:"unkickOutFilter"}})],1),t("span",{staticClass:"user-filter btn-bar"},[t("el-checkbox",{attrs:{indeterminate:e.isIndeterminateUnkickOut},on:{change:e.handleCheckAllUnKickOutChange},model:{value:e.selectAllUnkickOut,callback:function(t){e.selectAllUnkickOut=t},expression:"selectAllUnkickOut"}},[e._v("全选")])],1)]),t("div",{staticClass:"user-filter-container"},[t("span",[e._v("已踢出等级("+e._s(e.filterKickOutLevels.length||0)+")")]),t("span",{staticClass:"user-filter"},[t("el-input",{attrs:{clearable:"",size:"mini","prefix-icon":"el-icon-search",placeholder:"输入查询等级"},model:{value:e.kickOutFilter,callback:function(t){e.kickOutFilter=t},expression:"kickOutFilter"}})],1),t("span",{staticClass:"user-filter btn-bar"},[t("el-checkbox",{attrs:{indeterminate:e.isIndeterminateKickOut},on:{change:e.handleCheckAllKickOutChange},model:{value:e.selectAllKickOut,callback:function(t){e.selectAllKickOut=t},expression:"selectAllKickOut"}},[e._v("全选")])],1)])]),t("div",{staticClass:"edit-container"},[t("div",{staticClass:"edit-panel"},[t("el-checkbox-group",{on:{change:e.handleCheckUnKickOutChange},model:{value:e.checkedUnkickOut,callback:function(t){e.checkedUnkickOut=t},expression:"checkedUnkickOut"}},e._l(e.filterUnkickOutLevels,function(i){return t("el-tag",{key:i.id,staticClass:"user-names"},[t("el-checkbox",{attrs:{value:i,label:i}},[e._v(e._s(i.name))])],1)}),1)],1),t("div",{staticClass:"middle-panel"},[t("el-select",{staticClass:"middle-select",attrs:{placeholder:"请选择踢出时长"},model:{value:e.duration,callback:function(t){e.duration=t},expression:"duration"}},e._l([5,10,15,20,25,30,40,50,60,90,120,720,1440,2880,4320,5760,7200],function(e){return t("el-option",{key:"kickOut_duration_"+e,attrs:{label:e<=720?e+"分钟":e/1440+"天",value:e}})}),1),t("i",{staticClass:"el-icon-d-arrow-right",on:{click:e.kickOut}}),t("i",{staticClass:"el-icon-d-arrow-left",on:{click:e.unkickOut}})],1),t("div",{staticClass:"edit-panel"},[t("el-checkbox-group",{on:{change:e.handleCheckKickOutChange},model:{value:e.checkedKickOut,callback:function(t){e.checkedKickOut=t},expression:"checkedKickOut"}},e._l(e.filterKickOutLevels,function(i){return t("el-tag",{key:i.id,staticClass:"user-names"},[t("el-checkbox",{attrs:{value:i,label:i}},[e._v(e._s(i.name)+"(还有"+e._s(i.timeRemaining)+"秒)")])],1)}),1)],1)])])},xo=[];const To={name:"LevelKickOutChatSet",props:{data:{type:Object}},data(){return{row:this.data,loading:!1,levelList:[],unkickOutFilter:"",kickOutFilter:"",duration:30,selectAllKickOut:0,selectAllUnkickOut:0,checkedKickOut:[],checkedUnkickOut:[],isIndeterminateKickOut:!1,isIndeterminateUnkickOut:!1}},computed:{filterUnkickOutLevels(){return this.levelList.filter(e=>(!this.unkickOutFilter||e.name.indexOf(this.unkickOutFilter)>=0)&&!e.isKickOut)},filterKickOutLevels(){return this.levelList.filter(e=>(!this.kickOutFilter||e.name.indexOf(this.kickOutFilter)>=0)&&e.isKickOut)}},methods:{init(){this.getLevelList()},handleCheckAllUnKickOutChange(e){this.checkedUnkickOut=e?this.filterUnkickOutLevels:[],this.isIndeterminateUnkickOut=!1},handleCheckUnKickOutChange(e){let t=e.length;this.selectAllUnkickOut=t===this.filterUnkickOutLevels.length,this.isIndeterminateUnkickOut=t>0&&t<this.filterUnkickOutLevels.length},handleCheckAllKickOutChange(e){this.checkedKickOut=e?this.filterKickOutLevels:[],this.isIndeterminateKickOut=!1},handleCheckKickOutChange(e){let t=e.length;this.selectAllKickOut=t===this.filterKickOutLevels.length,this.isIndeterminateKickOut=t>0&&t<this.filterKickOutLevels.length},getLevelList(){this.levelList=[],this.selectAllKickOut=0,this.isIndeterminateKickOut=!1,this.selectAllUnkickOut=0,this.isIndeterminateUnkickOut=!1,Ki(this.row.id).then(e=>{e.data&&e.data.length>0&&(this.levelList=e.data)})},handleClose(){this.$emit("close")},kickOut(){let e={roomId:this.row.id,levelIds:[...this.checkedUnkickOut.map(e=>e.id)],duration:this.duration};e.roomId&&e.levelIds&&e.levelIds.length>0&&io(e).then(e=>{this.$modal.msgSuccess("添加成功"),this.checkedUnkickOut=[],this.getLevelList()})},unkickOut(){let e={roomId:this.row.id,levelIds:[...this.checkedKickOut.map(e=>e.id)]};e.roomId&&e.levelIds&&e.levelIds.length>0&&oo(e).then(e=>{this.$modal.msgSuccess("取消成功"),this.checkedKickOut=[],this.getLevelList()})}}},Po=To;var Fo=(0,v.A)(Po,_o,xo,!1,null,"3b14c5e2",null);const Mo=Fo.exports;var Uo=function(){var e=this,t=e._self._c;return t("div",{staticClass:"top-container"},[t("h3",[e._v(e._s(e.initData.name))]),t("el-form",{staticClass:"filter-container",attrs:{inline:"",size:"mini"}},[t("el-form-item",{attrs:{label:"节目单日期"}},[t("el-date-picker",{attrs:{"picker-options":{firstDayOfWeek:7},type:"week","value-format":"yyyy-MM-dd",format:"yyyy 第 WW 周",placeholder:"选择周"},on:{change:function(t){return e.getChapterList()}},model:{value:e.queryParams.startDate,callback:function(t){e.$set(e.queryParams,"startDate",t)},expression:"queryParams.startDate"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleOpenDialog(e.initData,"weekChapterCopy","复制一周节目单","450px")}}},[e._v("复制一周节目")])],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleOpenDialog(e.initData,"dayChapterCopy","复制单日节目单","450px")}}},[e._v("复制单日节目")])],1)],1),t("div",{staticClass:"chapter-list"},e._l(e.chapterList,function(i,o){return t("div",{key:"chapter_"+i.date,class:o%2===0?"chapter-item even":"chapter-item odd"},[i?t("div",{staticClass:"head"},[t("div",{staticClass:"title"},[e._v(e._s(i.date))]),t("div",{staticClass:"title"},[e._v(e._s(i.dayOfWeek))]),t("div",{staticClass:"btns-panel"})]):e._e(),t("ChapterItemEdit",{attrs:{roomId:i.roomId,chapterId:i.id,chapterDate:i.date,chapterItems:i.chapterItemList,roomLecturerList:e.roomLecturerList},on:{"update:roomId":function(t){return e.$set(i,"roomId",t)},"update:room-id":function(t){return e.$set(i,"roomId",t)},"update:chapterId":function(t){return e.$set(i,"id",t)},"update:chapter-id":function(t){return e.$set(i,"id",t)},"update:chapterDate":function(t){return e.$set(i,"date",t)},"update:chapter-date":function(t){return e.$set(i,"date",t)},"update:chapterItems":function(t){return e.$set(i,"chapterItemList",t)},"update:chapter-items":function(t){return e.$set(i,"chapterItemList",t)},"update:roomLecturerList":function(t){e.roomLecturerList=t},"update:room-lecturer-list":function(t){e.roomLecturerList=t}}})],1)}),0),t("el-dialog",{staticClass:"dynamic-dialog",attrs:{title:e.dialogTitle,visible:e.showDialog,width:e.dialogWidth,"append-to-body":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,modal:!1},on:{"update:visible":function(t){e.showDialog=t}}},[t(e.dialogComponent,{ref:"curComp",tag:"component",attrs:{data:e.dialogData},on:{"update:data":function(t){e.dialogData=t},close:e.closeDialog}})],1)],1)},Oo=[];function No(e){return(0,gt.A)({url:"/live/chapter/list",method:"post",data:e,headers:{skipRepeats:!0}})}function $o(e){return(0,gt.A)({url:"/live/chapter/copy",method:"post",data:e})}function Eo(e){return(0,gt.A)({url:"/live/chapter/delete",method:"post",data:{id:e}})}var Bo=function(){var e=this,t=e._self._c;return t("div",[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"table-class",attrs:{"header-cell-style":e.headerStyle,data:e.chapterItemList,size:"middle",border:"",fit:"","highlight-current-row":""}},[t("el-table-column",{attrs:{label:"节目名称",prop:"name",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(i){return[i.row.__edit?t("el-input",{staticClass:"form-input lr-pd3",attrs:{size:"mini"},model:{value:i.row.name,callback:function(t){e.$set(i.row,"name",t)},expression:"scope.row.name"}}):t("span",[e._v(e._s(i.row.name))])]}}])}),t("el-table-column",{attrs:{label:"开始",align:"center",prop:"startTime",width:"40px"},scopedSlots:e._u([{key:"default",fn:function(i){return[i.row.__edit?t("DateTimePicker",{attrs:{layoutModel:"time",containerClass:"date-picker-container",size:"mini",showSecond:!1,isRange:!1},model:{value:i.row.startTime,callback:function(t){e.$set(i.row,"startTime",t)},expression:"scope.row.startTime"}}):t("span",[e._v(e._s(e.parseTime(i.row.startTime,"{h}:{i}")))])]}}])}),t("el-table-column",{attrs:{label:"结束",prop:"endTime",width:"40px"},scopedSlots:e._u([{key:"default",fn:function(i){return[i.row.__edit?t("DateTimePicker",{attrs:{layoutModel:"time",size:"mini",showSecond:!1,isRange:!1},model:{value:i.row.endTime,callback:function(t){e.$set(i.row,"endTime",t)},expression:"scope.row.endTime"}}):t("span",[e._v(e._s(e.parseTime(i.row.endTime,"{h}:{i}")))])]}}])}),t("el-table-column",{attrs:{label:"嘉宾",align:"left","header-align":"center",prop:"lecturerList",width:"100px"},scopedSlots:e._u([{key:"default",fn:function(i){return[i.row.__edit?t("span",[e._l(i.row.lecturerList,function(o,s){return t("el-tag",{key:i.row.id+"_"+o.userId,staticClass:"chapter-item-btn mini-padding",attrs:{closable:""},on:{close:function(t){return e.handleDeleteLecturer(i.row.lecturerList,s)}}},[e._v(" "+e._s(o.lecturerName)+" ")])}),t("svg-icon",{attrs:{"icon-class":"plus","class-name":"chapter-item-btn pointer blue"},on:{click:function(t){return e.handleAddLecturer(i.row)}}})],2):t("span",[e._v(e._s(e.selectListField(i.row.lecturerList,"lecturerName").join("+")))])]}}])}),t("el-table-column",{attrs:{label:"•••",align:"center",width:"40px"},scopedSlots:e._u([{key:"default",fn:function(i){return[i.row.__edit?t("svg-icon",{attrs:{"icon-class":"confirm","class-name":"chapter-item-btn pointer blue"},on:{click:function(t){return e.editChapterItem(i.row,!1)}}}):t("svg-icon",{attrs:{"icon-class":"edit","class-name":"chapter-item-btn pointer blue"},on:{click:function(t){return e.editChapterItem(i.row,!0)}}}),i.row.__edit?t("svg-icon",{attrs:{"icon-class":"cancel","class-name":"chapter-item-btn pointer red"},on:{click:function(t){return e.editChapterItem(i.row,!1)}}}):t("svg-icon",{attrs:{"icon-class":"delete","class-name":"chapter-item-btn pointer red"},on:{click:function(t){return e.chapterItemList.splice(i.$index,1)}}})]}}])})],1),t("LiveRoomLecturerSelector",{ref:"lecturerSelect",on:{selected:e.addLecturers}}),t("div",{staticClass:"dialog-footer",staticStyle:{padding:"5px 10px 5px 0px"},attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{size:"mini"},on:{click:e.handAdd}},[e._v("新增节目")]),t("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(t){return e.handleUpdate()}}},[e._v("保 存")])],1)],1)},jo=[],Do=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"选择讲师",visible:e.showDialog,width:e.width,"append-to-body":!0,model:!1,"destroy-on-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.showDialog=t},closed:function(t){return e.handleClose()}}},[t("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,size:"small",inline:!0}},[t("el-form-item",{attrs:{label:"讲师姓名",prop:"lecturerName"}},[t("el-input",{staticClass:"query-form-input-short",attrs:{placeholder:"请输入讲师姓名",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.lecturerName,callback:function(t){e.$set(e.queryParams,"lecturerName",t)},expression:"queryParams.lecturerName"}})],1),t("el-form-item",{attrs:{label:"讲师账号",prop:"userName"}},[t("el-input",{staticClass:"query-form-input-short",attrs:{placeholder:"请输入讲师账号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.userName,callback:function(t){e.$set(e.queryParams,"userName",t)},expression:"queryParams.userName"}})],1),t("el-form-item",{attrs:{label:"讲师昵称",prop:"nickName"}},[t("el-input",{staticClass:"query-form-input-short",attrs:{placeholder:"请输入讲师昵称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.nickName,callback:function(t){e.$set(e.queryParams,"nickName",t)},expression:"queryParams.nickName"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),t("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",attrs:{data:e.lecturerListForSelect},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{align:"center",prop:"userId",type:"selection"}}),t("el-table-column",{attrs:{label:"讲师姓名",align:"center",prop:"lecturerName"}}),t("el-table-column",{attrs:{label:"讲师账号",align:"center",prop:"userName"}}),t("el-table-column",{attrs:{label:"讲师昵称",align:"center",prop:"nickName"}}),t("el-table-column",{attrs:{label:"讲师等级",align:"center",prop:"lecturerLevel"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("span",[e._v(e._s(e.lecturerLevels[Number(i.row.lecturerLevel)]))])]}}])}),t("el-table-column",{attrs:{label:"资格证号",align:"center",prop:"lecturerCardNo"}})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),t("el-button",{on:{click:e.handleClose}},[e._v("取 消")])],1)],1)},Ko=[],zo=i(56972);const Vo={name:"LiveRoomLecturerSelector",dicts:["sys_yes_no"],props:{data:{type:Object}},components:{Pagination:so.A},data(){return{showDialog:!1,loading:!1,selectedItems:[],single:!1,showSearch:!0,total:0,width:"800px",roomId:null,lecturerListForSelect:[],queryParams:{pageNumber:1,pageSize:10,lecturerName:null,userName:null,nickName:null},checkFun:null,listFun:null,lecturerLevels:zo.wY}},methods:{show(e,t,i,o="800px",s=!1){Object.assign(this.queryParams,e),this.width=o,this.checkFun=t,this.listFun=i,this.single=s,this.getList(),this.$nextTick(()=>{this.showDialog=!0})},handleSelectionChange(e){this.selectedItems=e},handleClose(){this.showDialog=!1},submitForm(){this.$emit("selected",this.selectedItems),this.showDialog=!1},getList(){this.loading=!0,this.listFun(this.queryParams).then(e=>{this.lecturerListForSelect=e.rows||e.data.records||e.data,this.total=Number(e.total||e.data.total),this.loading=!1,this.selectedItems=[],this.$nextTick(()=>{this.lecturerListForSelect&&this.lecturerListForSelect.forEach(e=>{null!=this.checkFun&&this.checkFun instanceof Function&&this.checkFun(e)&&this.$refs.multipleTable.toggleRowSelection(e)})})})},reset(){this.form={roomId:null,userId:null,indx:null,isVote:null,voteCount:null},this.resetForm("form")},handleQuery(){this.queryParams.pageNum=1,this.getList()},resetQuery(){this.resetForm("queryForm"),this.handleQuery()}}},qo=Vo;var Ho=(0,v.A)(qo,Do,Ko,!1,null,"7c4f5c4f",null);const Wo=Ho.exports;function Go(e){return(0,gt.A)({url:"/live/chapterItem/saveBatch",method:"post",data:e})}function Qo(e){return(0,gt.A)({url:"/live/lecturer/listLectureUser",method:"post",data:e})}function Yo(e){return(0,gt.A)({url:"/live/lecturer/listForRoom",method:"post",data:e})}function Jo(e){return(0,gt.A)({url:"/live/lecturer/createBatch",method:"post",data:e})}function Xo(e){return(0,gt.A)({url:"/live/lecturer/update",method:"post",data:e})}function Zo(e){return(0,gt.A)({url:"/live/lecturer/delete",method:"post",data:e})}function es(e){return(0,gt.A)({url:"/live/lecturer/deleteBatch",method:"post",data:e})}const ts={name:"ChapterItemEdit",components:{LiveRoomLecturerSelector:Wo,DateTimePicker:wt.A},props:{roomId:{type:String,required:!0},chapterId:{type:String},chapterDate:{type:String},chapterItems:{type:Array,required:!0},roomLecturerList:{type:Array,required:!0}},data(){return{chapterItemId:"",chapterItemList:[],lecturerIndex:null,currRow:{},loading:!1,currentRow:null}},watch:{chapterItems(e){this.chapterItemList=e,this.$forceUpdate()}},mounted(){this.chapterItemList=this.chapterItems},methods:{editChapterItem(e,t){this.$set(e,"__edit",t)},addLecturers(e){this.currentRow&&e&&(this.currentRow.lecturerList||this.$set(this.currentRow,"lecturerList",[]),this.currentRow.lecturerList.splice(0,this.currentRow.lecturerList.length),e.forEach(e=>{this.currentRow.lecturerList.push({roomId:this.currentRow.roomId,chapterId:this.currentRow.chapterId,chapterItemId:this.currentRow.chapterItemId,userId:e.userId,indx:this.currentRow.lecturerList.length,lecturerName:e.lecturerName,userName:e.userName})}))},handleAddLecturer(e){function t(t){e.lecturerList||this.$set(e,"lecturerList",[]);let i=e.lecturerList.filter(e=>e.userId==t.userId);return!!(i&&i.length>0)}this.currentRow=e;let i=t.bind(this);this.$refs.lecturerSelect.show({roomId:e.roomId,chapterId:e.chapterId,chapterItemId:e.chapterItemId},i,Qo,"55%",!1)},handleDeleteLecturer(e,t){e.splice(t,1)},headerStyle({row:e,column:t,rowIndex:i,columnIndex:o}){},handAdd(){let e={roomId:this.roomId,chapterId:this.chapterId,date:this.chapterDate,__edit:!0};this.chapterItemList.push(e)},addLecturer(e,t){function i(t){let i=e.lecturerList.filter(e=>e.userId==t.userId);return!!(i&&i.length>0)}this.$refs.lecturerSelect.show({roomId:e.roomId,chapterId:e.chapterId,chapterItemId:e.id},i,Yo,"55%",!1)},handleUpdate(){let e=!0;this.chapterItemList.forEach(t=>{null!=t.startTime&&null!=t.endTime&&null!=t.name&&t.name.trim().length>0&&null!=t.lecturerList&&t.lecturerList.length>0||(e=!1)}),e?this.chapterId&&0==this.chapterItemList.length?Eo(this.chapterId).then(e=>{this.$message.success("保存成功")}):Go(this.chapterItemList).then(e=>{this.$message.success("保存成功")}):this.$message.warning("必须设置节目名称、时间及讲师")},handleClose(){this.$emit("close")},selectCallback(e,t){this.visible=!1,this.chapterItemList[t].leatures=e},selectClose(){this.visible=!1}}},is=ts;var os=(0,v.A)(is,Bo,jo,!1,null,"3c8f50c4",null);const ss=os.exports;var as=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-form",{ref:"form",staticClass:"select-user",attrs:{model:e.form,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"源直播间"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.fromRoomId,callback:function(t){e.$set(e.form,"fromRoomId",t)},expression:"form.fromRoomId"}},e._l(e.roomList,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),t("el-form-item",{attrs:{label:"目标直播间"}},[t("el-select",{attrs:{placeholder:"请选择"},on:{focus:e.focusList},model:{value:e.form.toRoomId,callback:function(t){e.$set(e.form,"toRoomId",t)},expression:"form.toRoomId"}},e._l(e.roomList2,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),t("el-form-item",{attrs:{label:"从第几周",prop:"fromStartDate"}},[t("el-date-picker",{attrs:{"picker-options":{firstDayOfWeek:7},type:"week","value-format":"yyyy-MM-dd",format:"yyyy 第 WW 周",placeholder:"从第几周"},model:{value:e.form.fromStartDate,callback:function(t){e.$set(e.form,"fromStartDate",t)},expression:"form.fromStartDate"}})],1),t("el-form-item",{attrs:{label:"复制到第几周",prop:"toStartDate"}},[t("el-date-picker",{attrs:{"picker-options":{firstDayOfWeek:7},type:"week","value-format":"yyyy-MM-dd",format:"yyyy 第 WW 周",placeholder:"复制到第几周"},model:{value:e.form.toStartDate,callback:function(t){e.$set(e.form,"toStartDate",t)},expression:"form.toStartDate"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.handleClose()}}},[e._v("取 消")]),t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleCopyChapter}},[e._v("确 定")])],1)],1)},ls=[];const ns={components:{},data(){return{loading:!1,form:{},propsData:{},queryParams:{pageNum:1,pageSize:200},roomList:[],roomList2:[]}},props:{data:{type:Object}},mounted(){},created(){},methods:{init(){this.propsData=this.data,this.getRoomList()},check(e){e==this.form.toRoomId&&(this.form.toRoomId=null)},focusList(){null!=this.form.fromRoomId?this.roomList2=this.roomList.filter(e=>!0):this.$message.error("请先选择源直播间")},handleClose(){this.$emit("close")},getRoomList(){this.loading=!0,Hi(this.queryParams).then(e=>{this.roomList=e.data.records,this.loading=!1})},handleCopyChapter(){this.form.fromStartDate?this.form.toStartDate?this.form.fromRoomId?this.form.toRoomId?(this.form.oneDay=!1,this.loading=!0,$o(this.form).then(e=>{this.$message.success("复制成功"),this.loading=!1,this.$emit("close")}).catch(()=>{this.loading=!1})):this.$message.error("请选择目标直播间"):this.$message.error("请选择源直播间"):this.$message.error("请选择目标日期"):this.$message.error("请选择源日期")}}},rs=ns;var cs=(0,v.A)(rs,as,ls,!1,null,null,null);const ms=cs.exports;var ds=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-form",{ref:"form",staticClass:"select-user",attrs:{model:e.form,"label-width":"90px"}},[t("el-form-item",{attrs:{label:"源直播间"}},[t("el-select",{attrs:{placeholder:"请选择"},on:{change:e.check},model:{value:e.form.fromRoomId,callback:function(t){e.$set(e.form,"fromRoomId",t)},expression:"form.fromRoomId"}},e._l(e.roomList,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),t("el-form-item",{attrs:{label:"源日期",prop:"fromStartDate"}},[t("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.form.fromStartDate,callback:function(t){e.$set(e.form,"fromStartDate",t)},expression:"form.fromStartDate"}})],1),t("el-form-item",{attrs:{label:"目标直播间"}},[t("el-select",{attrs:{placeholder:"请选择"},on:{focus:e.focusList},model:{value:e.form.toRoomId,callback:function(t){e.$set(e.form,"toRoomId",t)},expression:"form.toRoomId"}},e._l(e.roomList2,function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),t("el-form-item",{attrs:{label:"目标日期",prop:"toStartDate"}},[t("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.form.toStartDate,callback:function(t){e.$set(e.form,"toStartDate",t)},expression:"form.toStartDate"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.handleClose()}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.handleCopyChapter}},[e._v("确 定")])],1)],1)},us=[];const hs={components:{},data(){return{loading:!1,form:{fromRoomId:null},propsData:{},queryParams:{pageNum:1,pageSize:200},roomList:[],roomList2:[]}},props:{data:{type:Object}},mounted(){},created(){},methods:{init(){this.propsData=this.data,this.getRoomList()},check(e){e==this.form.toRoomId&&(this.form.toRoomId=null)},focusList(){null!=this.form.fromRoomId?this.roomList2=this.roomList.filter(e=>!0):this.$message.error("请先选择源直播间")},handleClose(){this.$emit("close")},getRoomList(){this.loading=!0,Hi(this.queryParams).then(e=>{this.roomList=e.data.records,this.loading=!1})},handleCopyChapter(){this.form.fromStartDate?this.form.toStartDate?this.form.fromRoomId?this.form.toRoomId?(this.form.oneDay=!0,this.loading=!0,$o(this.form).then(e=>{this.$message.success("复制成功"),this.loading=!1,this.$emit("close")}).catch(()=>{this.loading=!1})):this.$message.error("请选择目标直播间"):this.$message.error("请选择源直播间"):this.$message.error("请选择目标日期"):this.$message.error("请选择源日期")}}},gs=hs;var ps=(0,v.A)(gs,ds,us,!1,null,null,null);const vs=ps.exports;var fs=i(62978);const bs={name:"Chapter",components:{ChapterItemEdit:ss,DayChapterCopy:vs,WeekChapterCopy:ms},props:{data:{type:Object}},data(){return{activeName:"chapter_1",dialogComponent:null,dialogData:null,dialogTitle:null,dialogWidth:"800px",showDialog:!1,components:{dayChapterCopy:vs,weekChapterCopy:ms},initData:{},chapterList:[],chapterIndex:0,queryParams:{roomId:this.data.id,startDate:new Date},roomLecturerList:[]}},methods:{init(){this.initData=this.data,this.queryParams.roomId=this.data.id,this.getChapterList(),this.getRoomLectures()},getRoomLectures(){Yo(this.data.id).then(e=>{this.roomLecturerList=e.data})},handleOpenDialog(e,t,i,o){this.dialogData=e,this.dialogTitle=i,this.dialogWidth=o,this.dialogComponent=this.components[t],this.showDialog=!0,this.$nextTick(()=>{this.$refs.curComp&&this.$refs.curComp.init&&this.$refs.curComp.init instanceof Function&&this.$refs.curComp.init()})},closeDialog(){this.showDialog=!1,this.getChapterList()},dateFormat(e,t){let i;const o={"Y+":t.getFullYear().toString(),"m+":(t.getMonth()+1).toString(),"d+":t.getDate().toString(),"H+":t.getHours().toString(),"M+":t.getMinutes().toString(),"S+":t.getSeconds().toString()};for(const s in o)i=new RegExp("("+s+")").exec(e),i&&(e=e.replace(i[1],1===i[1].length?o[s]:o[s].padStart(i[1].length,"0")));return e},getChapterList(){let e={};Object.assign(e,this.queryParams),e.startDate=(0,fs.fy)(e.startDate);let t=this;No(e).then(e=>{t.chapterList=e.data})}}},ys=bs;var Ls=(0,v.A)(ys,Uo,Oo,!1,null,"782f14c8",null);const Ss=Ls.exports;var ks=function(){var e=this,t=e._self._c;return t("div",{staticClass:"app-container"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.lecturerList},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{align:"center",prop:"userId",type:"selection"}}),t("el-table-column",{attrs:{label:"讲师姓名",align:"center",prop:"lecturerName"}}),t("el-table-column",{attrs:{label:"讲师账号",align:"center",prop:"userName"}}),t("el-table-column",{attrs:{label:"讲师昵称",align:"center",prop:"nickName"}}),t("el-table-column",{attrs:{label:"讲师等级",align:"center",prop:"lecturerLevel"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("span",[e._v(e._s(e.lecturerLevels[Number(i.row.lecturerLevel)]))])]}}])}),t("el-table-column",{attrs:{label:"资格证号",align:"center",prop:"lecturerCardNo"}}),t("el-table-column",{attrs:{label:"讲师排序",align:"center",prop:"indx"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-input",{attrs:{placeholder:"请输入讲师排序"},on:{input:function(e){i.row.__changed=!0}},model:{value:i.row.indx,callback:function(t){e.$set(i.row,"indx",t)},expression:"scope.row.indx"}})]}}])}),t("el-table-column",{attrs:{label:"是否参与投票",align:"center",prop:"isVote"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(e){i.row.__changed=!0}},model:{value:i.row.isVote,callback:function(t){e.$set(i.row,"isVote",t)},expression:"scope.row.isVote"}})]}}])}),t("el-table-column",{attrs:{label:"投票基数",align:"center",prop:"voteCount"},scopedSlots:e._u([{key:"default",fn:function(i){return[i.row.isVote?t("el-input",{attrs:{placeholder:"请输入讲师投票基数"},on:{input:function(e){i.row.__changed=!0}},model:{value:i.row.voteCount,callback:function(t){e.$set(i.row,"voteCount",t)},expression:"scope.row.voteCount"}}):e._e()]}}])}),t("el-table-column",{attrs:{label:"#",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(i){return[i.row.__changed?t("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-finished"},on:{click:function(t){return e.handleUpdate(i.row,i.$index)}}},[e._v("保存")]):e._e()]}}])})],1),t("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),t("LiveRoomLecturerSelector",{ref:"lecturerSelect",on:{selected:e.addLecturers}}),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"mini"},on:{click:function(t){return e.handleAdd()}}},[e._v("新增")]),e.lecturerList&&e.lecturerList.length>0&&e.canSave?t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("保存")]):e._e(),e.ids&&e.ids.length>0?t("el-button",{attrs:{type:"danger",plain:"",icon:"el-icon-delete",size:"mini",disabled:!e.ids||0==e.ids.length},on:{click:e.handleDeleteBatch}},[e._v("删除")]):e._e()],1)],1)},Cs=[];const Is={name:"Lecturer",components:{LiveRoomLecturerSelector:Wo,Pagination:so.A},props:{data:{type:Object}},data(){return{loading:!1,ids:[],showSearch:!0,total:0,roomId:null,lecturerList:[],canSave:!1,queryParams:{pageNum:1,pageSize:10,lecturerName:null,userName:null,nickName:null},lecturerLevels:zo.wY}},methods:{init(){this.roomId=this.data.id,this.queryParams.roomId=this.data.id,this.lecturerList=this.data.lecturerList,this.getList()},handleClose(){this.$emit("close")},submitForm(){this.lecturerList&&this.lecturerList.length>0?Jo(this.lecturerList).then(e=>{this.$modal.msgSuccess("修改成功"),this.$emit("close")}):this.$modal.msgSuccess("未添加讲师")},getList(){this.loading=!0,this.canSave=!1,Yo(this.roomId).then(e=>{this.lecturerList=e.data.records||e.data,this.total=Number(e.total||e.data.total),this.loading=!1})},reset(){this.form={roomId:null,userId:null,indx:null,isVote:null,voteCount:null},this.resetForm("form")},handleQuery(){this.queryParams.pageNum=1,this.getList()},resetQuery(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange(e){this.ids=e},handleAdd(){function e(e){let t=this.lecturerList.filter(t=>t.userId==e.userId);return!!(t&&t.length>0)}let t=e.bind(this);this.$refs.lecturerSelect.show({},t,Qo,"50%",!1)},addLecturers(e){if(e){let t=this;e.forEach(e=>e.roomId=t.roomId),e.forEach(e=>{let i=this.lecturerList.filter(t=>t.userId==e.userId);i&&i.length>0||(t.canSave=!0,t.lecturerList.push(e))})}},handleUpdate(e,t){Xo(e).then(e=>{200!=e.code&&201!=e.code||(this.$modal.msgSuccess("修改成功"),this.getList())})},handleDelete(e,t){Zo(e).then(e=>{200!=e.code&&201!=e.code||(this.$modal.msgSuccess("成功删除"),this.getList())})},handleDeleteBatch(){this.ids&&this.ids.length>0&&es(this.ids).then(e=>{200!=e.code&&201!=e.code||(this.$modal.msgSuccess("成功删除"),this.getList())})}}},Rs=Is;var ws=(0,v.A)(Rs,ks,Cs,!1,null,"3321d030",null);const As=ws.exports;var _s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"editpage-container"},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},e._l(e.catalogs,function(i,o){return!i["vif"]||i["vif"]&&i["vif"](e.form.extValue)?t("el-form-item",{key:"catalog_"+o,attrs:{label:i.label}},[t("ExtValueSettingFields",{attrs:{catalog:i,data:e.form.extValue},on:{"update:data":function(t){return e.$set(e.form,"extValue",t)}}})],1):e._e()}),1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),t("el-button",{on:{click:e.handleClose}},[e._v("关 闭")])],1)],1)},xs=[];const Ts={catalogs:[{label:"是否开启低延时直播",field:"artcLiveStream",component:"radio",componentProps:{options:[{label:"否",value:0},{label:"是",value:1}]}},{label:"是否启用积分功能",field:"enableUserPoints",component:"radio",componentProps:{options:[{label:"否",value:0},{label:"是",value:1}]}},{label:"直播间发送消息间隔(秒)",field:"sendMsgDelay",component:"inputNumber",componentProps:{min:2,max:600,step:2,stepStrictly:!0}},{label:"是否广播用户进入消息",field:"noticeUserLogin",component:"radio",componentProps:{options:[{label:"否",value:0},{label:"是",value:1}]}},{label:"是否广播用户积分消息",field:"noticeUserPoint",component:"radio",vif:e=>1===Number(e["enableUserPoints"]),componentProps:{options:[{label:"否",value:0},{label:"是",value:1}]}},{label:"是否开启自动登录",field:"userAutoLogin",component:"radio",componentProps:{options:[{label:"否",value:0},{label:"是",value:1}]}},{label:"是否关闭单一登陆",field:"disableUserSingleLogin",component:"radio",componentProps:{options:[{label:"否",value:0},{label:"是",value:1}]}},{label:"关闭点赞",field:"disableLike",component:"radio",componentProps:{options:[{label:"否",value:0},{label:"是",value:1}]}},{label:"关闭收藏",field:"disableFavorite",component:"radio",componentProps:{options:[{label:"否",value:0},{label:"是",value:1}]}},{label:"开启回放",field:"enablePlayback",component:"radio",componentProps:{options:[{label:"否",value:0},{label:"是",value:1}]}}]},Ps=Ts;var Fs=function(){var e=this,t=e._self._c;return"radio"==e.catalog.component?t("RadioField",{attrs:{catalog:e.catalog,data:e.data},on:{"update:catalog":function(t){e.catalog=t},"update:data":function(t){e.data=t}}}):"inputNumber"==e.catalog.component?t("InputNumberField",{attrs:{catalog:e.catalog,data:e.data},on:{"update:catalog":function(t){e.catalog=t},"update:data":function(t){e.data=t}}}):e._e()},Ms=[],Us=function(){var e=this,t=e._self._c;return t("el-radio-group",{model:{value:e.data[e.catalog.field],callback:function(t){e.$set(e.data,e.catalog.field,t)},expression:"data[catalog.field]"}},e._l(e.catalog.componentProps.options,function(i){return t("el-radio",{key:i.value,attrs:{label:parseInt(i.value)}},[e._v(e._s(i.label))])}),1)},Os=[];const Ns={name:"RadioField",props:{catalog:{type:Object,required:!0},data:{type:Object,required:!0}}},$s=Ns;var Es=(0,v.A)($s,Us,Os,!1,null,"3e1cd9c2",null);const Bs=Es.exports;var js=function(){var e=this,t=e._self._c;return t("el-input-number",{attrs:{min:e.catalog.componentProps.min,max:e.catalog.componentProps.max,step:e.catalog.componentProps.step,"step-strictly":e.catalog.componentProps.stepStrictly},model:{value:e.data[e.catalog.field],callback:function(t){e.$set(e.data,e.catalog.field,t)},expression:"data[catalog.field]"}})},Ds=[];const Ks={name:"RadioField",props:{catalog:{type:Object,required:!0},data:{type:Object,required:!0}}},zs=Ks;var Vs=(0,v.A)(zs,js,Ds,!1,null,"79b138cf",null);const qs=Vs.exports,Hs={name:"ExtValueSettingFields",components:{RadioField:Bs,InputNumberField:qs},props:{catalog:{type:Object,required:!0},data:{type:Object,required:!0}}},Ws=Hs;var Gs=(0,v.A)(Ws,Fs,Ms,!1,null,"158939ad",null);const Qs=Gs.exports,Ys={name:"RoomExtValueSetting",components:{ExtValueSettingFields:Qs},props:{data:{type:Object,required:!0}},data(){return{form:{id:null,extValue:null},rules:{},catalogs:Ps.catalogs}},created(){this.form={id:this.data.id,extValue:Object.assign({},this.data.extValue)},this.form.extValue?"string"==typeof this.form.extValue&&(this.form.extValue=JSON.parse(this.form.extValue)):this.form.extValue={}},methods:{init(){this.form={id:this.data.id,extValue:Object.assign({},this.data.extValue)},this.form.extValue?"string"==typeof this.form.extValue&&(this.form.extValue=JSON.parse(this.form.extValue)):this.form.extValue={}},handleClose(){this.$emit("close")},submitForm(){this.$refs["form"].validate(e=>{if(e){const e=Object.assign({},this.form);e.extValue=JSON.stringify(e.extValue),null!=e.id&&Wi(e).then(()=>{this.$emit("close",!0)})}})}}},Js=Ys;var Xs=(0,v.A)(Js,_s,xs,!1,null,"36a2ab53",null);const Zs=Xs.exports,ea=(e,t=1)=>t*Math.exp(-e*e/200/200)+1,ta={name:"AdminDockbar",data(){return{showDock:!1,showDialog:!1,currentComponent:null,currentData:null,currentTitle:null,currentWidth:"800px",currentShowFooter:!1,components:{robotSet:bi,forbiddenSet:wi,sensitiveWordSet:Ni,userRoomAuthoSet:ro,userForbiddenChatSet:po,userKickOutSet:So,levelForbiddenChatSet:Ao,levelKickOutSet:Mo,chapter:Ss,lecturer:As,roomExtValueSetting:Zs}}},computed:{...(0,a.L8)(["getUserInfo","getToken","getLiveRoomInfo","getLiveRoomTheme","getLiveRoomStyle","isMobile","getBaseUrlObj","isMulti","isFromApp"])},methods:{getDialogData(){return this.currentData},handleOpenDialog(e,t,i,o,s){this.currentData=e,this.currentTitle=i,this.currentWidth=o,this.currentComponent=this.components[t],this.currentShowFooter=s,this.showDialog=!0,this.$nextTick(()=>{this.$refs.curComp&&this.$refs.curComp.init&&this.$refs.curComp.init instanceof Function&&this.$refs.curComp.init()})},closeDialog(e){this.showDialog=!1},dockMouseMove(e){e.currentTarget.querySelectorAll(".dock-item").forEach(t=>{const i=t.getBoundingClientRect(),o=i.left+i.width/2;t.style.setProperty("--scale",ea(e.clientX-o))})},dockMouseLeave(e){e.currentTarget.querySelectorAll(".dock-item").forEach(e=>{e.style.setProperty("--scale",1)}),this.showDock=!1},handleRowChange(e,t){t||Wi(e).then(e=>{})}}},ia=ta;var oa=(0,v.A)(ia,ci,mi,!1,null,"79f18382",null);const sa=oa.exports;var aa=function(){var e=this,t=e._self._c;return t("div",{ref:"videoContainer",staticClass:"video-container",class:e.orientation+(e.getLiveRoomTheme.liveSlideAdvList&&e.getLiveRoomTheme.liveSlideAdvList.length||e.getLiveRoomTheme.swiperContent.trim().length||e.getSmallAdList&&e.getSmallAdList.length&&(!e.getLiveRoomStyle.adSmallPanelPositionStyle||!e.getLiveRoomStyle.adSmallPanelPositionStyle.position||e.getLiveRoomStyle.adSmallPanelPositionStyle&&e.getLiveRoomStyle.adSmallPanelPositionStyle.position&&"topLeft"!=e.getLiveRoomStyle.adSmallPanelPositionStyle.position)?"":" full-height")},[!e.getLiveStateInfo.active&&e.getLiveRoomTheme.warmImg&&/\.[Mm][Pp]4$/g.test(e.getLiveRoomTheme.warmImg)?t("video",{staticClass:"video-warm-img",attrs:{src:e.getLiveRoomTheme.warmImg,autoplay:"",loop:""}}):e._e(),e.getLiveStateInfo.active||!e.getLiveRoomTheme.warmImg||/\.[Mm][Pp]4$/g.test(e.getLiveRoomTheme.warmImg)?e._e():t("img",{staticClass:"video-warm-img",attrs:{src:e.getLiveRoomTheme.warmImg}}),["webrtc","whep"].indexOf(e.getLiveRoomInfo.liveStreamSupplier)>=0&&e.getLiveStateInfo.active?t("div",{ref:"videoPanel",staticClass:"video-panel"},[t("video",{attrs:{id:"videoPlayer",controls:"",autoplay:""}})]):e.getLiveStateInfo.active?t("div",{ref:"videoPanel",staticClass:"video-panel"},[t("div",{staticClass:"video-player-panel",attrs:{id:"videoPlayer"}})]):e._e(),t("div",{staticClass:"cssmarquee-container",class:e.getLiveRoomTheme.layout+(e.getLiveStateInfo.active?" play":"")},[t("div",{staticClass:"cssmarquee",style:(e.isMobile?e.getLiveRoomStyle.mobileNoticeContainerStyle:e.getLiveRoomStyle.noticeContainerStyle)||{}},[t("div",{staticClass:"wrapper",style:(e.isMobile?e.getLiveRoomStyle.mobileNoticeStyle:e.getLiveRoomStyle.noticeStyle)||{}},[t("p",{staticClass:"marqueeWords",style:(e.isMobile?e.getLiveRoomStyle.mobileNoticeStyle:e.getLiveRoomStyle.noticeStyle)||{}},[e._v(e._s(e.getLiveRoomTheme.swiperContent))])])])])])},la=[],na=i(46197);const ra={name:"LayoutLeftRightVideoPanel",data(){return{orientation:"portrait",videoUrl:null}},computed:{...(0,a.L8)(["getLiveStateInfo","getLiveRoomInfo","getUserInfo","getLiveRoomStyle","isFromApp","isMobile","getLiveRoomTheme","getLiveChapterItem","getOnlineUserTotal","getRobotTotal","getToken"]),getSmallAdList(){return this.getLiveRoomTheme.liveSlideAdvSmallList&&this.getLiveRoomTheme.liveSlideAdvSmallList.filter(e=>!e.delFlag)||null},hasNotice(){return this.getLiveRoomTheme.noticeContent&&this.getLiveRoomTheme.noticeContent.replace(/(<p>|<br>|<\/p>|<\/br>|<br\/>)/gi,"")}},mounted(){let e=this;e.getRobotList(),e.$nextTick(()=>{e.openNotice(),e.initPlayer()}),e.BUS.updatePlayer=e.updatePlayer,e.BUS.changeOrientation=e.changeOrientation},methods:{getRobotList(){let e={type:1,id:this.getLiveRoomInfo.id,count:200};(0,S.$H)(e).then(e=>{this.$store.dispatch("setRobotList",e.data)}).catch(e=>{console.error(e)}),(0,S.u3)({id:this.getLiveRoomInfo.id}).then(e=>{this.$store.dispatch("setRobotTotal",e.data)}).catch(e=>{console.error(e)})},openNotice(){if(this.getLiveRoomTheme.noticeContent&&this.getLiveRoomTheme.noticeContent.replace(/(<p>|<br>|<\/p>|<\/br>|<br\/>)/gi,"")){let e={title:this.getLiveRoomTheme.noticeTitle||"提示信息",titleStyle:{color:"var(--bc-color-light-gray)",backgroundColor:"var(--bc-color-dark-red)",borderBottomColor:"var(--bc-color-dark-orange)"},buttonTitle:this.getLiveRoomTheme.noticeBtnLabel||"确认",buttonBarStyle:{justifyContent:"center",backgroundColor:"var(--bc-color-light-orange)",borderTop:"unset"},buttonStyle:{color:"var(--bc-color-light-gray)",backgroundColor:"var(--bc-color-dark-red)",padding:"5px 20px"},content:'<div class="ql-editor">'+this.getLiveRoomTheme.noticeContent+"</div>",bodyClass:"ql-snow",containerStyle:{backgroundColor:"var(--bc-color-light-orange)",borderBottomColor:"var(--bc-color-light-orange)",padding:"0px 0px 10px 0px"},closeButtonStyle:{border:"1px solid var(--bc-color-orange)",color:"var(--bc-color-orange)"},width:this.isMobile?"100%":"700px",height:"auto"};this.BUS.openLink(e)}},changeOrientation(e){this.orientation=e},initPlayer(){(0,S.HE)({channelCode:this.getLiveRoomInfo.channelCode}).then(e=>{let t=e;this.$store.dispatch("setLiveStateInfo",t)})},updatePlayer(e,t,i,o,s,a,l,n){let r=this;this.$nextTick(()=>{setTimeout(()=>{if(["webrtc","whep"].indexOf(this.getLiveRoomInfo.liveStreamSupplier)>=0)(0,na.UX)(i,e,t,this.getLiveRoomTheme.warmImg,s,a,l,this.getLiveRoomInfo.id,this.getUserInfo.userName,this.getToken,this.turnServerConf,n,this.getLiveRoomInfo.extValue,this.getLiveRoomInfo.liveStreamLicenseUrl);else if(i){let o=r.$refs.videoPlayerFrame;if(o){let c=o.contentWindow;c&&setTimeout(()=>{const o="&channelCode="+r.getLiveRoomInfo.channelCode+"&roomId="+r.getLiveRoomInfo.id+"&userName="+r.getUserInfo.userName;e+=o,t+=o,c.postMessage({cmd:"initPlayer",args:{active:i,url:e,rtsUrl:t,roomId:this.getLiveRoomInfo.id,userName:this.getUserInfo.userName,token:this.getToken,turnServerConf:this.turnServerConf,wormImg:this.getLiveRoomTheme.warmImg,channelId:s,channelCode:a,liveList:l,isUpdateUrl:n,extValue:this.getLiveRoomInfo.extValue,liveStreamLicenseUrl:this.getLiveRoomInfo.liveStreamLicenseUrl}},"*"),window.removeEventListener("message",na.e6),window.addEventListener("message",na.e6,!1)},300)}}else{let e=r.$refs.videoPlayerFrame;if(e){let t=e.contentWindow;t&&(t.postMessage({cmd:"destroyPlayer"},"*"),window.removeEventListener("message",na.e6))}}},200)})}}},ca=ra;var ma=(0,v.A)(ca,aa,la,!1,null,"df231096",null);const da=ma.exports,ua={name:"LayoutLeftRight",components:{LayoutLeftRightVideoPanel:da,RightPanel:Ut,AdminDockbar:sa,LayoutLeftRightFooter:ri,LayoutLeftRightHeader:Yt},data(){return{myMobile:void 0}},computed:{...(0,a.L8)(["getToken","getLiveRoomInfo","getLiveRoomTheme","getLiveRoomStyle","isMobile","getBaseUrlObj","isMulti"])},mounted(){this.myMobile=!!(this.$mobileDetect.phone()||window.innerWidth<=768)},methods:{}},ha=ua;var ga=(0,v.A)(ha,Ot,Nt,!1,null,"d9d966c2",null);const pa=ga.exports;var va=function(){var e=this,t=e._self._c;return t("div",{staticClass:"big-right-main-container"},[t("Header"),t("div",{staticClass:"layout-container"},[t("div",{staticClass:"main-container"},[t("div",{staticClass:"header"},[t("div",{staticClass:"header-title"},[t("div",{staticClass:"text"},[e.getLiveStateInfo.active?t("img",{attrs:{src:i(60934)}}):t("img",{attrs:{src:i(20480)}}),e.getLiveChapterItem&&e.getLiveChapterItem.name?t("span",[e._v(e._s(e.getLiveChapterItem.name))]):e._e()])]),t("div",{staticClass:"header-menu"},[t("div",{staticClass:"text ml-15",style:e.getLiveRoomStyle.videoHeadMenuBtnStyle||{},on:{click:function(t){return e.openMenu()}}},[t("svg-icon",{style:e.getLiveRoomStyle.videoHeadMenuIconBtnStyle||{color:"#2368ff",margin:"0px 3px 0px"},attrs:{"icon-class":"menu"}}),t("span",[e._v("节目单")])],1)])]),t("div",{ref:"videoContainer",staticClass:"video-container",class:e.orientation+(e.getLiveRoomTheme.liveSlideAdvList&&e.getLiveRoomTheme.liveSlideAdvList.length||e.getLiveRoomTheme.swiperContent.trim().length||e.getSmallAdList&&e.getSmallAdList.length&&(!e.getLiveRoomStyle.adSmallPanelPositionStyle||!e.getLiveRoomStyle.adSmallPanelPositionStyle.position||e.getLiveRoomStyle.adSmallPanelPositionStyle&&e.getLiveRoomStyle.adSmallPanelPositionStyle.position&&"topLeft"!=e.getLiveRoomStyle.adSmallPanelPositionStyle.position)?"":" full-height")},[!e.getLiveStateInfo.active&&e.getLiveRoomTheme.warmImg&&/\.[Mm][Pp]4$/g.test(e.getLiveRoomTheme.warmImg)?t("video",{staticClass:"video-warm-img",attrs:{src:e.getLiveRoomTheme.warmImg,autoplay:"",loop:""}}):e._e(),e.getLiveStateInfo.active||!e.getLiveRoomTheme.warmImg||/\.[Mm][Pp]4$/g.test(e.getLiveRoomTheme.warmImg)?e._e():t("img",{staticClass:"video-warm-img",attrs:{src:e.getLiveRoomTheme.warmImg}}),["webrtc","whep"].indexOf(e.getLiveRoomInfo.liveStreamSupplier)>=0&&e.getLiveStateInfo.active?t("div",{ref:"videoPanel",staticClass:"video-panel"},[t("video",{attrs:{id:"videoPlayer",controls:"",autoplay:""}})]):e.getLiveStateInfo.active?t("div",{ref:"videoPanel",staticClass:"video-panel"},[t("div",{staticClass:"video-player-panel",attrs:{id:"videoPlayer"}})]):e._e(),t("div",{staticClass:"cssmarquee-container",class:e.getLiveRoomTheme.layout+(e.getLiveStateInfo.active?" play":"")},[t("div",{staticClass:"cssmarquee",style:(e.isMobile?e.getLiveRoomStyle.mobileNoticeContainerStyle:e.getLiveRoomStyle.noticeContainerStyle)||{}},[t("div",{staticClass:"wrapper",style:(e.isMobile?e.getLiveRoomStyle.mobileNoticeStyle:e.getLiveRoomStyle.noticeStyle)||{}},[t("p",{staticClass:"marqueeWords",style:(e.isMobile?e.getLiveRoomStyle.mobileNoticeStyle:e.getLiveRoomStyle.noticeStyle)||{}},[e._v(e._s(e.getLiveRoomTheme.swiperContent))])])])])]),e.getLiveRoomTheme.liveSlideAdvList&&e.getLiveRoomTheme.liveSlideAdvList.length||e.getLiveRoomTheme.swiperContent.trim().length||e.getSmallAdList&&e.getSmallAdList.length&&(!e.getLiveRoomStyle.adSmallPanelPositionStyle||!e.getLiveRoomStyle.adSmallPanelPositionStyle.position||e.getLiveRoomStyle.adSmallPanelPositionStyle&&e.getLiveRoomStyle.adSmallPanelPositionStyle.position&&"topLeft"!=e.getLiveRoomStyle.adSmallPanelPositionStyle.position)?t("div",{staticClass:"bottom-container",style:e.getLiveRoomStyle.bottomStyle},[e.getLiveRoomTheme.liveSlideAdvList&&e.getLiveRoomTheme.liveSlideAdvList.length||e.getLiveRoomTheme.swiperContent.trim().length||e.getSmallAdList&&e.getSmallAdList.length&&(!e.getLiveRoomStyle.adSmallPanelPositionStyle||!e.getLiveRoomStyle.adSmallPanelPositionStyle.position||e.getLiveRoomStyle.adSmallPanelPositionStyle&&e.getLiveRoomStyle.adSmallPanelPositionStyle.position&&"topLeft"!=e.getLiveRoomStyle.adSmallPanelPositionStyle.position)?t("div",{ref:"swiper",staticClass:"notices-container",style:e.getLiveRoomStyle.adPanelStyle},[t("div",{staticClass:"title",style:e.getLiveRoomStyle.adPanelTitleStyle},[e.getLiveRoomTheme.liveSlideAdvList&&e.getLiveRoomTheme.liveSlideAdvList.length?t("div",{staticClass:"item",class:"activities"==e.activeAdTab?"active":"",style:"activities"==e.activeAdTab?e.getLiveRoomStyle.adPanelItemActiveStyle:e.getLiveRoomStyle.adPanelItemStyle,attrs:{name:"activities"},on:{click:function(t){e.activeAdTab="activities"}}},[e._v("活动")]):e._e(),e.hasNotice?t("div",{staticClass:"item",class:"notices"==e.activeAdTab?"active":"",style:"notices"==e.activeAdTab?e.getLiveRoomStyle.adPanelItemActiveStyle:e.getLiveRoomStyle.adPanelItemStyle,attrs:{name:"notices"},on:{click:function(t){e.activeAdTab="notices"}}},[e._v("公告")]):e._e()]),t("div",{staticClass:"body"},[e.getLiveRoomTheme.liveSlideAdvList&&e.getLiveRoomTheme.liveSlideAdvList.length?t("div",{directives:[{name:"show",rawName:"v-show",value:"activities"==e.activeAdTab,expression:"activeAdTab=='activities'"}],staticClass:"ad-banner"},[t("el-carousel",{staticClass:"carousel-container",attrs:{interval:e.getLiveRoomStyle.adSwiperStyle&&e.getLiveRoomStyle.adSwiperStyle.interval?e.getLiveRoomStyle.adSwiperStyle.interval:3e3,arrow:"always"}},e._l(e.getLiveRoomTheme.liveSlideAdvList,function(i){return t("el-carousel-item",{key:"smAd_"+i.id},[t("img",{staticClass:"carousel-banner-item",staticStyle:{height:"100%",width:"100%"},attrs:{src:i.img},on:{click:function(t){return t.stopPropagation(),e.openLink(i)}}})])}),1)],1):e._e(),"notices"==e.activeAdTab&&e.hasNotice?t("div",{staticClass:"notice-panel",style:e.getLiveRoomStyle.adContentStyle},[t("div",{staticClass:"ql-editor",domProps:{innerHTML:e._s(e.noticeContent)}})]):e._e()])]):e._e(),e.getSmallAdList&&e.getSmallAdList.length&&(!e.getLiveRoomStyle.adSmallPanelPositionStyle||!e.getLiveRoomStyle.adSmallPanelPositionStyle.position||e.getLiveRoomStyle.adSmallPanelPositionStyle&&e.getLiveRoomStyle.adSmallPanelPositionStyle.position&&"topLeft"!=e.getLiveRoomStyle.adSmallPanelPositionStyle.position)?t("div",{ref:"adSmallContainer",staticClass:"ad-small-container",style:e.getLiveRoomStyle.adSmallPanelStyle},[t("Animator",{attrs:{duration:(e.getLiveRoomStyle.adSmallSwiperStyle&&e.getLiveRoomStyle.adSmallSwiperStyle.interval?e.getLiveRoomStyle.adSmallSwiperStyle.interval:8)+"s",animationName:"scale",stop:e.getSmallAdList.length<=1}},e._l(e.getSmallAdList,function(i){return t("img",{key:"smAd_"+i.id,staticClass:"banner-item",attrs:{src:i.img},on:{click:function(t){return t.stopPropagation(),e.openLink(i)}}})}),0)],1):e._e()]):e._e(),t("AdminDockbar")],1),t("RightPanel",{attrs:{layout:"big-right"}})],1)],1)},fa=[],ba=i(97747),ya=function(){var e=this,t=e._self._c;return t("div",{staticClass:"menu-list"},[e._l(e.chapterItemList,function(i){return t("div",{key:"chapterItem_"+i.id,staticClass:"chapter-item"},[t("div",{staticClass:"name"},[e._v(e._s(i.name))]),t("div",{staticClass:"time"},[e._v(e._s(e.parseTime(i.startTime))+"-"+e._s(e.parseTime(i.endTime)))]),t("div",{staticClass:"lecturer"},[e._v(e._s(i.lecturerList.map(e=>e.lecturerName).join("+")))])])}),e.chapterItemList&&0!=e.chapterItemList.length?e._e():t("div",{staticStyle:{width:"100%","text-align":"center"}},[e._v(" 今日未安排节目 ")])],2)},La=[],Sa=i(82956);const ka={name:"ChapterItemListPanel",data(){return{chapterItemList:[]}},computed:{...(0,a.L8)(["getLiveRoomInfo"])},mounted(){this.getChapterItemList()},methods:{getChapterItemList(){let e={pageNumber:1,pageSize:100,roomId:this.getLiveRoomInfo.id,channelCode:this.getLiveRoomInfo.channelCode,date:(0,Sa.i$)(new Date,"yyyy-MM-dd")};(0,S.$$)(e).then(e=>{this.chapterItemList=e.data.records.sort((e,t)=>e.startTime>t.startTime?1:e.startTime==t.startTime?0:-1)})},parseTime(e){return(0,fs.pe)(e,"{h}:{i}")}}},Ca=ka;var Ia=(0,v.A)(Ca,ya,La,!1,null,"7d97b388",null);const Ra=Ia.exports,wa=(e,t=1)=>t*Math.exp(-e*e/200/200)+1,Aa={props:{smallAdElmTop:String},data(){return{mySmallAdElmTop:this.smallAdElmTop||"",activeAdTab:"activities",lecturerList:[],chapterItemListPanel:Ra,orientation:"portrait",showDock:!1,showDialog:!1,currentComponent:null,currentData:null,currentTitle:null,currentWidth:"800px",currentShowFooter:!1,components:{robotSet:bi,forbiddenSet:wi,sensitiveWordSet:Ni,userRoomAuthoSet:ro,userForbiddenChatSet:po,userKickOutSet:So,levelForbiddenChatSet:Ao,levelKickOutSet:Mo,chapter:Ss,lecturer:As}}},computed:{...(0,a.L8)(["getLiveStateInfo","getLiveRoomInfo","getUserInfo","getLiveRoomStyle","isFromApp","isMobile","getLiveRoomTheme","getLiveChapterItem","getOnlineUserTotal","getRobotTotal","getToken"]),getSmallAdList(){return this.getLiveRoomTheme.liveSlideAdvSmallList&&this.getLiveRoomTheme.liveSlideAdvSmallList.filter(e=>!e.delFlag)||null},hasNotice(){return this.getLiveRoomTheme.noticeContent&&this.getLiveRoomTheme.noticeContent.replace(/(<p>|<br>|<\/p>|<\/br>|<br\/>)/gi,"")&&this.getLiveRoomTheme.noticeContent.replace(/(<p>|<br>|<\/p>|<\/br>|<br\/>)/gi,"").trim()&&this.getLiveRoomTheme.noticeContent.replace(/(<p>|<br>|<\/p>|<\/br>|<br\/>)/gi,"").trim().length},noticeContent(){return this.getLiveRoomTheme.noticeContent}},watch:{smallAdElmTop(e){this.mySmallAdElmTop=e}},mounted(){let e=this.$refs.animationItem;this.$nextTick(()=>{if(e){let t=e.children[0].getBoundingClientRect().height,i="-"+(t+11)+"px";e.style.top=i}this.getLiveRoomTheme.liveSlideAdvList&&this.getLiveRoomTheme.liveSlideAdvList.length||!this.hasNotice?this.getLiveRoomTheme.liveSlideAdvList&&this.getLiveRoomTheme.liveSlideAdvList.length&&(this.activeAdTab="activities"):this.activeAdTab="notices"});let t=this;const i=()=>{let e=t.$refs.adSmallContainer,i=t.$refs.swiper;if(e){let t=e.getBoundingClientRect().height;e.style.width=t+"px",i&&(i.style.width="calc(100% - "+t+"px")}};t.BUS.calcSmallAdElmWidth=i,t.$nextTick(()=>{setTimeout(()=>{i()},200)}),t.getRobotList(),t.$nextTick(()=>{t.openNotice(),t.initPlayer()}),t.BUS.updatePlayer=t.updatePlayer,t.BUS.changeOrientation=t.changeOrientation,window.removeEventListener("message",na.e6)},methods:{changeOrientation(e){this.orientation=e},initPlayer(){(0,S.HE)({channelCode:this.getLiveRoomInfo.channelCode}).then(e=>{let t=e;this.$store.dispatch("setLiveStateInfo",t)}).catch(e=>{console.log(e)})},updatePlayer(e,t,i,o,s,a,l,n){let r=this;this.$nextTick(()=>{setTimeout(()=>{if(["webrtc","whep"].indexOf(this.getLiveRoomInfo.liveStreamSupplier)>=0)(0,na.UX)(i,e,t,this.getLiveRoomTheme.warmImg,s,a,l,this.getLiveRoomInfo.id,this.getUserInfo.userName,this.getToken,this.turnServerConf,n,this.getLiveRoomInfo.extValue,this.getLiveRoomInfo.liveStreamLicenseUrl);else if(i){(0,na.yZ)();const o="&channelCode="+r.getLiveRoomInfo.channelCode+"&roomId="+r.getLiveRoomInfo.id+"&userName="+r.getUserInfo.userName;e+=o,t+=o,(0,na.UX)(i,e,t,this.getLiveRoomTheme.warmImg,s,a,l,this.getLiveRoomInfo.id,this.getUserInfo.userName,this.getToken,this.turnServerConf,n,this.getLiveRoomInfo.extValue,this.getLiveRoomInfo.liveStreamLicenseUrl)}else(0,na.yZ)()},300)})},openNotice(){if(this.getLiveRoomTheme.noticeContent&&this.getLiveRoomTheme.noticeContent.replace(/(<p>|<br>|<\/p>|<\/br>|<br\/>)/gi,"")){let e={title:this.getLiveRoomTheme.noticeTitle||"提示信息",titleStyle:{color:"var(--bc-color-light-gray)",backgroundColor:"var(--bc-color-dark-red)",borderBottomColor:"var(--bc-color-dark-orange)"},buttonTitle:this.getLiveRoomTheme.noticeBtnLabel||"确认",buttonBarStyle:{justifyContent:"center",backgroundColor:"var(--bc-color-light-orange)",borderTop:"unset"},buttonStyle:{color:"var(--bc-color-light-gray)",backgroundColor:"var(--bc-color-dark-red)",padding:"5px 20px"},content:'<div class="ql-editor">'+this.getLiveRoomTheme.noticeContent+"</div>",bodyClass:"ql-snow",containerStyle:{backgroundColor:"var(--bc-color-light-orange)",borderBottomColor:"var(--bc-color-light-orange)",padding:"0px 0px 10px 0px"},closeButtonStyle:{border:"1px solid var(--bc-color-orange)",color:"var(--bc-color-orange)"},width:this.isMobile?"100%":"700px",height:"auto"};this.openLink(e)}},openMenu(){let e={title:"节目单",component:this.chapterItemListPanel,width:"500px",height:"auto",titleStyle:{backgroundColor:"var(--bc-color-orange)",borderBottomColor:"var(--bc-color-dark-orange)"}};this.openLink(e)},async logout(){this.$confirm("确定注销并退出系统吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$store.dispatch("LogOut").then(()=>{const e=(0,M.DT)();location.href=e+"index"})}).catch(()=>{})},openLink(e){this.BUS.openLink(e)},getRobotList(){let e={type:1,id:this.getLiveRoomInfo.id,count:200};(0,S.$H)(e).then(e=>{this.$store.dispatch("setRobotList",e.data)}),(0,S.u3)({id:this.getLiveRoomInfo.id}).then(e=>{this.$store.dispatch("setRobotTotal",e.data)})},lecturerVote(e){let t={roomId:this.getLiveRoomInfo.id,userId:e.userId,voteUserId:this.getUserInfo.userId};(0,S.yj)(t).then(e=>{this.getLecturerList()})},accountAction(e){switch(e){case"changePasswd":this.changePasswd();break;case"changeNickname":this.changeNickname();break;case"logout":this.logout();break}},changePasswd(){let e=this;this.BUS.showDialog({width:"400px",height:"320px"},()=>{e.$modal.show("dialog",{title:"修改密码",component:Bt.A,props:{},containerStyle:{display:"flex",flexDirection:"row",justifyContent:"center",overflow:"auto"},bodyStyle:{display:"block"},on:{confirm:e.onCloseDialog,cancel:e.onCloseDialog}})})},changeNickname(){let e=this;this.BUS.showDialog({width:"300px",height:"220px"},()=>{e.$modal.show("dialog",{title:"修改昵称",component:jt.A,props:{},containerStyle:{display:"flex",flexDirection:"row",justifyContent:"center",overflow:"auto"},bodyStyle:{display:"block"},on:{confirm:e.onCloseDialog,cancel:e.onCloseDialog}})})},onCloseDialog(e){this.$modal.hide("dialog")},dockMouseMove(e){e.currentTarget.querySelectorAll(".dock-item").forEach(t=>{const i=t.getBoundingClientRect(),o=i.left+i.width/2;t.style.setProperty("--scale",wa(e.clientX-o))})},dockMouseLeave(e){e.currentTarget.querySelectorAll(".dock-item").forEach(e=>{e.style.setProperty("--scale",1)}),this.showDock=!1},handleRowChange(e,t){t||Wi(e).then(e=>{})},getDialogData(){return this.currentData},handleOpenDialog(e,t,i,o,s){this.currentData=e,this.currentTitle=i,this.currentWidth=o,this.currentComponent=this.components[t],this.currentShowFooter=s,this.showDialog=!0,this.$nextTick(()=>{this.$refs.curComp&&this.$refs.curComp.init&&this.$refs.curComp.init instanceof Function&&this.$refs.curComp.init()})},closeDialog(e){this.showDialog=!1}}},_a={name:"LayoutBigRight",components:{AdminDockbar:sa,Animator:si,Header:ba.A,RightPanel:Ut},mixins:[Aa]},xa=_a;var Ta=(0,v.A)(xa,va,fa,!1,null,"2afa9c67",null);const Pa=Ta.exports;var Fa=function(){var e=this,t=e._self._c;return t("div",{staticClass:"lite-left-main-container"},[t("Header"),t("div",{staticClass:"layout-container"},[t("LeftPanel",{attrs:{layout:"lite-left"}}),t("div",{staticClass:"main-container"},[t("div",{staticClass:"header"},[t("div",{staticClass:"header-title"},[t("div",{staticClass:"text"},[e.getLiveStateInfo.active?t("img",{attrs:{src:i(60934)}}):t("img",{attrs:{src:i(20480)}}),e.getLiveChapterItem&&e.getLiveChapterItem.name?t("span",[e._v(e._s(e.getLiveChapterItem.name))]):e._e()])]),t("div",{staticClass:"header-menu"},[t("div",{staticClass:"text ml-15",style:e.getLiveRoomStyle.videoHeadMenuBtnStyle||{},on:{click:function(t){return e.openMenu()}}},[t("svg-icon",{style:e.getLiveRoomStyle.videoHeadMenuIconBtnStyle||{color:"#2368ff",margin:"0px 3px 0px"},attrs:{"icon-class":"menu"}}),t("span",[e._v("节目单")])],1)])]),t("div",{ref:"videoContainer",staticClass:"video-container",class:e.orientation+(e.getLiveRoomTheme.liveSlideAdvList&&e.getLiveRoomTheme.liveSlideAdvList.length||e.getLiveRoomTheme.swiperContent&&e.getLiveRoomTheme.swiperContent.trim().length||e.getSmallAdList&&e.getSmallAdList.length&&(!e.getLiveRoomStyle.adSmallPanelPositionStyle||!e.getLiveRoomStyle.adSmallPanelPositionStyle.position||e.getLiveRoomStyle.adSmallPanelPositionStyle&&e.getLiveRoomStyle.adSmallPanelPositionStyle.position&&"topLeft"!=e.getLiveRoomStyle.adSmallPanelPositionStyle.position)?"":" full-height")},[!e.getLiveStateInfo.active&&e.getLiveRoomTheme.warmImg&&/\.[Mm][Pp]4$/g.test(e.getLiveRoomTheme.warmImg)?t("video",{staticClass:"video-warm-img",attrs:{src:e.getLiveRoomTheme.warmImg,autoplay:"",loop:""}}):e._e(),e.getLiveStateInfo.active||!e.getLiveRoomTheme.warmImg||/\.[Mm][Pp]4$/g.test(e.getLiveRoomTheme.warmImg)?e._e():t("img",{staticClass:"video-warm-img",attrs:{src:e.getLiveRoomTheme.warmImg}}),["webrtc","whep"].indexOf(e.getLiveRoomInfo.liveStreamSupplier)>=0&&e.getLiveStateInfo.active?t("div",{ref:"videoPanel",staticClass:"video-panel"},[t("video",{attrs:{id:"videoPlayer",controls:"",autoplay:""}})]):e.getLiveStateInfo.active?t("div",{ref:"videoPanel",staticClass:"video-panel"},[t("div",{staticClass:"video-player-panel",attrs:{id:"videoPlayer"}})]):e._e(),t("div",{staticClass:"cssmarquee-container",class:e.getLiveRoomTheme.layout+(e.getLiveStateInfo.active?" play":"")},[t("div",{staticClass:"cssmarquee",style:(e.isMobile?e.getLiveRoomStyle.mobileNoticeContainerStyle:e.getLiveRoomStyle.noticeContainerStyle)||{}},[t("div",{staticClass:"wrapper",style:(e.isMobile?e.getLiveRoomStyle.mobileNoticeStyle:e.getLiveRoomStyle.noticeStyle)||{}},[t("p",{staticClass:"marqueeWords",style:(e.isMobile?e.getLiveRoomStyle.mobileNoticeStyle:e.getLiveRoomStyle.noticeStyle)||{}},[e._v(e._s(e.getLiveRoomTheme.swiperContent))])])])])]),e.getLiveRoomTheme.liveSlideAdvList&&e.getLiveRoomTheme.liveSlideAdvList.length||e.getLiveRoomTheme.swiperContent&&e.getLiveRoomTheme.swiperContent.trim().length||e.getSmallAdList&&e.getSmallAdList.length&&(!e.getLiveRoomStyle.adSmallPanelPositionStyle||!e.getLiveRoomStyle.adSmallPanelPositionStyle.position||e.getLiveRoomStyle.adSmallPanelPositionStyle&&e.getLiveRoomStyle.adSmallPanelPositionStyle.position&&"topLeft"!=e.getLiveRoomStyle.adSmallPanelPositionStyle.position)?t("div",{staticClass:"bottom-container",style:e.getLiveRoomStyle.bottomStyle},[e.getLiveRoomTheme.liveSlideAdvList&&e.getLiveRoomTheme.liveSlideAdvList.length||e.getLiveRoomTheme.swiperContent&&e.getLiveRoomTheme.swiperContent.trim().length||e.getSmallAdList&&e.getSmallAdList.length&&(!e.getLiveRoomStyle.adSmallPanelPositionStyle||!e.getLiveRoomStyle.adSmallPanelPositionStyle.position||e.getLiveRoomStyle.adSmallPanelPositionStyle&&e.getLiveRoomStyle.adSmallPanelPositionStyle.position&&"topLeft"!=e.getLiveRoomStyle.adSmallPanelPositionStyle.position)?t("div",{ref:"swiper",staticClass:"notices-container",style:e.getLiveRoomStyle.adPanelStyle},[t("div",{staticClass:"title",style:e.getLiveRoomStyle.adPanelTitleStyle},[e.getLiveRoomTheme.liveSlideAdvList&&e.getLiveRoomTheme.liveSlideAdvList.length?t("div",{staticClass:"item",class:"activities"==e.activeAdTab?"active":"",style:"activities"==e.activeAdTab?e.getLiveRoomStyle.adPanelItemActiveStyle:e.getLiveRoomStyle.adPanelItemStyle,attrs:{name:"activities"},on:{click:function(t){e.activeAdTab="activities"}}},[e._v("活动")]):e._e(),e.hasNotice?t("div",{staticClass:"item",class:"notices"==e.activeAdTab?"active":"",style:"notices"==e.activeAdTab?e.getLiveRoomStyle.adPanelItemActiveStyle:e.getLiveRoomStyle.adPanelItemStyle,attrs:{name:"notices"},on:{click:function(t){e.activeAdTab="notices"}}},[e._v("公告")]):e._e()]),t("div",{staticClass:"body"},[e.getLiveRoomTheme.liveSlideAdvList&&e.getLiveRoomTheme.liveSlideAdvList.length?t("div",{directives:[{name:"show",rawName:"v-show",value:"activities"==e.activeAdTab,expression:"activeAdTab=='activities'"}],staticClass:"ad-banner"},[t("el-carousel",{staticClass:"carousel-container",attrs:{interval:e.getLiveRoomStyle.adSwiperStyle&&e.getLiveRoomStyle.adSwiperStyle.interval?e.getLiveRoomStyle.adSwiperStyle.interval:3e3,arrow:"always"}},e._l(e.getLiveRoomTheme.liveSlideAdvList,function(i){return t("el-carousel-item",{key:"smAd_"+i.id},[t("img",{staticClass:"carousel-banner-item",staticStyle:{height:"100%",width:"100%"},attrs:{src:i.img},on:{click:function(t){return t.stopPropagation(),e.openLink(i)}}})])}),1)],1):e._e(),"notices"==e.activeAdTab&&e.hasNotice?t("div",{staticClass:"notice-panel",style:e.getLiveRoomStyle.adContentStyle},[t("div",{staticClass:"ql-editor",domProps:{innerHTML:e._s(e.noticeContent)}})]):e._e()])]):e._e(),e.getSmallAdList&&e.getSmallAdList.length&&(!e.getLiveRoomStyle.adSmallPanelPositionStyle||!e.getLiveRoomStyle.adSmallPanelPositionStyle.position||e.getLiveRoomStyle.adSmallPanelPositionStyle&&e.getLiveRoomStyle.adSmallPanelPositionStyle.position&&"topLeft"!=e.getLiveRoomStyle.adSmallPanelPositionStyle.position)?t("div",{ref:"adSmallContainer",staticClass:"ad-small-container",style:e.getLiveRoomStyle.adSmallPanelStyle},[t("Animator",{attrs:{duration:(e.getLiveRoomStyle.adSmallSwiperStyle&&e.getLiveRoomStyle.adSmallSwiperStyle.interval?e.getLiveRoomStyle.adSmallSwiperStyle.interval:8)+"s",animationName:"scale",stop:e.getSmallAdList.length<=1}},e._l(e.getSmallAdList,function(i){return t("img",{key:"smAd_"+i.id,staticClass:"banner-item",attrs:{src:i.img},on:{click:function(t){return t.stopPropagation(),e.openLink(i)}}})}),0)],1):e._e()]):e._e(),t("AdminDockbar")],1),t("RightPanel",{attrs:{layout:"lite-left"}})],1)],1)},Ma=[],Ua=function(){var e=this,t=e._self._c;return t("div",{staticClass:"left-container",style:e.getLiveRoomStyle.leftStyle},[e.getLiveRoomStyle.adSmallPanelPositionStyle&&e.getLiveRoomStyle.adSmallPanelPositionStyle.position&&"topLeft"==e.getLiveRoomStyle.adSmallPanelPositionStyle.position&&e.getSmallAdList&&e.getSmallAdList.length?t("div",{ref:"adSmallContainer",staticClass:"ad-small-container",style:e.getLiveRoomStyle.adSmallPanelStyle},[t("Animator",{attrs:{duration:(e.getLiveRoomStyle.adSmallSwiperStyle&&e.getLiveRoomStyle.adSmallSwiperStyle.interval?e.getLiveRoomStyle.adSmallSwiperStyle.interval:8)+"s",animationName:"scale",stop:e.getSmallAdList.length<=1}},e._l(e.getSmallAdList,function(i){return t("img",{key:"smAd_"+i.id,staticClass:"banner-item",attrs:{src:i.img},on:{click:function(t){return t.stopPropagation(),e.openLink(i)}}})}),0)],1):e._e(),e.lecturerList&&e.lecturerList.length?t("div",{staticClass:"lecture-container",style:e.getLiveRoomStyle.lecturePanelStyle},[t("div",{staticClass:"title",style:e.getLiveRoomStyle.lecturePanelTitleStyle},[e._v("大咖评选")]),t("div",{staticClass:"list-panel"},e._l(e.lecturerList,function(i){return t("div",{key:"item_"+i.userId,staticClass:"list-item"},[t("div",{staticClass:"name",style:e.getLiveRoomStyle.lectureNameStyle},[e._v(e._s(i.lecturerName))]),t("div",{staticClass:"label",style:e.getLiveRoomStyle.lectureCountStyle},[e._v(e._s(i.voteCount+(i.realVoteCount||0))+"票")]),t("div",{staticClass:"btn",style:e.getLiveRoomStyle.lectureBtnStyle,on:{click:function(t){return e.lecturerVote(i)}}},[e._v("投票")])])}),0)]):e._e(),t("div",{staticClass:"title",style:e.getLiveRoomStyle.leftTitleStyle},[e.getUserInfo.type>2?t("div",{staticClass:"robot-setting"},[t("svg-icon",{staticClass:"icon",attrs:{"icon-class":"setting"},on:{click:e.setRobot}})],1):e._e(),e.searchVisible?e._e():t("div",{staticClass:"title-label"},[e._v(" 在线观众("+e._s(e.getOnlineUserTotal+e.getRobotTotal)+") ")]),e.hasAdminPromission(e.getUserInfo,e.getLiveRoomInfo.isTeamAdmin)?t("div",{staticClass:"search-panel"},[e.searchVisible?t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchParam,expression:"searchParam"}],staticClass:"search-input",attrs:{placeholder:"输入昵称或账号"},domProps:{value:e.searchParam},on:{keyup:e.search,input:function(t){t.target.composing||(e.searchParam=t.target.value)}}}):e._e(),e.searchVisible?t("svg-icon",{staticClass:"icon",class:e.searchVisible?"active":"",attrs:{"icon-class":"delete-circle"},on:{click:function(t){t.stopPropagation(),e.searchVisible=!1,e.searchParam=null}}}):t("svg-icon",{staticClass:"icon",class:e.searchVisible?"active":"",attrs:{"icon-class":"search"},on:{click:function(t){t.stopPropagation(),e.searchVisible=!0}}})],1):e._e()]),t("div",{staticClass:"content-container"},[t("div",{staticClass:"center-container"},[e.searchVisible?e._e():t("UserList",{style:e.getLiveRoomStyle.userListStyle,attrs:{layout:e.myLayout}}),e.searchVisible?t("UserSearchResult",{ref:"userSearchResult",style:e.getLiveRoomStyle.userSearchResultStyle,attrs:{layout:e.myLayout}}):e._e()],1)])])},Oa=[];const Na={name:"LeftPanel",props:{layout:String},computed:{...(0,a.L8)(["getUserInfo","getLiveRoomInfo","getLiveRoomStyle","getLiveRoomTheme","getOnlineUserTotal","getRobotTotal"]),getSmallAdList(){return this.getLiveRoomTheme.liveSlideAdvSmallList&&this.getLiveRoomTheme.liveSlideAdvSmallList.filter(e=>!e.delFlag)||null}},components:{Animator:si,UserList:$,UserSearchResult:z},watch:{layout(e){this.myLayout=e}},data(){return{myLayout:this.layout,searchParam:null,searchVisible:!1,showUserPanel:!1,showSearchResultPanel:!1,lecturerList:[],fontColor:"#e84a5f",fontSize:"18px",fontSizeList:[{label:"14号字",value:"14px"},{label:"16号字",value:"16px"},{label:"18号字",value:"18px"},{label:"20号字",value:"20px"},{label:"22号字",value:"22px"},{label:"26号字",value:"26px"},{label:"32号字",value:"32px"}],message:""}},mounted(){this.getLecturerList()},methods:{hasAdminPromission(e,t,i){return(0,h.t)(e,t,i)},search(e){27==e.keyCode?(this.searchVisible=!1,this.searchParam=null):this.$nextTick(()=>{this.searchParam&&this.$refs.userSearchResult.search(this.searchParam)})},selectColor(e){this.fontColor=e},getFontLabelStyle(){return{color:this.fontColor}},getLecturerList(){(0,S.eG)(this.getLiveRoomInfo.id+"").then(e=>{this.lecturerList=e.data}).catch(e=>{console.log(e)})},lecturerVote(e){let t={roomId:this.getLiveRoomInfo.id,userId:e.userId,voteUserId:this.getUserInfo.userId},i=this;(0,S.yj)(t).then(e=>{200==e.code&&(this.$message.success("投票成功"),i.getLecturerList())})},setRobot(){let e=this;e.BUS.showDialog({width:"620px",height:"500px"},()=>{e.$modal.show("dialog",{title:"设置机器人",component:Tt,props:{data:e.getLiveRoomInfo},containerStyle:{display:"flex",flexDirection:"row",justifyContent:"center",overflow:"auto"},bodyStyle:{display:"block",width:"100%"},on:{confirm:e.onCloseDialog,cancel:e.onCloseDialog}})})},onCloseDialog(e){this.$modal.hide("dialog")}}},$a=Na;var Ea=(0,v.A)($a,Ua,Oa,!1,null,"68ea93aa",null);const Ba=Ea.exports,ja={name:"LayoutLiteLeft",components:{AdminDockbar:sa,Animator:si,Header:ba.A,LeftPanel:Ba,RightPanel:Ut},mixins:[Aa]},Da=ja;var Ka=(0,v.A)(Da,Fa,Ma,!1,null,"0256a297",null);const za=Ka.exports;var Va=function(){var e=this,t=e._self._c;return t("div",{staticClass:"main-mobile-container"},[e.getLiveChapterItem&&e.getLiveChapterItem.name?t("div",{staticClass:"chapter-panel"},[e.getLiveChapterItem&&e.getLiveChapterItem.name?t("div",{staticClass:"chapter-name"},[e._v(e._s(e.getLiveChapterItem.name))]):e._e(),e.getLiveChapterItem&&e.getLiveChapterItem.lecturerList&&e.getLiveChapterItem.lecturerList.length?t("div",{staticClass:"lecturer-panel"},[t("div",[e._v("讲师：")]),t("div",e._l(e.getLiveChapterItem.lecturerList,function(i,o){return t("div",{key:"lect_"+o},[e._v(e._s(i.lecturerName))])}),0)]):e._e()]):e._e(),t("div",{ref:"videoContainer",staticClass:"video-container",class:e.orientation+(e.getLiveRoomTheme.liveSlideAdvList&&e.getLiveRoomTheme.liveSlideAdvList.length||e.getLiveRoomTheme.swiperContent.trim().length||e.getSmallAdList&&e.getSmallAdList.length&&(!e.getLiveRoomStyle.adSmallPanelPositionStyle||!e.getLiveRoomStyle.adSmallPanelPositionStyle.position||e.getLiveRoomStyle.adSmallPanelPositionStyle&&e.getLiveRoomStyle.adSmallPanelPositionStyle.position&&"topLeft"!=e.getLiveRoomStyle.adSmallPanelPositionStyle.position)?"":" full-height"),style:e.getLiveRoomStyle.mobileMainStyle&&e.getLiveRoomStyle.mobileMainStyle.background?{background:"unset"}:{},on:{click:function(t){return e.switchToMsg()}}},[!e.getLiveStateInfo.active&&e.getLiveRoomTheme.warmImg&&/\.[Mm][Pp]4$/g.test(e.getLiveRoomTheme.warmImg)?t("video",{ref:"warmVideo",staticClass:"video-warm-img",attrs:{src:e.getLiveRoomTheme.warmImg,autoplay:"",loop:""}}):e.getLiveStateInfo.active||!e.getLiveRoomTheme.warmImg||/\.[Mm][Pp]4$/g.test(e.getLiveRoomTheme.warmImg)?e._e():t("img",{ref:"warmImg",staticClass:"video-warm-img",attrs:{src:e.getLiveRoomTheme.warmImg}}),e.getLiveStateInfo.active?t("div",{ref:"videoPanel",staticClass:"video-panel"},[["webrtc","whep"].indexOf(e.getLiveRoomInfo.liveStreamSupplier)>=0?t("div",{staticClass:"video-player-panel"},[t("video",{attrs:{id:"videoPlayer",controls:"",autoplay:""}})]):t("div",{staticClass:"video-player-panel",attrs:{id:"videoPlayer"}})]):e._e()]),t("div",{staticClass:"cssmarquee-container",class:e.getLiveRoomTheme.layout+(e.isMobile?" mobile":"")},[t("div",{staticClass:"cssmarquee",style:(e.isMobile?e.getLiveRoomStyle.mobileNoticeContainerStyle:e.getLiveRoomStyle.noticeContainerStyle)||{}},[t("div",{staticClass:"wrapper",style:(e.isMobile?e.getLiveRoomStyle.mobileNoticeStyle:e.getLiveRoomStyle.noticeStyle)||{}},[t("p",{staticClass:"marqueeWords",style:(e.isMobile?e.getLiveRoomStyle.mobileNoticeStyle:e.getLiveRoomStyle.noticeStyle)||{}},[e._v(e._s(e.getLiveRoomTheme.swiperContent))])])])]),t("div",{staticClass:"thumb-up-animate-panel-container"},e._l(e.getLiveRoomFavoriteUsers,function(i,o){return t("div",{key:"udynamic_"+o,ref:"animateThumbUpRunner_"+o,refInFor:!0,staticClass:"thumbs-up-animate-panel",style:e.getThumbUpIconPosition(i),on:{animationend:function(t){return e.thumbUpAnimationend(i,t)}}},[2==i.favoriteType?t("svg-icon",{staticClass:"thumb-icon thumbs-up-animate-icon",attrs:{"icon-class":"heart"}}):t("svg-icon",{staticClass:"thumb-icon thumbs-up-animate-icon",attrs:{"icon-class":"thumb-up"}}),t("div",{staticClass:"user-name"},[e._v(" "+e._s(4==i.type&&i.lecturerName?i.lecturerName:i.nickName)+" ")])],1)}),0),"landscape"!=e.orientation?t("MobileBottomPanel",{ref:"mobileBottomPanel"}):e._e(),t("div",{staticClass:"header"},[t("div",{staticClass:"header-title"},[t("div",{staticClass:"header-title-left"},[t("div",{staticClass:"logo"},[e.getLiveRoomInfo.coverUrl?t("img",{staticClass:"logo-img",attrs:{src:e.getLiveRoomInfo.coverUrl}}):e._e(),t("div",{staticClass:"text"},[t("span",{staticClass:"room-title"},[e._v(e._s(e.getLiveRoomInfo.name))])])])]),t("div",{staticClass:"header-title-right"},[t("span",{staticClass:"heart-span",class:e.isFavorite(2)?"active":"",on:{click:function(t){return e.favorite(2,t)}}},[t("svg-icon",{staticClass:"heart-icon",attrs:{"icon-class":"heart"}}),t("span",{staticClass:"icon-label"},[e._v(e._s(e.getTotalFavoriteCount(2)))])],1),t("span",{staticClass:"online-count"},[e._v(e._s(e.getOnlineUserTotal+e.getRobotTotal))])])]),t("div",{staticClass:"header-menu"},[t("div",{staticClass:"header-menu-inner ml-15"},[t("div",{staticClass:"user-name-panel",on:{click:function(t){e.showUserMenu=!e.showUserMenu}}},[t("img",{staticClass:"user-avatar",attrs:{src:e.getUserInfo.avatar||e.getUserInfo.levelAvatar}}),t("span",{staticClass:"user-name"},[e._v(e._s(e.getUserInfo.nickName))])]),e.showUserMenu?t("div",{staticClass:"user-name-menu"},[e.getLiveRoomStyle.headerBarItem&&e.getLiveRoomStyle.headerBarItem.showChangePassword?t("div",{staticClass:"user-name-menu-item",on:{click:e.changePasswd}},[e._v("修改密码")]):e._e(),e.getLiveRoomStyle.headerBarItem&&e.getLiveRoomStyle.headerBarItem.showChangeNickname?t("div",{staticClass:"user-name-menu-item",on:{click:e.changeNickname}},[e._v("修改昵称")]):e._e(),t("div",{staticClass:"user-name-menu-item",on:{click:e.logout}},[e._v(e._s(e.isGuest?"账号登录":"退出"))])]):e._e()])])])],1)},qa=[],Ha=function(){var e=this,t=e._self._c;return t("div",{staticClass:"mobile-bottom-container"},[t("div",{staticClass:"bottom-side-bar",style:!e.getLiveRoomStyle.mobileMainStyle||!e.getLiveRoomStyle.mobileMainStyle.background||e.getLiveRoomStyle.mobileBottomPanelTitleStyle&&e.getLiveRoomStyle.mobileBottomPanelTitleStyle.backgroundColor?e.getLiveRoomStyle.mobileBottomPanelTitleStyle:e.getLiveRoomStyle.mobileBottomPanelTitleStyle||{}},[e.getLiveRoomInfo.extValue&&e.getLiveRoomInfo.extValue.disableLike?e._e():t("div",{staticClass:"item icon",on:{click:function(t){return e.favorite(1,t)}}},[t("div",{staticClass:"icon-item"},[t("svg-icon",{staticClass:"v-middle thumb-icon",class:e.isFavorite(1)?"active":"",attrs:{"icon-class":"thumb-up"}}),t("div",{staticClass:"icon-label"},[e._v(e._s(e.getTotalFavoriteCount(1)))]),t("div",{staticClass:"dynamic-emoji-panel"},[t("ul",{ref:"g-wrap",staticClass:"g-wrap"},e._l(new Array(20),function(e,i){return t("li",{key:e+"_li_"+i})}),0)])],1)]),e._l(e.navBarList.filter(e=>!e.disable),function(i,o){return t("div",{key:"nav_"+o,staticClass:"item icon",class:e.activeMobileTab==i.code?"active":"",style:e.activeMobileTab==i.code?e.getLiveRoomStyle.mobileBottomPanelItemActiveStyle:e.getLiveRoomStyle.mobileBottomPanelItemStyle,attrs:{name:i.code},on:{click:function(t){e.activeMobileTab=i.code}}},[t("div",{staticClass:"icon-item actions"},["msgs"==i.code?t("svg-icon",{staticClass:"v-middle",class:e.activeMobileTab==i.code?"active":"",attrs:{"icon-class":"聊天"}}):"users"==i.code?t("svg-icon",{staticClass:"v-middle",class:e.activeMobileTab==i.code?"active":"",attrs:{"icon-class":"online-list"}}):"menu"==i.code?t("svg-icon",{staticClass:"v-middle",class:e.activeMobileTab==i.code?"active":"",attrs:{"icon-class":"live-menu"}}):t("svg-icon",{staticClass:"v-middle",class:e.activeMobileTab==i.code?"active":"",attrs:{"icon-class":"edu"}})],1)])}),e.getLiveRoomInfo&&e.getLiveRoomInfo.extValue&&e.getLiveRoomInfo.extValue.enablePlayback?t("div",{staticClass:"item icon",on:{click:e.openPlayback}},[t("div",{staticClass:"icon-item actions"},[t("svg-icon",{staticClass:"v-middle thumb-icon",attrs:{"icon-class":"录像回放"}})],1)]):e._e(),e.getLiveRoomInfo.extValue&&e.getLiveRoomInfo.extValue.enableUserPoints?t("div",{staticClass:"item icon",class:"userPoints"==e.activeMobileTab?"active":"",style:"userPoints"==e.activeMobileTab?e.getLiveRoomStyle.mobileBottomPanelItemActiveStyle:e.getLiveRoomStyle.mobileBottomPanelItemStyle,attrs:{name:"userPoints"},on:{click:function(t){e.activeMobileTab="userPoints"}}},[t("div",{staticClass:"icon-item actions"},[t("svg-icon",{staticClass:"v-middle",class:"userPoints"==e.activeMobileTab?"active":"",attrs:{"icon-class":"积分"}})],1)]):e._e(),t("div",{staticClass:"item icon",on:{click:function(t){return e.signup()}}},[t("div",{staticClass:"icon-item actions"},[t("svg-icon",{staticClass:"v-middle",attrs:{"icon-class":"签到"}})],1)])],2),t("div",{staticClass:"body",class:e.activeMobileTab,style:e.getLiveRoomStyle.mobileBottomStyle||{}},["msgs"==e.activeMobileTab?t("div",{staticClass:"tab-panel",style:e.getLiveRoomStyle.mobileBottomPanelChatStyle},[t("Chat",{attrs:{layout:e.getLiveRoomTheme.layout}})],1):e._e(),"users"==e.activeMobileTab?t("div",{staticClass:"tab-panel user-list",style:e.getLiveRoomStyle.mobileBottomPanelUserListStyle},[t("UserList",{ref:"userListContainer",staticClass:"mobile-user-list",attrs:{layout:e.getLiveRoomTheme.layout}})],1):e._e(),"menu"==e.activeMobileTab?t("div",{staticClass:"tab-panel menu-list"},[t("ChapterItemListPanel",{staticClass:"menu-list",style:e.getLiveRoomStyle.mobileBottomPanelMenuStyle})],1):e._e(),"ads"==e.activeMobileTab?t("div",{staticClass:"tab-panel adv-panel",style:e.getLiveRoomStyle.mobileBottomPanelAdStyle},e._l(e.getLiveRoomTheme.liveSlideAdvMobileList,function(i){return t("div",{key:"smAd_"+i.id,staticClass:"adv-item"},[i.title?t("div",{staticClass:"adv-item-title"},[e._v(e._s(i.title))]):e._e(),i.img?t("img",{staticClass:"adv-item-img",attrs:{src:i.img}}):e._e(),e.isEmptyRichText(i.content)?e._e():t("div",{staticClass:"adv-item-content",domProps:{innerHTML:e._s(i.content)}})])}),0):e._e(),"userPoints"==e.activeMobileTab?t("div",{staticClass:"tab-panel user-points"},[t("MyPoints")],1):e._e()])])},Wa=[],Ga=i(36150);const Qa={name:"MobileBottomPanel",components:{MyPoints:Ga.A,Chat:St,UserList:$,ChapterItemListPanel:Ra},computed:{...(0,a.L8)(["getUserInfo","getLiveRoomInfo","getLiveRoomTheme","getLiveRoomStyle","getClientInfo","isMobile","getOnlineUserTotal","getRobotTotal","getRoomFavorite"])},data(){return{activeMobileTab:"msgs",navBarListDefault:[{name:"消息",code:"msgs"},{name:"观众",code:"users"},{name:"节目单",code:"menu"},{name:"赞助商",code:"ads"}],navBarList:[]}},mounted(){this.getLiveRoomTheme.liveMobileNavBarList?(this.navBarList=(0,M.Go)(this.getLiveRoomTheme.liveMobileNavBarList),this.navBarListDefault.forEach(e=>{let t=!1;for(let i=0;i<this.getLiveRoomTheme.liveMobileNavBarList.length;i++)if(this.getLiveRoomTheme.liveMobileNavBarList[i].code==e.code){t=!0;break}t||this.navBarList.push(e)})):this.navBarList=this.navBarListDefault},methods:{switchToMsg(){this.activeMobileTab="msgs"},signup(){let e=this;this.BUS.showDialog({width:"600px",height:"600px"},()=>{e.$modal.show("dialog",{title:"签到",component:qt.A,props:{},containerStyle:{display:"flex",flexDirection:"row",justifyContent:"center",overflow:"auto",padding:"0px"},bodyStyle:{display:"block",padding:"0px"},closeButtonStyle:{width:"32px",height:"32px",fontSize:"22px",lineHeight:"28px",backgroundColor:"#f69696",borderRadius:"5px",color:"#ffffff"},on:{confirm:e=>{},cancel:e.onCloseDialog}})})},onCloseDialog(e){this.$modal.hide("dialog")},isFavorite(e){let t=!1;return 1==e?t=this.getRoomFavorite&&this.getRoomFavorite.roomLikeCount>0:2==e&&(t=this.getRoomFavorite&&this.getRoomFavorite.roomFavoriteCount>0),console.log(e,t),t},favorite(e,t){let i=this,o={type:e,roomId:i.getLiveRoomInfo.id,userId:i.getUserInfo.userId,userName:i.getUserInfo.userName};(0,S.O$)(o).then(e=>{if(200==e.code||201==e.code){let e={roomId:i.getLiveRoomInfo.id,userId:i.getUserInfo.userId};(0,S.kc)(e).then(e=>{if(200==e.code||201==e.code){let t={roomLikeCount:e.data.roomLikeCount,roomFavoriteCount:e.data.roomFavoriteCount,realRoomFavoriteCounts:e.data.realRoomFavoriteCounts};i.$store.dispatch("setRoomFavorite",t)}})}})},getTotalFavoriteCount(e){let t=0,i=this;if(1==e){let e=this.getLiveRoomInfo.likeCounts||0,o=this.getRoomFavorite&&this.getRoomFavorite.realRoomFavoriteCounts&&this.getRoomFavorite.realRoomFavoriteCounts.filter(e=>1==e.type&&e.roomId==i.getLiveRoomInfo.id)||null,s=null!=o&&o.length>0&&o[0].count?o[0].count:0;t=Number(e)+Number(s)}else{let e=this.getLiveRoomInfo.favoritesCounts||0,o=this.getRoomFavorite&&this.getRoomFavorite.realRoomFavoriteCounts&&this.getRoomFavorite.realRoomFavoriteCounts.filter(e=>1!=e.type&&e.roomId==i.getLiveRoomInfo.id)||null,s=null!=o&&o.length>0&&o[0].count?o[0].count:0;t=Number(e)+Number(s)}return t>=1e4?(t/1e4).toFixed(2)+"万":t+""},openPlayback(){let e=this;this.BUS.showDialog({width:"100%",height:"100%"},()=>{e.$modal.show("dialog",{title:"回放列表",component:Ht.A,props:{},containerStyle:{display:"flex",flexDirection:"row",justifyContent:"center",overflow:"auto"},bodyStyle:{display:"block"},on:{confirm:e.onCloseDialog,cancel:e.onCloseDialog}})})}}},Ya=Qa;var Ja=(0,v.A)(Ya,Ha,Wa,!1,null,"72ebd680",null);const Xa=Ja.exports,Za={name:"MobileMainPanel",props:{smallAdElmTop:String},components:{MobileBottomPanel:Xa},computed:{...(0,a.L8)(["getLiveStateInfo","getLiveRoomInfo","getUserInfo","getLiveRoomStyle","isFromApp","isMobile","getLiveRoomTheme","getLiveChapterItem","getOnlineUserTotal","getRobotTotal","getLiveRoomFavoriteUsers","getToken","getRoomFavorite","isGuest"]),getSmallAdList(){return this.getLiveRoomTheme.liveSlideAdvSmallList&&this.getLiveRoomTheme.liveSlideAdvSmallList.filter(e=>!e.delFlag)||null},hasNotice(){return this.getLiveRoomTheme.noticeContent&&this.getLiveRoomTheme.noticeContent.replace(/(<p>|<br>|<\/p>|<\/br>|<br\/>)/gi,"")}},data(){return{mySmallAdElmTop:this.smallAdElmTop||"",activeAdTab:"activities",lecturerList:[],chapterItemListPanel:Ra,orientation:"portrait",videoResolution:{},showUserMenu:!1}},watch:{smallAdElmTop(e){this.mySmallAdElmTop=e},["getLiveStateInfo.active"](e){console.log("getLiveStateInfo.active",e),e||(this.videoResolution={}),setTimeout(()=>{this.adjustVideoPosition()},500)},orientation(e){console.log("orientation",e),setTimeout(()=>{this.adjustVideoPosition()},500)}},beforeMount(){window.addEventListener("updateVideoResolution",this.updateVideoResolution.bind(this))},beforeDestroy(){window.removeEventListener("updateVideoResolution",this.updateVideoResolution.bind(this))},mounted(){let e=this.$refs.animationItem;this.$nextTick(()=>{if(e){let t=e.children[0].getBoundingClientRect().height,i="-"+(t+11)+"px";e.style.top=i}this.getLiveRoomTheme.liveSlideAdvList&&this.getLiveRoomTheme.liveSlideAdvList.length||(this.activeAdTab="notices")});let t=this;const i=()=>{let e=t.$refs.adSmallContainer;if(e){let t=e.getBoundingClientRect().height;e.style.width=t+"px"}};t.BUS.calcSmallAdElmWidth=i,i(),t.getRobotList(),t.$nextTick(()=>{t.openNotice(),t.initPlayer()}),t.BUS.updatePlayer=t.updatePlayer,t.BUS.changeOrientation=t.changeOrientation,setInterval(()=>{this.$store.dispatch("clearTimeoutRoomFavoriteUser")},500),setTimeout(()=>{this.adjustVideoPosition()},500)},methods:{updateVideoResolution(e){this.videoResolution=e.detail,this.$nextTick(()=>{this.adjustVideoPosition()})},adjustVideoPosition(){const e=this.$refs.videoContainer;if(!e)return;const t=e.getBoundingClientRect(),i=t.width,o=t.height;let s,a;if(this.videoResolution&&this.videoResolution.width&&this.videoResolution.height)s=this.videoResolution.width,a=this.videoResolution.height;else{if(this.$refs.warmVideo){const e=this.$refs.warmVideo.getBoundingClientRect();s=e.width,a=e.height}else if(this.$refs.warmImg){const e=this.$refs.warmImg.getBoundingClientRect();s=e.width,a=e.height}else s=i,a=o;s&&a||(s=i,a=o)}const l=s>a;if(e.style.position="relative",l)"landscape"===this.orientation?e.style.height="100%":e.style.height="55%";else{const t=i*(a/s),l=t/(o*(100/45))*100;console.log("heightPercentage: ",l,"containerHeight: ",o,"scaledHeight: ",t),e.style.height="100%"}this.$nextTick(()=>{const t=document.querySelector(".cssmarquee-container");if(t)if(t.style.position="absolute",t.style.top="auto",t.style.bottom="auto",t.style.left="0px",t.style.width="100%",t.style.width="100%","landscape"===this.orientation)this.getLiveStateInfo.active?(t.style.left="52px",t.style.bottom="5px",t.style.width="calc(100% - 66px - 52px)"):(t.style.left="0",t.style.bottom="0",t.style.width="100%");else{const i=e.getBoundingClientRect(),o=i.width/i.height,l=s/a;let n,r;o>l?(n=i.height,r=0):(n=i.width/l,r=(i.height-n)/2);const c=i.top+r+n,m=t.getBoundingClientRect();console.log("videoActualBottom: ",c,"noticeContainerRect: ",m),this.getLiveStateInfo.active?t.style.top=c-44+22-m.height+"px":t.style.top=c-m.height+"px";const d=document.querySelector(".mobile-bottom-container");d&&(this.getLiveStateInfo.active?d.style.height=window.innerHeight-c-20+"px":d.style.height=window.innerHeight-c+"px")}})},switchToMsg(){let e=this.$refs.mobileBottomPanel;e&&e.switchToMsg&&e.switchToMsg()},changeOrientation(e){this.orientation=e},initPlayer(){(0,S.HE)({channelCode:this.getLiveRoomInfo.channelCode}).then(e=>{let t=e;this.$store.dispatch("setLiveStateInfo",t)})},updatePlayer(e,t,i,o,s,a,l,n){let r=this;this.$nextTick(()=>{if(i){(0,na.yZ)();const o="&channelCode="+r.getLiveRoomInfo.channelCode+"&roomId="+r.getLiveRoomInfo.id+"&userName="+r.getUserInfo.userName;e+=o,t+=o,(0,na.UX)(i,e,t,this.getLiveRoomTheme.warmImg,s,a,l,this.getLiveRoomInfo.id,this.getUserInfo.userName,this.getToken,this.turnServerConf,n,this.getLiveRoomInfo.extValue,this.getLiveRoomInfo.liveStreamLicenseUrl)}else(0,na.yZ)()})},openNotice(){if(this.getLiveRoomTheme.noticeContent&&this.getLiveRoomTheme.noticeContent.replace(/(<p>|<br>|<\/p>|<\/br>|<br\/>)/gi,"")){let e={title:this.getLiveRoomTheme.noticeTitle||"提示信息",titleStyle:{color:"var(--bc-color-light-gray)",backgroundColor:"var(--bc-color-dark-red)",borderBottomColor:"var(--bc-color-dark-orange)"},buttonTitle:this.getLiveRoomTheme.noticeBtnLabel||"确认",buttonBarStyle:{justifyContent:"center",backgroundColor:"var(--bc-color-light-orange)",borderTop:"unset"},buttonStyle:{color:"var(--bc-color-light-gray)",backgroundColor:"var(--bc-color-dark-red)",padding:"5px 20px"},content:'<div class="ql-editor">'+this.getLiveRoomTheme.noticeContent+"</div>",bodyClass:"ql-snow",containerStyle:{backgroundColor:"var(--bc-color-light-orange)",borderBottomColor:"var(--bc-color-light-orange)",padding:"0px 0px 10px 0px"},closeButtonStyle:{border:"1px solid var(--bc-color-orange)",color:"var(--bc-color-orange)"},width:this.isMobile?"100%":"700px",height:"auto"};this.openLink(e)}},openMenu(){let e={title:"节目单",component:this.chapterItemListPanel,width:"500px",height:"auto",titleStyle:{backgroundColor:"var(--bc-color-orange)",borderBottomColor:"var(--bc-color-dark-orange)"}};this.openLink(e)},async logout(){this.showUserMenu=!1,this.$confirm("确定注销并退出系统吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$store.commit("setReLogin",!0),(0,Ue.rj)(),this.$store.dispatch("LogOut").then(()=>{const e=(0,M.DT)();location.href=e+"index"})}).catch(()=>{})},openLink(e){this.BUS.openLink(e)},getRobotList(){let e={type:1,id:this.getLiveRoomInfo.id,count:200};(0,S.$H)(e).then(e=>{this.$store.dispatch("setRobotList",e.data)}),(0,S.u3)({id:this.getLiveRoomInfo.id}).then(e=>{this.$store.dispatch("setRobotTotal",e.data)})},lecturerVote(e){let t={roomId:this.getLiveRoomInfo.id,userId:e.userId,voteUserId:this.getUserInfo.userId};(0,S.yj)(t).then(e=>{})},changePasswd(){let e=this;e.showUserMenu=!1,this.BUS.showDialog({width:"400px",height:"320px"},()=>{e.$modal.show("dialog",{title:"修改密码",component:Bt.A,props:{},containerStyle:{display:"flex",flexDirection:"row",justifyContent:"center",overflow:"auto"},bodyStyle:{display:"block"},on:{confirm:e.onCloseDialog,cancel:e.onCloseDialog}})})},changeNickname(){let e=this;e.showUserMenu=!1,this.BUS.showDialog({width:"300px",height:"220px"},()=>{e.$modal.show("dialog",{title:"修改昵称",component:jt.A,props:{},containerStyle:{display:"flex",flexDirection:"row",justifyContent:"center",overflow:"auto"},bodyStyle:{display:"block"},on:{confirm:e.onCloseDialog,cancel:e.onCloseDialog}})})},onCloseDialog(e){this.$modal.hide("dialog")},getThumbUpIconPosition(e){const t=["#EA5455","#F97794","#E2B0FF","#FCCF31","#F55555","#9F44D3","#D939CD","#2AFADF","#FFC600","#FCFF00"],i=Math.round(9*Math.random()),o=t[t.length-i],s={left:"calc(100% - "+e.pos_x+"% - 73px)",bottom:e.pos_y+"px",color:o,fill:o};return s},thumbUpAnimationend(e,t){this.$store.dispatch("clearRoomFavoriteUser",e)},isFavorite(e){let t=!1;return 1==e?t=this.getRoomFavorite&&this.getRoomFavorite.roomLikeCount>0:2==e&&(t=this.getRoomFavorite&&this.getRoomFavorite.roomFavoriteCount>0),t},favorite(e,t){let i=this,o={type:e,roomId:i.getLiveRoomInfo.id,userId:i.getUserInfo.userId,userName:i.getUserInfo.userName};(0,S.O$)(o).then(e=>{if(200==e.code||201==e.code){let e={roomId:i.getLiveRoomInfo.id,userId:i.getUserInfo.userId};(0,S.kc)(e).then(e=>{if(200==e.code||201==e.code){let t={roomLikeCount:e.data.roomLikeCount,roomFavoriteCount:e.data.roomFavoriteCount,realRoomFavoriteCounts:e.data.realRoomFavoriteCounts};i.$store.dispatch("setRoomFavorite",t)}})}})},getTotalFavoriteCount(e){let t=0,i=this;if(1==e){let e=this.getLiveRoomInfo.likeCounts||0,o=this.getRoomFavorite&&this.getRoomFavorite.realRoomFavoriteCounts&&this.getRoomFavorite.realRoomFavoriteCounts.filter(e=>1==e.type&&e.roomId==i.getLiveRoomInfo.id)||null,s=null!=o&&o.length>0&&o[0].count?o[0].count:0;t=Number(e)+Number(s)}else{let e=this.getLiveRoomInfo.favoritesCounts||0,o=this.getRoomFavorite&&this.getRoomFavorite.realRoomFavoriteCounts&&this.getRoomFavorite.realRoomFavoriteCounts.filter(e=>1!=e.type&&e.roomId==i.getLiveRoomInfo.id)||null,s=null!=o&&o.length>0&&o[0].count?o[0].count:0;t=Number(e)+Number(s)}return t>=1e4?(t/1e4).toFixed(2)+"万":t+""}}},el=Za;var tl=(0,v.A)(el,Va,qa,!1,null,"787e9ac0",null);const il=tl.exports,ol={name:"LiveRoom",components:{LayoutLiteLeft:za,LayoutBigRight:Pa,LayoutLeftRight:pa,MobileMainPanel:il,RightPanel:Ut},computed:{...(0,a.L8)(["getToken","getUserInfo","getLiveRoomInfo","getLiveRoomTheme","getLiveRoomStyle","isMobile","getBaseUrlObj","isMulti","getLoginFlag","getClientInfo"]),layout(){return this.getLiveRoomTheme.layout||"lite-left"},hasNotice(){return this.getLiveRoomTheme.noticeContent&&this.getLiveRoomTheme.noticeContent.replace(/(<p>|<br>|<\/p>|<\/br>|<br\/>)/gi,"")}},watch:{"$store.state.isMobile":function(e){this.myMobile=e},getToken(e){e||"login"!=this.$route.name&&this.$router.push({name:"login"})}},data(){return{myMobile:void 0,checkWsStatusTimer:null,checkLiveRoomStatusTimer:null}},mounted(){const e=this.$route.query.pun;e&&this.$store.commit("setParentUserName",e),this.myMobile=!!this.$mobileDetect.phone(),this.BUS.checkIsMobile=this.checkIsMobile,this.$store.commit("clearEveryThing");let t=this,i=t.getBaseUrlObj;if(!this.getToken){let t={name:"login"};return e&&(t.query={pun:e}),void this.$router.push(t)}let o=0,s=()=>{if(!t.getToken){clearTimeout(t.checkLiveRoomStatusTimer),clearTimeout(t.checkWsStatusTimer);let i={name:"login"};return e&&(i.query={pun:e}),void this.$router.push(i)}if(t.getLoginFlag)return clearTimeout(t.checkLiveRoomStatusTimer),void(t.checkLiveRoomStatusTimer=setTimeout(s,3e4));if(!t.getUserInfo)return clearTimeout(t.checkLiveRoomStatusTimer),void(t.checkLiveRoomStatusTimer=setTimeout(s,3e4));const i={roomId:t.getLiveRoomInfo.id,userId:t.getUserInfo.userId,userName:t.getUserInfo.userName,token:t.getToken,channelCode:t.getLiveRoomInfo.channelCode,wsSessionType:t.isMobile?"APP_LIVE_ROOM":"PC_LIVE_ROOM"};console.log(i),(0,S.kk)(i).then(e=>{1!=e.data?(console.error("直播间不可访问"),o>=120?(clearTimeout(t.checkLiveRoomStatusTimer),clearTimeout(t.checkWsStatusTimer),setTimeout(()=>{t.$store.dispatch("LogOut").then(()=>{const e=(0,M.DT)();location.href=e+"index"})},3e3)):(o++,clearTimeout(t.checkLiveRoomStatusTimer),t.checkLiveRoomStatusTimer=setTimeout(s,3e4))):(o=0,t.checkLiveRoomStatusTimer=setTimeout(s,3e4))}).catch(e=>{o>=120?(clearTimeout(t.checkLiveRoomStatusTimer),clearTimeout(t.checkWsStatusTimer),setTimeout(()=>{t.$store.dispatch("LogOut").then(()=>{const e=(0,M.DT)();location.href=e+"index"})},3e3)):(o++,clearTimeout(t.checkLiveRoomStatusTimer),t.checkLiveRoomStatusTimer=setTimeout(s,3e4))})};s=s.bind(t),s();let a=()=>{if(t.getToken){if(t.checkWsStatusTimer&&clearTimeout(t.checkWsStatusTimer),(0,Ue.zS)()<1)if(i&&!(0,M.Im)(i.wsURL))(0,Ue.E_)(i.wsURL,t.getToken,t.getLiveRoomInfo.id);else{let e=window.location.protocol+"//"+window.location.host,i=e.replace(/^http/g,"ws").replace(/[\/]*$/g,"/ws/websocket");(0,Ue.E_)(i,t.getToken,t.getLiveRoomInfo.id)}t.checkWsStatusTimer=setTimeout(a,3e3)}else if(clearTimeout(t.checkLiveRoomStatusTimer),clearTimeout(t.checkWsStatusTimer),"/login"!==this.$route.path){let t={name:"login"};e&&(t.query={pun:e}),this.$router.push(t).catch(e=>{console.warn("Navigation error:",e)})}};if(a=a.bind(t),a(),this.getToken){let e={roomId:this.getLiveRoomInfo.id,userId:this.getUserInfo.userId};(0,S.kc)(e).then(e=>{if(200==e.code||201==e.code){let t={roomLikeCount:e.data.roomLikeCount,roomFavoriteCount:e.data.roomFavoriteCount,realRoomFavoriteCounts:e.data.realRoomFavoriteCounts};this.$store.dispatch("setRoomFavorite",t)}}).catch(e=>{console.error(e)}),setTimeout(()=>{if(this.hasNotice){let e=(0,Oe.RH)(F.iC.LIVE_MSG,"RICH",this.getLiveRoomTheme.noticeContent,{nickName:"公告"},{},this.getLiveRoomInfo);e.data.id="0",this.$store.dispatch("addMsgs",[e])}},200)}else{let t={name:"login"};e&&(t.query={pun:e}),this.$router.push(t)}},beforeUnmount(){clearTimeout(this.checkWsStatusTimer),clearTimeout(this.checkLiveRoomStatusTimer)},methods:{checkIsMobile(){let e=this;setTimeout(()=>{e.myMobile=!!e.$mobileDetect.phone()},1e3)}}},sl=ol;var al=(0,v.A)(sl,o,s,!1,null,"18580493",null);const ll=al.exports},60934:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAAXNSR0IArs4c6QAAAYtJREFUSEvtlb8vA2EYxz+PXBNjR4ON0WC0djKQIEYDg4SNgTSl6hV3SBhISCwGSUeDwR9BQtKBxGA0GA2Gpnc8cpe7Rqjr3SmTZ3zz5vvJ831+CX8U8kcc/kGZnY63ztEiMAPc8oqhIndZSd+DHB0BLprCSh04xmMNIy9pgXGgdcCgXCNYwGAgrjzRRZkVOUkDaw+Cc1ZlAlungD2EnhBQo4tZSnKTBJgc5KsZ7cZiG5hH6A4BVVyWMfIUB0wHipSM9pNjFxgP7awjlHE5wohfyy+RDRTJ2DqGYAMD4dMDDQpsyONn0s9AkZ055lB2AjsVm7Ks/QbIIscCShkh/zsgR4eBQ6A/zOAel0Krxshm3ab2IewjjIbN8Iywg8tBZ5rBaB6LIsISBEPsR5UGpVYN8LFOyTPa0unAf+gNs7jkjUUqctWZgVVqgD8nQ80V5Bf+lVOMeEkg/p/vM7J1EuHsg5CHso+Hg5HnpIDoX7szsRqeiRpusLXv0wKSgbKqplpBHYTE1+gf1MaBd0jWmRvg1j5nAAAAAElFTkSuQmCC"}}]);